---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=7&t=203445&p=1103105#p1103105
crawled_date: 2025-02-02T21:58:09.101323
section: mikrotik_forum
type: forum_thread
keywords: filter, vlan, route
---

### Author: Tue Jan 16, 2024 9:24 am
Date: Unknown

```
[admin@MikroTik] > /interface/wifi/access-list/print detail
Flags: X - disabled 
 0   interface=wifi2 signal-range=0 time=0s-0s action=query-radius
```

HiI have just switched to Mikrotik APs (having owned a switch for some time) and got almost everything working. I have a CRS326 and two cAP AX, and a pfsense router. What works is Wifi with WPA-EAP and auth and dynamic VLAN assignment through a radius server on the pfsense.What not yet works is WPA-PSK for the devices that don't handle WPA-EAP on a separate wifi interface. I want the WAP-PSK also query the radius to a) filter by MAC address and b) assign a VLAN (just as it is working for WAP-EAP).The thing is that the cAP AX use theWifi package.  If I consult the manual, it says that MAC adress auth can be done via an access list. I tried that, but my radius is not even queried when a new client connects:Code:Select allI must be missing something, but I don't find in the documentation how else I can achieve this.If I look at theWireless package, I see a reference toradius-mac-authenticationbut I don't have that. Is that assumption correct? Packages still confuse me.Thanks for any pointers or other help.


---
### Author: Tue Jan 23, 2024 3:04 pm
Date: Unknown

```
add authentication-types=wpa2-eap group-key-update=30m management-protection=\
    allowed mode=dynamic-keys name=Rradius radius-called-format=ssid \
    supplicant-identity="" tls-mode=dont-verify-certificate
```

```
/radius
add address=192.168.24.1 called-id=RomSlowB secret=radiusromabcd service=\
    wireless src-address=192.168.24.48
add address=192.168.24.2 called-id=RomSlowB secret=radiusromabcd service=\
    wireless src-address=192.168.24.48
add address=192.168.24.1 called-id=RomFastB secret=radiusromabcd service=\
    wireless src-address=192.168.24.48
```

Yes "called-id" is the parameter in the RADIUS setting with the SSID value. Nothing specific for CAPsMAN. I use this as well for just my stand-alone AP's.Same or different radius server for different SSID. Even a sequence of RADIUS servers for the same SSID, for the case where one server does not respond, or to have a second one as fall-back.Security profile has :Code:Select all.And the AP has also following RADIUS setting ... something likeCode:Select all.(Attempt via VRRP to have high-availability with MT failed for RADIUS (User manager), the answer came from the non-VRRP IP address and was refused.Well actually I had problems when the RADIUS server (User Manager) had multiple IP addresses in the subnet with the AP's. Responding-IP-address used by UserManager is not defined.So now I just set both User Manager servers in sequence in every AP. Also a non-MT radius server was added there in the transition to the MT User Manager RADIUS.Sequence is important for fall-back case. Fallback also works for all SSID if "called-id" is left blanc.)Using MAC:SSID format for called-format? The MAC is supposed to be the MAC of the AP, not the wifi connecting device AFAIK (the AP is client/router to the RADIUS server)viewtopic.php?t=9398#p42104

