# Thread Information
Title: Thread-1122718
Section: RouterOS
Thread ID: 1122718

# Discussion

## Initial Question
Hi, I have 2 global IPV6 prefixes in my network and my goal is to use netwatch to update the distance of the two gateway and also "gently" disable the prefix thats down. I wanted to use the command /ipv6 advertise=no but that is not recognized.What is a good way to achieve that? note: i do not want to use NPT or NAT for IPv6, i want to use the full delegated network as it is actually intended by the IPv6 standard, so that the clients will select the best route/prefix themselves over SLAAC.the ressources on this topic are very limited as it seems, everybody wants to mess around with NAT for IPv6, which is just wrong. ---

## Response 1
seems like ROS cant do that. But I have set the ra-lifetime on /ipv6 nd to 1 minute (and 5s ra-interval) and a netwatch script is actually removing the ipv6 address from the prefix pool thats down. That seems to do the trick for now. Even though its not a nice solution. ---

## Response 2
As Im the first one attempting this (I cannot find any other postings in the forum with a successful working IPv6 failover config) I will post my current setup, which works flawlessly as of now. Note: Im using 8.8.8.8 and 1.1.1.1 as monitoring IP, but Im not using them for actual DNS, Im using quad9 and 1.1.1.2 for that (maleware block). Important: for check-gateway and netwatch to work, those IPs must be unreachable during WAN-failover. Blackhole routes are the only means to do that. There are scripts in the forum using recursive routing and route-marking, thats incorrect and does not reliably work. Blackholing is actually meant to be used for this.
```
# Set interface names/interfaceset[finddefault-name=ether2]name=WAN1/interfaceset[finddefault-name=ether3]name=WAN2[....VLANandDHCP configurationandfirewall-rulesforfasttrack...]# DNS setup/ip dnssetservers=9.9.9.9,1.1.1.2,2620:fe::9,2606:4700:4700::1112allow-remote-requests=yes# WAN DHCP clients (IPv4 and IPv6)/ip dhcp-clientaddinterface=WAN1add-default-route=nodisabled=no/ip dhcp-clientaddinterface=WAN2add-default-route=nodisabled=no/ipv6 dhcp-clientaddinterface=WAN1add-default-route=nopool-name=WAN1-pool prefix-hint=::/62request=address,prefix disabled=nouse-peer-dns=no/ipv6 dhcp-clientaddinterface=WAN2add-default-route=nopool-name=WAN2-pool prefix-hint=::/62request=address,prefix disabled=nouse-peer-dns=no# IPv6 Address assignment for VLAN50/ipv6 addressaddaddress=fd37:443d:252b:0::1/64interface=main-network advertise=nocomment="ULA generated for this interface as DNSv6 address for RDNSS"/ipv6 addressaddfrom-pool=WAN1-poolinterface=main-network address=::1advertise=yes comment="Prefix from WAN1"/ipv6 addressaddfrom-pool=WAN2-poolinterface=main-network address=::2advertise=yes comment="Prefix from WAN2"# ipv4 default routes and special routes for online-check/ip routeadddst-address=0.0.0.0/0distance=1gateway=192.168.1.1check-gateway=ping comment="Primary WAN"/ip routeadddst-address=0.0.0.0/0distance=2gateway=192.168.2.1check-gateway=ping comment="Secondary WAN"/ip routeadddst-address=8.8.8.8/32gateway=192.168.1.1distance=1comment="Primary WAN monitoring ipv4"/ip routeadddst-address=1.1.1.1/32gateway=192.168.2.1distance=1comment="Secondary WAN monitoring ipv4"/ip routeadddst-address=8.8.8.8/32blackhole distance=10comment="Primary WAN monitoring ipv4"/ip routeadddst-address=1.1.1.1/32blackhole distance=10comment="Secondary WAN monitoring ipv4"# ipv6 default routes and special routes for online-check/ipv6 routeadddst-address=::/0distance=1gateway=fe80::%WAN1 check-gateway=ping comment="Primary IPv6 WAN"/ipv6 routeadddst-address=::/0distance=2gateway=fe80::%WAN2 check-gateway=ping comment="Secondary IPv6 WAN"/ipv6 routeadddst-address=2001:4860:4860::8888/128gateway=fe80::%WAN1 distance=1comment="Primary WAN monitoring ipv6"/ipv6 routeadddst-address=2606:4700:4700::1111/128gateway=fe80::%WAN2 distance=1comment="Secondary WAN monitoring ipv6"/ipv6 routeadddst-address=2001:4860:4860::8888/128blackhole distance=10comment="Primary WAN monitoring ipv6"/ipv6 routeadddst-address=2606:4700:4700::1111/128blackhole distance=10comment="Secondary WAN monitoring ipv6"# Failover-Script/system scriptaddname="WAN1-up-4"dont-require-permissions=yes source=":local MyRoute [/ip route find where dst-address=0.0.0.0/0 gateway=192.168.1.1]; /ip route set \$MyRoute distance=1; /log warning \"IPv4 failover event: WAN1 IPv4 is now UP"/system scriptaddname="WAN2-up-4"dont-require-permissions=yes source=":local MyRoute [/ip route find where dst-address=0.0.0.0/0 gateway=192.168.2.1]; /ip route set \$MyRoute distance=2; /log warning \"IPv4 failover event: WAN2 IPv4 is now UP"/system scriptaddname="WAN1-down-4"dont-require-permissions=yes source=":local MyRoute [/ip route find where dst-address=0.0.0.0/0 gateway=192.168.1.1]; /ip route set \$MyRoute distance=10; /log warning \"IPv4 failover event: WAN1 IPv4 is now DOWN"/system scriptaddname="WAN2-down-4"dont-require-permissions=yes source=":local MyRoute [/ip route find where dst-address=0.0.0.0/0 gateway=192.168.1.1]; /ip route set \$MyRoute distance=11; /log warning \"IPv4 failover event: WAN2 IPv4 is now DOWN"/tool netwatchaddhost=8.8.8.8interval=5stimeout=2sup-script="/system script run WAN1-up-4"down-script="/system script run WAN1-down-4"/tool netwatchaddhost=1.1.1.1interval=5stimeout=2sup-script="/system script run WAN2-up-4"down-script="/system script run WAN2-down-4"/system scriptaddname="WAN1-up-6"dont-require-permissions=yes source=":local MyRoute [/ipv6 route find where dst-address=::/0 gateway=fe80::%WAN1]; /ipv6 route set \$MyRoute distance=1; /ipv6 address add from-pool=WAN1-pool interface=main-network address=::1 advertise=yes comment= \"Prefix from WAN1\"; /log warning \"IPv6 failover event: WAN1 IPv6 is now UP"/system scriptaddname="WAN2-up-6"dont-require-permissions=yes source=":local MyRoute [/ipv6 route find where dst-address=::/0 gateway=fe80::%WAN2]; /ipv6 route set \$MyRoute distance=2; /ipv6 address add from-pool=WAN2-pool interface=main-network address=::2 advertise=yes comment=\"Prefix from WAN2\"; /log warning \"IPv6 failover event: WAN2 IPv6 is now UP"/system scriptaddname="WAN1-down-6"dont-require-permissions=yes source=":local MyRoute [/ipv6 route find where dst-address=::/0 gateway=fe80::%WAN1]; /ipv6 route set \$MyRoute distance=10; /ipv6 address remove [find where from-pool=WAN1-pool]; /log warning \"IPv6 failover event: WAN1 IPv6 is now DOWN"/system scriptaddname="WAN2-down-6"dont-require-permissions=yes source=":local MyRoute [/ipv6 route find where dst-address=::/0 gateway=fe80::%WAN2]; /ipv6 route set \$MyRoute distance=11; /ipv6 address remove [find where from-pool=WAN2-pool] /log warning \"IPv6 failover event: WAN2 IPv6 is now DOWN"/tool netwatchaddhost=2001:4860:4860::8888interval=5stimeout=2sup-script="/system script run WAN1-up-6"down-script="/system script run WAN1-down-6"/tool netwatchaddhost=2606:4700:4700::1111interval=5stimeout=2sup-script="/system script run WAN2-up-6"down-script="/system script run WAN2-down-6"# IPv6 Router Advertisement configuration/ipv6 ndaddinterface=main-network ra-lifetime=1mra-delay=5sra-interval=5s-10sother-configuration=yes dns=fd37:443d:252b:0::1/ipv6 ndaddinterface=all disabled=yes

---
```