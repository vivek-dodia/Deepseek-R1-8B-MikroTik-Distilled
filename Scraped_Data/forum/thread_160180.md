---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=7&t=160180&p=787419#p787419
crawled_date: 2025-02-02T21:58:11.765044
section: mikrotik_forum
type: forum_thread
keywords: bridge, dns, route, routeros
---

### Author: Sat Feb 06, 2021 12:21 pm
Date: Unknown

```
/interface bridge nat add chain=dstnat mac-protocol=ip ip-protocol=udp src-port=67 dst-port=68 action=dst-nat to-dst-mac-address=FF:FF:FF:FF:FF:FF
```

UPDATED:tested this more, and figured out that the hack is only needed when DHCP server and AP are a single MikroTik device in 802.11 or nstreme mode (in nv2 mode pseudobridge works as a proper bridge)Posting here because this thread is a top google result for "mikrotik pseudobridge dhcp".Hope it helps me and everyone else in the future.If you try to use MikroTik in this scenario:DHCP server⮁Wi-FiAccess Point⮁(standard 802.11Wi-Fi)MikroTik in "station pseudobridge" mode, with Wi-Fi and Ethernet bridged⮁(wiredEthernet)1 or morewireddevices asDHCP clientsThis scheme works works well, except when DHCP server and AP are both in a single MikroTik device, then wired devices fail to get their IP addresses.This happens because MikroTik AP's DHCP server replies using broadcast destination address (FF:FF:FF:FF:FF:FF), and MikroTik in pseudobridge mode replaces this to its own MAC, therefore the DHCP client doesn't receive the DHCP reply.This can be solved by using a simple Bridge NAT rule, which replaces DHCP reply DST MAC back to broadcast:Code:Select allYou will need to replacebridgethere with your bridge name, which bounds Ethernet and Wi-Fi together.Be warned, that some protocols that rely on broadcasting or use MAC addresses will not work (for example DLNA), but for most cases this allows to connect a wired LAN segment wirelessly to an existing Wi-Fi.


---
### Author: Sat Feb 06, 2021 3:02 pm
Date: Unknown

```
/interface bridge nat add chain=dstnat mac-protocol=ip ip-protocol=udp src-port=67 dst-port=68 action=dst-nat to-dst-mac-address=FF:FF:FF:FF:FF:FF
```

This happens because DHCP server replies using broadcast destination address (FF:FF:FF:FF:FF:FF), and MikroTik in pseudobridge mode replaces this to its own MAC, therefore the DHCP client doesn't receive the DHCP reply.This can be solved by using a simple Bridge NAT rule, which replaces DHCP reply DST MAC back to broadcast:Code:Select allYou will need to replacebridgethere with your bridge name, which bounds Ethernet and Wi-Fi together.Be warned, that some protocols that rely on broadcasting or use MAC addresses will not work (for example DLNA), but for most cases this allows to connect a wired LAN segment wirelessly to an existing Wi-Fi.Interesting !!I thought it was the DHCPserver that made the mistake. But I don't remember where I did the sniffing (but non-Mikrotik DHCP-servers DO work with the same pseudo-bridges)... . Fact is indeed the DHCP offer never arrives(DHCP server now also has a parameter with the number of IP addresses per MAC address. But still it would not arrive.)viewtopic.php?f=2&t=116963#p734225


---
### Author: Thu Oct 21, 2021 11:13 pm
Date: Unknown

Just related ....viewtopic.php?t=179493#p886773Remember that MT-MT will work perfectly as "AP-bridge" - "station bridge" . Experiences with nv2 are always MT-MT , and may work just because of the AP-bridgefunction.Other brands don't have a compatible "bridge" function in the AP. (But their DHCP server mostly does work with "station-pseudobridge")


---
### Author: Tue Apr 09, 2024 1:43 pm
Date: Unknown

```
/interface bridge nat add chain=dstnat mac-protocol=ip ip-protocol=udp src-port=67 dst-port=68 action=dst-nat to-dst-mac-address=FF:FF:FF:FF:FF:FF
```

```
/interface bridge nat add chain=dstnat mac-protocol=ip ip-protocol=udp src-port=67 dst-port=68 action=dst-nat to-dst-mac-address=FF:FF:FF:FF:FF:FF
```

UPDATED:tested this more, and figured out that the hack is only needed when DHCP server and AP are a single MikroTik device in 802.11 or nstreme mode (in nv2 mode pseudobridge works as a proper bridge)Posting here because this thread is a top google result for "mikrotik pseudobridge dhcp".Hope it helps me and everyone else in the future.If you try to use MikroTik in this scenario:DHCP server⮁Wi-FiAccess Point⮁(standard 802.11Wi-Fi)MikroTik in "station pseudobridge" mode, with Wi-Fi and Ethernet bridged⮁(wiredEthernet)1 or morewireddevices asDHCP clientsThis scheme works works well, except when DHCP server and AP are both in a single MikroTik device, then wired devices fail to get their IP addresses.This happens because MikroTik AP's DHCP server replies using broadcast destination address (FF:FF:FF:FF:FF:FF), and MikroTik in pseudobridge mode replaces this to its own MAC, therefore the DHCP client doesn't receive the DHCP reply.This can be solved by using a simple Bridge NAT rule, which replaces DHCP reply DST MAC back to broadcast:Code:Select allYou will need to replacebridgethere with your bridge name, which bounds Ethernet and Wi-Fi together.Be warned, that some protocols that rely on broadcasting or use MAC addresses will not work (for example DLNA), but for most cases this allows to connect a wired LAN segment wirelessly to an existing Wi-Fi.Same issue here, works afterCode:Select all


---
### Author: Thu Oct 10, 2024 4:50 pm
Date: Unknown

```
/interface bridge nat add chain=dstnat mac-protocol=ip ip-protocol=udp src-port=67 dst-port=68 action=dst-nat to-dst-mac-address=FF:FF:FF:FF:FF:FF
```

This can be solved by using a simple Bridge NAT rule, which replaces DHCP reply DST MAC back to broadcast:Code:Select allThank you, this really helped!BTW I found out, that some DHCP servers can have problem, when src MAC and Client MAC address (in DHCP data, not Option 61) are different. The server doesn't response at all...Unfortunately it looks like there is no way to manipulate DHCP packet in the Mikrotik.But some DHCP helper which wouldn't change the src MAC only for these DHCP packets could help. Also what could (generaly) help is changing in the DHCP request the unicast flag to broadcast (so the offer from DHCP server is able to return, if the client doesn't have already IP isn't reachable).As a proof of concept I tried to make bridge src-nat on the AP side and it worked. Unfortunately making src-nat in bridge on station side is not working, the station-pseudobridge still makes it's own src-nat always...P.S. I tested also some TP-Link repeater/bridge and DHCP works without problem with it.

