---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=9&t=206482&p=1068069#p1068069
crawled_date: 2025-02-02T21:36:54.196334
section: mikrotik_forum
type: forum_thread
---

### Author: Fri Apr 05, 2024 2:31 pm
Date: Unknown

```
{:do{/tool fetch url=https://pki.goog/roots.pem dst-path=roots-goog.pem;/certificateremove[findwhereauthority expired];/certificateimportfile-name=roots-goog.pem passphrase="";/fileremoveroots-goog.pem;:log info("Updated certificate trust store");}on-error={:log error("Failed to update certificate trust store");};}
```

Following on this old post:viewtopic.php?t=169662&sid=6818e151144b ... d9a4004745My version looks like this but generates the error every other run. I run it once, it fails (i.e. it writes the error to the log), run it again and it passes (i.e. it writes the success message to the log). If I manually enter the commands they work fine on their own. Any reason why it would fail 50% of the time?Code:Select all


---
### Author: [SOLVED]Fri Apr 05, 2024 4:33 pm
Date: Unknown

```
{
    :do {
        /tool fetch url="https://pki.goog/roots.pem" dst-path="roots-goog.pem"
        :delay 2s
        /certificate
            remove [find where authority expired]
            import file-name="roots-goog.pem" passphrase=""
        /file remove [find where name="roots-goog.pem"]
        :log info "Updated certificate trust store"
    } on-error={
        :log error "Failed to update certificate trust store"
    }
}
```

remove frills, improve logicsexample code

