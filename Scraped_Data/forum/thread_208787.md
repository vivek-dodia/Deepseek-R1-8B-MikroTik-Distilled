---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=9&t=208787&p=1082554#p1082554
crawled_date: 2025-02-02T21:36:17.023522
section: mikrotik_forum
type: forum_thread
---

### Author: [SOLVED]Thu Jun 27, 2024 2:27 pm
Date: Unknown

```
/ip dhcp-server lease
:if ($leaseBound = 1 && [ get [ find where mac-address=$leaseActMAC ] dynamic ] = true) do={
	:do {
		:tool fetch url="https://api.telegram.org/botXXXXX/sendMessage\?chat_id=XXXX&text=The following MAC address [$leaseActMAC] received an IP address [$leaseActIP] from the DHCP Server [$leaseServerName]" keep-result=no
	:log info "Sent DHCP alert for MAC $leaseActMAC"
	} on-error={:log error "Failed to send alert via Telegram"}
}
```

Hi,I have a small script (can't recall from where I got it to be honest), but seems that after one of latest upgrades it stopped working:Code:Select allcan you please help me fix it ? I know that issue is with "if" loop, but I can't figure out what exactly.

