---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=9&t=205965&p=1064904#p1064904
crawled_date: 2025-02-02T21:20:05.310887
section: mikrotik_forum
type: forum_thread
---

### Author: Tue Mar 19, 2024 12:21 am
Date: Unknown

```
# NTP
do {
    /system
    	clock set time-zone-name=Greenwich
    	ntp client set enabled=yes
   	ntp client set primary-ntp=0.0.0.0
    	ntp client set secondary-ntp=0.0.0.0
} on-error= { :put "Ignoring - RouterOS v7" }

do {
    /system
        clock set time-zone-name=Greenwich
        ntp client set enabled=yes
        ntp client servers add address=0.0.0.0
        ntp client servers add address=0.0.0.0
} on-error={ :put "Ignoring - RouterOSv6" }
```

Hi guys!I have a standard script that I use to configure Mikrotiks in my work.I'm trying to adapt the script so that would work in ROS6 and ROS7, but i'm not having lucky when testing this part on latest version of ROS7.The code is supposed to result in error in one of the versions, that's why I'm using "on-error".The problem is that the error is not being handled as I programmed in code, instead it only shows that that is having an error.Am I making this wrong? Appreciate the help.expected end of command (line 6 column 20)Code:Select all


---
### Author: Wed Mar 20, 2024 11:36 am
Date: Unknown

```
{
:local ver [:tonum [:pick [/system resource get version] 0 1]] 
:put $ver
}
```

Instead of using on-error, find out what version of RouterOS the router is running and the run the correct part with if:Sample code to see main version:Code:Select all


---
### Author: Wed Mar 20, 2024 4:03 pm
Date: Unknown

```
:local rOSversion [:tonum [:pick [system resource get version]]]

:if (num ($rOSversion)<7) do={
    /system
    clock set time-zone-name=Greenwich
    ntp client set enabled=yes
    ntp client set primary-ntp=0.0.0.0
    ntp client set secondary-ntp=0.0.0.0
} else={
    /system
    clock set time-zone-name=Greenwich
    ntp client set enabled=yes
    ntp client servers add address=0.0.0.0
    ntp client servers add address=0.0.0.0
}
```

Thanks @Jotne !I change my approach on how to solve the problem just like you said and it's working now!Code:Select all


---
### Author: [SOLVED]Wed Mar 20, 2024 5:41 pm
Date: Unknown

```
:if ([/system resource get version]~"^7") do={
    # call script for v7
    /system script run v7script
} else={
    # call script for v6
    /system script run v6script
}
```

```
:execute "/system clock set time-zone-name=Greenwich"
:execute "/system ntp client set enabled=yes"
:execute "/system ntp client set primary-ntp=1.1.1.1 secondary-ntp=2.2.2.2"
:execute "/system ntp client add address=1.1.1.1"
:execute "/system ntp client add address=2.2.2.2"
```

Of course there is a way.Even more than one.For example make two scripts,and call from a third script only the correct script for that version.untested example codeOr you can ignore the syntax difference altogether....untested example codeIn the latter way, each version applies its own commands and ignores errors.


---
### Author: Wed Mar 20, 2024 8:03 pm
Date: Unknown

```
# ROSv6
    :execute "/system clock set time-zone-name=Greenwich"
    :execute "/system ntp client set enabled=yes"
    :execute "/system ntp client set primary-ntp=0.0.0.0"
    :execute "/system ntp client set secondary-ntp=0.0.0.0"

    # ROSv7
    :execute "/system clock set time-zone-name=Greenwich"
    :execute "/system ntp client set enabled=yes"
    :execute "/system ntp client servers add address=0.0.0.0"
    :execute "/system ntp client servers add address=0.0.0.0"
```

Thanks for the answer, rextended!By the way, your posts here in the forum already helped me a lot since I started working with Mikrotik, thanks!I tested both ways you mentioned in ROSv7 and ROSv6 and it work flawless.Decided to go with the second method for simplicity.So the result was:Code:Select allThanks rextended and Jotne!

