---
title: Thread-214201
url: https://forum.mikrotik.com/viewtopic.php?t=214201
thread_id: 214201
section: RouterOS
post_count: 7
date_crawled: 2025-02-03T21:26:41.716589
---

### Post 1
Author: Unknown
Date: Unknown

Hi all:I own a small ISP, and for that ISP, I have a pair of redundant routers, generally one acting as "active" and the other as "backup" through the use of VRRP, bgp, etc.  That's all good.At my home, I cannot use my own internet as my house is not covered by my ISP's fiber.  So I have a Mikrotik router at home that is using wireguard to connect to my ISP primary router, and is set to allow my home subnet through, and both routers have static routes for my home IP subnet pointing to my home wireguard IP.The issue is this can only be configured to use one router at a time.  By that, I mean if my primary router goes down, it will not work with the backup until I go in and update the wiregard configurations on both ISP and home routers and change static routes on the ISP routers.  It seems there should be a way to set up in my home router an active/backup model where it will automatically switch routers when needed (I can either connect to a router's direct IP, or have it connect to the VRRP IP so it will get whichever router is active), and have the route for the home subnet automatically updated.What is the best way to do this?  My best idea would be to have wireguard sessions open to both routers simultaneously (with different IP ranges for direct), and then use some dynamic routing protocol to propagate the route.  However, I'm not sure on the best way to accomplish that, or if there's a "better" way.  And which dynamic routing system would be the best choice?  I'm already running BGP, but I think if I run iBGP, I'd have to have sessions to both routers, and I'm not sure how to manage priorities (Or maybe I don't?)  Or maybe just forget dynamic routing and have wireguard to both routers with static routes on both routers pointing directly to the wireguard session on itself?  In any case, I seek ideas from those more experienced!--Jim

---
### Post 2
Author: Unknown
Date: Unknown

Not quite sure but you should be able to have two wireguard tunnels up at all times.Home router to ISP1   on one wireguard interface  and Home router to ISP2 on a second wireguard interface.Just not sure how your ISP routers are setup and whether or not the backup has a live connection at all.......

---
### Post 3
Author: Unknown
Date: Unknown

Both ISP routers have full time connection to the internet.  Yes, I can do that...I guess I didn't clarify:1) My home INTERNAL subnet (192.168.4.0/24) is NOT natted, but directly routed through the tunnel.  As such, each ISP router has to have a route for that subnet pointing to the Wiregard IP to use (and they will have to be different to have two tunnels up).2) My home network uses the wireguard tunnel for ALL internet-bound traffic (eg, all my traffic leaving my home is sent over a wireguard tunnel to the ISP, and if it is going out to the internet, the ISP router NATs it; if it is for a network on my ISP network, it is routed directly without NATting.)Those are the issues that have been complicating things.

---
### Post 4
Author: Unknown
Date: Unknown

Sounds like you are complicating things unnecessarily LOL.Assuming your router at home is MT, like a hapax3 etc.......It still requires a NORMAL wan connection to a local ISP.Then you can wireguard to the other ISP routers you are managing at a different location as much as you want through that connection.There is nothing to be gained by not having a standard home LAN setup at your home??Perhaps I am still missing something but without a network diagram its fuzzy........

---
### Post 5
Author: Unknown
Date: Unknown

The key is that from the ISP core/mgnt networks, I can directly access devices inside my home (like my NAS used for backups of critical files).  So, my home is more or less a standard home lan, with a wiregard to the ISP routers.  This serves two purposes:1) all devices in authorized ISP networks can directly contact any IP inside my home and my home devices can directly access management devices at the ISP that have IP-based restrictions.2) My home ISP has lots of restrictions on Internet websites I can access, and I don't trust them in general, so I tunnel ALL Internet bound traffic through the wiregard tunnel, and then NAT it at the ISP router when it goes out to the internet, thus all my Internet connections come from an IP from my ISP instead of my home internet provider (AT&T Cellular).

---
### Post 6
Author: Unknown
Date: Unknown

Again,understood, this is quite  easy to accomplish.Recommend two wireguard interfaces on home router  one to connect to ISP Router1  and  a second to connect to ISP router 2.In this way the  following is accomplished.Authorized external wireguard  users, accessing either ISP1 or ISP2  will have access to  IS1 or ISP2 router  configAuthorized external wireguard  users, accessing either ISP1 or ISP2  will have access to  home router configAuthorized external wireguard  users, accessing either ISP1 or ISP2  will have access to  home router LAN  SUBNETSAuthorized home users can access either ISP1 or ISP2 configAuthorized home user can access internet provided by ISP1  or  ISP2.After all is done post here for review./export file=anynameyouwish  (minus router serial number, any  public WANIP information, keys etc. )

---
### Post 7
Author: Unknown
Date: Unknown

if the ISP uses VRRP, it can also issue a roaming IP from the WAN side, then you will connect Wireguard to this IP

---
