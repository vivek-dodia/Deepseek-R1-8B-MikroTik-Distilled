---
title: Untitled Thread
source_url: https://forum.mikrotik.com/viewtopic.php?f=13&t=212901&p=1111763#p1111763
crawled_date: 2025-02-02T21:38:25.308827
section: mikrotik_forum
type: forum_thread
---

### Author: Thu Nov 28, 2024 6:33 pm
Date: Unknown

```
/interfacebridgeaddname=bridge protocol-mode=none vlan-filtering=yes/interfacevlanaddinterface=bridge name=vlan10 vlan-id=10addinterface=bridge name=vlan11 vlan-id=11addinterface=bridge name=vlan12 vlan-id=12/interfacebridge portaddbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether1 pvid=10addbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether2 pvid=11addbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether3 pvid=12addbridge=bridge comment=trunk frame-types=admit-only-vlan-taggedinterface=ether4/interfacebridge vlanaddbridge=bridge tagged=bridge,ether4 untagged=ether1,ether2,ether3 vlan-ids=10-12/ip servicesetssh disabled=nosetwww disabled=nosetwinbox disabled=no/ipv6 addressaddaddress=2a02:aaaa:bbbb:10::interface=vlan10addaddress=2a02:aaaa:bbbb:11::interface=vlan11addaddress=2a02:aaaa:bbbb:12::interface=vlan12/ipv6 dhcp-clientaddadd-default-route=yesinterface=ether5 request=address/ipv6 ndset[finddefault=yes]advertise-dns=nodisabled=yes hop-limit=64interface=bridge managed-address-configuration=yes mtu=1500other-configuration=yesaddadvertise-dns=nohop-limit=64interface=ether1 other-configuration=yesaddadvertise-dns=nohop-limit=64interface=ether2 other-configuration=yesaddadvertise-dns=nohop-limit=64interface=ether3 other-configuration=yes/ipv6 nd prefixaddinterface=ether1 prefix=2a02:aaaa:bbbb:10::/64addinterface=ether2 prefix=2a02:aaaa:bbbb:11::/64addinterface=ether3 prefix=2a02:aaaa:bbbb:12::/64/tool romonsetenabled=yes
```

```
/interfacebridgeaddbridge protocol-mode=none vlan-filtering=yes/interfacebridge portaddbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether1 pvid=10addbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether2 pvid=11addbridge=bridge frame-types=admit-only-untagged-and-priority-taggedinterface=ether3 pvid=12addbridge=bridge comment=trunk frame-types=admit-only-vlan-taggedinterface=ether4/interfacebridge vlanaddbridge=bridge tagged=ether4,bridge untagged=ether1,ether2,ether3 vlan-ids=10-12/tool romonsetenabled=yes
```

Posting in the beginner area, as I am a newbie, so hopefully the fix is easy. Please ignore missing firewalls etc, this is an experimental setup and I want to make sure the current part works before I continue.So I got RouterOS 17.16.1 installed on x86 hardware acting as a router, plus CRS309-1G-8S+ switch.Router config:Code:Select allSwitch config:Code:Select allRouter and Switch are connected via ether4 port on both devices that act as a trunk.My ISP have allocated a static /48 IPv6 prefix, and I want each of 10, 11 and 12 VLANs to have their own /64 IPv6 subnet.I have tried to plug several different devices (Linux and MacOS) into respective ports in my router, and everything works exactly as I expect (e.g. a device plugged into ether2 port would get a 2a02:aaaa:bbbb:11:ab:cd:ef/64 IPv6).But plugging the same device into any port in my switch would result in a device getting 3 IPv6 addresses (not counting link local ones), one from each range I defined, e.g.  2a02:aaaa:bbbb:10:aa:bb:cc/64, 2a02:aaaa:bbbb:11:dd:ee:ff/64 and 2a02:aaaa:bbbb:12:ii:jj:kk/64.How can I make devices connected to the switch to only get IPv6 addresses they are supposed to?Thanks!


---
### Author: [SOLVED]Thu Nov 28, 2024 6:47 pm
Date: Unknown

ASSUMING VLAN10 is the trusted VLAN where all managed devices should get their IP address from!!On Router1. MINORFrom:/interface bridge portadd bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether1 pvid=10add bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether2 pvid=11add bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether3 pvid=12add bridge=bridge comment=trunk  frame-types=admit-only-vlan-tagged interface=ether4TO:/interface bridge portadd bridge=bridgeingress-filtering=yesframe-types=admit-only-untagged-and-priority-tagged interface=ether1 pvid=10add bridge=bridge ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged interface=ether2 pvid=11add bridge=bridge ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged interface=ether3 pvid=12add bridge=bridge ingress-filtering=yes frame-types=admit-only-vlan-tagged interface=ether4comment="trunk to  switch"2.  Major.....From:/interface bridge vlanadd bridge=bridge tagged=bridge,ether4 untagged=ether1,ether2,ether3 vlan-ids=10-12TO:/interface bridge vlanadd bridge=bridge tagged=bridge,ether4 untagged=ether1 vlan-ids=10add bridge=bridge tagged=bridge,ether4 untagged=ether2 vlan-ids=11add bridge=bridge tagged=bridge,ether4 untagged=ether3 vlan-ids=12On Switch3. From/interface bridge portadd bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether1 pvid=10add bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether2 pvid=11add bridge=bridge frame-types=admit-only-untagged-and-priority-tagged interface=ether3 pvid=12add bridge=bridge comment=trunk frame-types=admit-only-vlan-tagged interface=ether4TO:/interface bridge portadd bridge=bridgeingress-filtering=yesframe-types=admit-only-untagged-and-priority-tagged interface=ether1 pvid=10add bridge=bridge ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged interface=ether2 pvid=11add bridge=bridge ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged interface=ether3 pvid=12add bridge=bridge ingress-filtering=yes frame-types=admit-only-vlan-tagged interface=ether4comment="trunk to  router"4.  From:/interface bridge vlanadd bridge=bridge tagged=ether4,bridge untagged=ether1,ether2,ether3 vlan-ids=10-12TO:  ( only  trusted vlan is tagged for  bridge )/interface bridge vlanadd bridge=bridge tagged=bridge,ether4 untagged=ether1 vlan-ids=10add bridge=bridge tagged=ether4 untagged=ether2 vlan-ids=11add bridge=bridge tagged=ether4 untagged=ether3 vlan-ids=12


---
### Author: Thu Nov 28, 2024 7:29 pm
Date: Unknown

```
/interfacebridge vlanaddbridge=bridge tagged=ether4 untagged=ether2 vlan-ids=11addbridge=bridge tagged=ether4 untagged=ether2 vlan-ids=13/interfaceethernetswitchruleaddnew-vlan-id=13ports=ether2 src-mac-address=11:11:11:11:11:11/FF:FF:FF:FF:FF:FFswitch=switch1addnew-vlan-id=13ports=ether2 src-mac-address=22:22:22:22:22:22/FF:FF:FF:FF:FF:FFswitch=switch1
```

Thanks anav,ingress-filtering=yes is the default [at least in the current RouterOS version], this is why it isn't there. I have added it to my config to make it explicit. I have also updated trunk related comments as it is more clear that way.I do not have trusted/untrusted VLANs for now as this is an experimental setup that is not going to be really used, but following your advice to split one /interface bridge vlanconfig line into 3 distinct lines helped to resolve the issue, and also makes total sense now that I see it from the new perspective. Appreciate your help.Now, I got a stretch question if you don't mind.Assume I have a WiFi access point that is not VLAN aware, connected to let's say ether2 on Switch. I want to use switch rules on Mikrotik to separate Trusted and Guest devices to different VLANs based on their MAC addresses [I know this is a bad security practice, but this is the hardware I have; consider it a convenience not security] by assigning Trusted devices to let's say VLAN 13.That will make the respective part of the Switch config to look like this:Code:Select allThat will in turn make both Trusted and Guest devices to receive IPv6 addresses with both 11 and 13 prefixes, kind of similar to the original issue, but now we actually need two VLANs on the same port.Is there a proper way to configure this?

