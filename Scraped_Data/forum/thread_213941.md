---
title: Thread-213941
url: https://forum.mikrotik.com/viewtopic.php?t=213941&sid=3b77a3334c914448dbbc02bfdff4c3aa
date: 2025-02-03T11:57:09.481648
---

### Author: Unknown
Date: Unknown

RouterOS version 7.17 have been released in the "v7 stable" channel!
Before an upgrade:
1) Remember to make backup/export files before an upgrade and save them on another storage device;
2) Make sure the device will not lose power during upgrade process;
3) Device has enough free storage space for all RouterOS packages to be downloaded.
What's new in 7.17.1 (2025-Jan-30 12:29):
*) bgp - improved system stability when printing BGP advertisements;
*) bridge - fixed endless MAC update loop (introduced in v7.17);
*) dhcpv4-server - fixed lease assigning when server address is not bind to server interface (introduced in v7.17);
*) igmp-proxy - fixed multicast routing after upstream interface flaps (introduced in v7.17);
*) ipsec - fixed chacha20 poly1305 proposal;
*) ipsec - fixed installed SAs update process when SAs are removed;
*) ipv6 - fixed an issue where bridge, IP, IPv6 and discovery settings were lost after upgrade due to conflicting IPv6 properties (introduced in v7.17);
*) ovpn - added requirement for server name when exporting configuration;
*) ppc - fixed HW encryption (introduced in v7.17);
*) queue - improved system stability when many simple queues are added (introduced in v7.17);
*) resolver - fixed static FQDN resolving (introduced in v7.17);
*) system,arm - automatically increase boot part size on upgrade or netinstall (fixed upgrade failed due to a lack of space on kernel disk/partition);
*) winbox - show warning messages for static DNS entries;
What's new in 7.17 (2025-Jan-16 10:19):
!) device-mode - after upgrade, mode "enterprise" is renamed to "advanced" and traffic-gen, partition (command "repartition"), routerboard and install-any-version features will be disabled;
!) webfig - redesigned HTML, styling and functionality;
*) 6to4 - fixed issue where 6to4 relay would not forward traffic unless destination address is set;
*) adlist - improved logging;
*) adlist - improved system stability;
*) adlist - optimized import on system with low disk space;
*) api - fixed REST API serialization of binary data;
*) arm64 - fixed for bare-metal servers to be able to access more than 2GB RAM;
*) arm64 - show CPU frequency on bare-metal installations;
*) arm64/x86 - added missing PCI id for mlx4 driver;
*) bonding - hide mlag-id property on non-compatible devices;
*) bridge - add HW offload support for active-backup bonds on 98DXxxxx, 88E6393X, 88E6191X and88E6190 switches;
*) bridge - added interface-list support for VLANs;
*) bridge - added message for inactive port reason;
*) bridge - added priority setting to manually elect primary MLAG peer;
*) bridge - correctly display PPP interfaces in VLAN menu;
*) bridge - disallow duplicate static VLAN entries;
*) bridge - disallow multicast MAC address as admin-mac;
*) bridge - enable faster HW offloading when detect-internet is disabled;
*) bridge - fixed first host table response for SNMP;
*) bridge - fixed incorrect HW offloaded port state in certain cases on MSTI add;
*) bridge - fixed missing slave flag on port in certain cases;
*) bridge - fixed MVRP registrar and applicant port options;
*) bridge - fixed port monitor with interface-lists;
*) bridge - fixed port move command;
*) bridge - fixed setting bridge MTU to L2MTU value;
*) bridge - fixed VLAN overlap check;
*) bridge - ignore disabled interfaces when calculating bridge L2MTU;
*) bridge - improved port handling;
*) bridge - improved stability;
*) bridge - prioritize MAC selection from Ethernet interfaces when using auto-mac feature;
*) bridge - re-synchronize MLAG system-id when bridge MAC changes;
*) bridge - removed support for master port config conversion (used before version 6.41);
*) bridge - update dynamic MSTI priority value when changing configuration;
*) bth - improved stability on system time change;
*) certificate - do not download CRL if there is not enough free RAM;
*) certificate - do not show not relevant values for certificate template (CLI only);
*) certificate - fixed handling of capsman-cap certificates (introduced in v7.16);
*) certificate - removed unstructured address field support;
*) chr - added Chelsio VF driver for PCIID 5803;
*) chr/arm64 - fixed kernel crypto use without crypto extensions for RPi CM4;
*) cloud - changed ddns-enabled setting from "no" to "auto" (service is enabled when BTH is enabled);
*) cloud - improved DDNS and VPN state stability;
*) console - added :range command;
*) console - added group-by property for print command;
*) console - added json.no-string-conversion to :serialize;
*) console - added lf/crlf options to :convert transform;
*) console - added more argument definitions for mac-protocol property;
*) console - added password property to "/system/ssh-exec" command;
*) console - added to/from=num option for :convert command;
*) console - allow clearing history for a specific user;
*) console - allow setting width to supout.rif output;
*) console - clear history when removing user;
*) console - disallow autocomplete hints for user without read policy;
*) console - execute :return command without error;
*) console - fixed endless loop when closing input prompt;
*) console - fixed missing arguments in wifi menu in certain cases;
*) console - force print paging when output does not fit terminal width;
*) console - improved printing output in some menus;
*) console - improved scripting system stability;
*) console - increased w60g scan-list size to 6;
*) console - print warning in CLI after enabling protected bootloader;
*) console - removed "chain" names from print parameter list and show all print parameters in "/ipv6/firewall/filter" directory;
*) console - show system-id in export for CHR;
*) console - updated copyright notice;
*) container - allow import from .tar.gz file;
*) container - do not log start, end events unless logging is enabled;
*) container - fixed user and group ID range;
*) container - improved "start-on-boot" stability;
*) container - improved container shell;
*) crypto - improve crypto speeds;
*) crypto - use hardware accelerator for GCM cipher in TLS connection on Alpine CPUs;
*) defconf - changed wireless installation from "indoor" to "any";
*) defconf - disable 5GHz secondary channel on RB4011;
*) defconf - do not add default password for CAP mode configuration on older Audience devices without a password;
*) defconf - fixed new port name recognition;
*) detnet - remove dynamic DHCP client creation;
*) device-mode - added "allowed-versions" list which are allowed to be installed without "install-any-version" mode enabled;
*) device-mode - added "basic" mode;
*) device-mode - added routerboard, install-any-version and partitions features;
*) device-mode - allow feature and mode update on x86 via power button and reboot/shutdown from AWS;
*) device-mode - fixed feature and mode update on ARM64 Hetzner;
*) device-mode - fixed feature and mode update via power-reset on MIPSBE devices;
*) device-mode - limit "/tool/ping-speed" and "/tool/flood-ping" under "traffic-gen" feature;
*) device-mode - limit device-mode update maximum allowed attempt count which can be reset only with reboot or button press;
*) device-mode - provide more precise device-mode update action printout;
*) device-mode - show all features and active restrictions with "print" command;
*) dhcp-relay - added "local-address-as-src-ip" property;
*) dhcp-server - use interface ID for NAS-Port and added interface name to NAS-Port-ID attribute in RADIUS requests;
*) dhcp-server - use single RADIUS accounting session for IPv4 and IPv6 when dual stack is used;
*) dhcpv4-client - correctly handle adding/setting emtpy dhcp-options;
*) dhcpv4-client - fixed crash when releasing disabled DHCP client;
*) dhcpv4-client - respect Renewal-Time (58) and Rebinding-Time (59) options;
*) dhcpv4-server - do not remove options set config when DHCP network is changed;
*) dhcpv4-server - properly detect DHCP server address when underlying interface has multiple IP addresses configured;
*) dhcpv4-server/relay - added additional error messages for DHCP servers and relays;
*) dhcpv4/v6-server - added address-list parameter to which address will be added if the lease is bound;
*) dhcpv6-client - added prefix-address-list parameter;
*) dhcpv6-client - improved system stability when DHCPv6 client is enabled on non-existing interface;
*) dhcpv6-client - log message when response with invalid transaction-id received;
*) dhcpv6-client/server - added support for DHCPv6 reconfigure messages;
*) dhcpv6-server - added IPv6 address delegation support;
*) dhcpv6-server - do not require "prefix-pool" to be specified;
*) dhcpv6-server - fixed DHCPv6 server "address-pool" property showing in command line as "unknown" when real value is "static-only";
*) dhcpv6-server - improved system stability when removing actively used DHCPv6 server;
*) dhcpv6-server - include all existing prefixes (with lifetime 0) in renew reply and new prefix if RADIUS returns different prefix;
*) dhcpv6-server - properly display "static-pool" value in server print output for "prefix-pool" argument;
*) discovery - added support for LLDP DCBX;
*) discovery - use LLDP description field to populate platform, version and board-name;
*) disk - added "type=file" for file-based block devices, useful for using file as a swap, or when having file-based filesystem images (CLI only);
*) disk - added btrfs filesystems list (CLI only);
*) disk - added mount-read-only and mount-filesystem options to allow read-only mounts and prevent mounting device at all (CLI only);
*) disk - added sshfs client to "/disk" menu (CLI only);
*) disk - added support for SWAP, currently allowed on any block device with "set x swap=yes" when container package is installed (CLI only);
*) disk - allow to configure global and per disk mountpoint template - [slot],[model],[serial],[fw-version],[fs-label],[fs-uuid],[fs] variables supported;
*) disk - auto mount iso and squashfs images;
*) disk - fixed managing and cleaning up mount points;
*) disk - fixed raid role auto selection for up to 64 drives;
*) disk - improve slot naming and improvements for visualizing complex hardware topology;
*) disk - improve test to report zero byte iops;
*) disk - improved system stability;
*) disk - read/show exfat filesystem label;
*) disk - recognize virtual sd* interfaces;
*) disk - remove 32 character slot name limit;
*) disk - save raid superblock and raid bitmap superblock on member devices in 1.2 format/location;
*) disk - show detailed mountpoint users when unable to unmount;
*) disk - show usage as percentage (CLI only);
*) disk - try all NFS versions (4.2,4.1,4.0,3,2) when mounting NFS in that order;
*) disk,nvme - show nvme namespaces if configured more than one on a nvme drive;
*) dns - added option to create named DNS servers that can be used as forward-to servers;
*) dns - do not look up local cache when executing ":resolve" command with specified "server" parameter (introduced in v7.16);
*) dns - DoH whitelist support for adlist using static FWD entries;
*) dns - refactored DNS service internal processes;
*) dns - whitelist support for adlist using static FWD entries;
*) ethernet - improved interface stability for RB4011 devices;
*) ethernet - improved linking after reboot for hAP ax lite devices ("/system routerboard upgrade" required);
*) ethernet - improved stability after reboot for Chateau PRO ax;
*) ethernet - improved system stability for CCR2004-1G-2XS-PCIe device;
*) ethernet - log warning only about excessive broadcast (do not include multicast) and reduced log count;
*) fetch - fixed certificate check when provided hostname is IP address;
*) fetch - fixed large file (over 4GB) fetch in HTTP/HTTPS mode;
*) file - correctly identify mounted disks;
*) file - do not needlessly scan large filesystems, could prevent unmounting;
*) file - improved handling of changes to the file system;
*) file - improved service stability when accessing files list from other system services;
*) file - support files over 4GB size;
*) file - update file size before trying to request content;
*) firewall - added none-dynamic and none-static arguments for IPv6 address-list-timout settings;
*) firewall - added support for random external port allocation;
*) firewall - added warning log for TCP SYN flood;
*) firewall - fixed "dst-limit" and "limit" mathers when using zero value for burst argument;
*) firewall - improved matching from deeply nested interface-lists;
*) firewall - removed default mangle passthrough=yes configuration from export;
*) ftp - added VRF support;
*) gps - changed default GPS antenna setting for LtAP mini with internal LTE/GPS combo antenna;
*) graphing - fixed graphing rule removal;
*) graphing - fixed queue graph storing on disk;
*) health - added cpu-overtemp-check on ARM, ARM64 devices (CLI only);
*) health - changed PSU state from "no-ac" to "no-input";
*) health - hide settings in CLI if there is nothing to show;
*) health - removed board-temperature on RB5009UPr+S+IN device;
*) igmp-proxy - refactored IGMP querier;
*) ike2 - improved performance by balancing multicore CPU usage for key exchange calculation also for initiator;
*) iot - added additional debug for LoRa logging;
*) iot - added an option to print out LoRa traffic in CLI (not GUI-only option anymore);
*) iot - added new LoRa traffic FCnt packet counter parameter;
*) iot - added support for USB Bluetooth dongles (LE 4.0+) which enables Bluetooth functionality;
*) iot - bluetooth peripheral device menu now displays correct iBeacon major/minor values;
*) iot - fixed duplicate LoRa payloads in the traffic tab;
*) iot - fixed incorrect LoRa joineui filter export behavior;
*) iot - fixed LoRa behavior, where join eui or dev eui could be incorrectly converted during forwarding;
*) iot - improved system stability for LoRa;
*) iot - improvements to LoRa device's stats tab;
*) iot - LoRa LNS improvement;
*) iot - LoRa traffic tab RSSI now shows proper values for ARM architecture;
*) iot - modbus rework which improves Tx Rx switching behavior;
*) iot - mqtt improvement to support large payloads and gracefully discard payloads above size limit;
*) iot - removed crc-disabled and crc-error options from the LoRa forwarding;
*) iot - removed LoRa pause traffic option/setting;
*) iot - removed some LoRa radio related parameters (e.g. RSSI-OFF and Tx-enabled) that were not meant to be changed;
*) ippool - removed maximum "63 bit" prefix length limitation;
*) ipsec - ike2 improved process for policies;
*) ipv6 - added comment property to "/ipv6/nd/prefix" menu;
*) ipv6 - added IPv6 settings related to stale IPv6 neighbor cleanup;
*) ipv6 - added support for manual link-local address configuration;
*) isis - do not disable fast-path when isis is enabled on an interface;
*) isis - fixed console flags;
*) isis - fixed invalid L2 LSP type;
*) isis - make it work when MTU is larger than 1500;
*) isis - update interface MAC address on change (caused neighbor to stuck in init state);
*) kid-control - use time format according to ISO standard;
*) l3hw - improved system stability;
*) l3hw - rate limit error logging;
*) leds - fixed issue where interface LEDs might not properly disable in some cases;
*) log - added basic validation for "disk-file-name" property;
*) log - added hostname support to remote logging action;
*) log - added regex parameter for log filtering in rules;
*) log - fixed e-mail logging (introduced in v7.16);
*) log - use time format according to ISO standard;
*) lte - added option to check/install modem firmware from early-access/testing channel (CLI only);
*) lte - added provider specific firmware update (FOTA) for Cosmote GR networks on Chateau 5G;
*) lte - disabled ims service for Chateau 5G on operator "3 AT" network (PLMN ID 23205);
*) lte - drop operator selection support for R11e-4G modem as it is unreliable;
*) lte - fixed "default-name" property in export when multiple LTE interfaces are used;
*) lte - fixed "lte monitor" signal reporting for RG520F-EU modem when connected to 5G SA network;
*) lte - fixed "operator" setting for EC200A-EU modem;
*) lte - fixed long "PLMN search in progress" for SXT 3-7;
*) lte - fixed LTE band setting for SXT LTE 3-7;
*) lte - fixed roaming barring (allow-roaming=no) for EC200A-EU modem;
*) lte - fixed signal info reporting for FG621-EA modem in UMTS network;
*) lte - fixed SMS sender parsing;
*) lte - improved modem FW upgrade for Chateau 5G;
*) lte - improved R11eL-EC200A-EU modem firmware upgrade procedure;
*) lte - improved recovery after unexpected modem reboot for Chateau's 5G and 5G R16 series devices;
*) lte - improvements to modem "firmware-upgrade" command;
*) lte - MBIM increased assignable APN profile count up to 8 then modem firmware allows it;
*) lte - modem firmware update (FOTA), added support to install provider specific version;
*) lte - removed trailing "F" symbol from uicc;
*) lte - set "sms-read=no" and "sms-protocol=auto" as default values;
*) lte - set IPv6 address reporting format in modem init for AT modems and MBIM modems with AT channel;
*) mac-server - allow MAC-Telnet access through any bridged port when bridge interface is allowed;
*) mac-telnet - use ASCII DEL as erase/backspace char instead of BS (fixes mac-telnet backspace for WinBox4);
*) macvlan - improved error when trying to create new interface on already busy parent interface;
*) macvlan - updated driver;
*) modem - KNOT BG77 modem, improved handling of modem unexpected restarts;
*) mpls - added fast-path support for VPLS;
*) mpls - added MPLS mangle support;
*) mpls - added support for "ICMP Fragmentation needed";
*) mpls - do no drop LDP peering session on PW deactivation;
*) mpls - do not reconnect VPLS on name or comment changes;
*) netinstall - removed unused "Get key" button;
*) netinstall - save and restore device-mode configuration on format;
*) netinstall-cli - added "-o" option to install devices only once per netinstall run;
*) netinstall-cli - fixed x86 detection;
*) netwatch - added "ignore-initial-up" and "ignore-initial-down" properties;
*) netwatch - fixed multiple variables;
*) netwatch - fixed probe toggle when adding a comment;
*) ospf - fixed memory corruption;
*) ospf - improved stability on configuration update;
*) ovpn - added VRF support to OVPN server (server menu now supports multiple entries and previous server configuration is automatically imported);
*) ovpn - improved system stability;
*) ovpn-client - added tls-crypt, tls-crypt-v2 support;
*) ovpn-server - added "user-auth-method" property and allow mschap2 for RADIUS authentication;
*) pimsm - improved system stability after interface disable;
*) poe-out - added low-voltage-too-low status;
*) poe-out - improved PoE-out configuration handling when doing reset-configuration command;
*) poe-out - upgraded firmware for CRS354-48P-4S+2Q+ device (the update will cause brief power interruption to PoE-out interfaces);
*) poe-out - upgraded firmware for PSE (BT) controlled boards (the update will cause brief power interruption to PoE-out interfaces);
*) port - display a warning when using invalid log-file with the "remote-access" feature;
*) port - more detailed print command output, include in "USED-BY" property channel number(s);
*) ppp - add routes in matching VRF;
*) ppp - added support for bridge-port-pvid configuration via ppp profile;
*) ppp - added support for bridge-port-trusted configuration via ppp profile;
*) ppp - do not print local/remote pool related errors in log when configuration does not require pool usage;
*) ppp - fixed typos in log message;
*) ppp - reuse link-local IPv6 address for static bindings when possible;
*) ppp - set APN/PDN type "IPv4/v6" according assigned PPP profile protocol setting;
*) pppoe - added support for PPPoE server over 802.1Q VLANs;
*) profiler - classify ppp processing;
*) profiler - improved process classification;
*) profiler - renamed radv process to radvd;
*) ptp - added dynamic switch ACL rules in order to trap PTP packets to CPU instead of forwarding;
*) ptp - added option to configure L2 transport with forwardable and non-forwardable MAC destination;
*) ptp - added PTP support for CRS320-8P-8B-4S+ and CRS326-4C+20G+2Q+ devices;
*) ptp - display warning when none of the PTP ports has a link;
*) ptp - fixed DSCP values for IPv4 packets;
*) ptp - fixed packet receive with enabled igmp-snooping;
*) ptp - fixed packet tx/rx when enabling PTP on 1/2.5/100Gbps links for 98CX8410, 98DX8525, 98DX4310 switches (introduced in v7.16);
*) ptp - fixed synchronization on QSFP28 interfaces;
*) ptp - make PTP process more stable and deterministic when applying configuration;
*) ptp - restrict configuring g8275 profile with IPv4 transport;
*) qos-hw - allow to disable/enable profiles, disabled or removed profile gets replaced with the default;
*) qos-hw - enabling PFC on port also requires setting egress-rate-queueN;
*) qos-hw - fixed export when changing default Tx Manager;
*) qos-hw - fixed incorrect port byte-use counter;
*) qos-hw - improved PFC behavior;
*) qos-hw - improved system stability when enabling QoS;
*) qos-hw - improved WRED and ECN behavior;
*) qos-hw - rename pfcN-pause and pfcN-resume to pfcN-pause-threshold and pfcN-resume-threshold;
*) qos-hw - reworked PCP and DSCP mapping (now supports single, multiple and range values, previous configuration with minimal value mapping is converted to a single value);
*) qos-hw - switch-cpu port trust settings are forced to "keep";
*) queue - improved system stability when too many simple queues are added;
*) quickset - added "LTE AP" quickset profile with one wifi interface;
*) rip - improved stability when changing metric;
*) romon - added dynamic switch rules on devices supporting it when enabling the service;
*) romon - added interface-list support;
*) romon - send uptime in discovery;
*) rose-storage - allow to set iscsi-iqn only when type=iscsi and allow nvme-tcp-name only when type=nvme-tcp;
*) rose-storage - do not allow to format exported disks;
*) rose-storage - enable autocomplete for local-path property in "/file/sync" menu;
*) rose-storage - enable more threads for faster RAID sync;
*) rose-storage - ensure unique nvme-tcp-names for nvme-tcp clients;
*) rose-storage - improved error messages;
*) rose-storage - improved system stability;
*) rose-storage,raid - improved stability of degraded arrays on startup;
*) rose-storage,raid - store superblock in 1.2 format, show raid super block info when detected to help with reassembling arrays;
*) route - fixed discourse attribute print;
*) route - fixed minor typo in failure message;
*) route - fixed possible issue with inactive routes after reboot (introduced in v7.16);
*) route - improved stability;
*) route - improved stability with static route configuration;
*) route - increased interface name length limit in log messages;
*) route - removed possibility for IPv6 routes to specify interface in the dst-address;
*) routerboot - fixed boot MAC for devices with Alpine CPU ("/system routerboard upgrade" required);
*) routerboot - fixed boot MAC for MIPSBE CRS3xx and CRS5xx switches ("/system routerboard upgrade" required);
*) routerboot - improved stability for IPQ8072 and IPQ6010 when flash-boot is used ("/system routerboard upgrade" required);
*) routing-filter - fixed subtract and add for numerical values (+x, -x);
*) rsync - fixed when used over ssh and spaces in directory names;
*) sfp - fixed 1Gbps supported rate for RB960 and RB962 devices;
*) sfp - fixed linking with 1Gbps optical modules with "combo-mode=sfp" configuration for CRS312 device;
*) sfp - improved initialization and linking for some SFP modules;
*) sfp - improved initialization for certain SFP modules on CRS309 and CRS317 devices ("/system routerboard upgrade" required);
*) sfp - improved power control configuration for QSFP optical modules according to the EEPROM field;
*) sfp - improved SFP auto-negotiation for L22, L23 devices;
*) sfp - improved SFP28, QSFP28 interface stability using DAC cable for CRS520 switch;
*) smb - stability improvements for client/server;
*) snmp - added wifi fields to MIKROTIK-MIB;
*) socks - fixed comment property for access configuration;
*) ssh - added option to configure SSH ciphers (replaced allow-none-crypto parameter);
*) ssh - do not regenerate host key after update from RouterOS version older than 7.9;
*) ssh - improved logging;
*) ssh - improved speed;
*) ssh - prefer GCM ciphers for arm64 and x86 devices when ciphers=auto;
*) ssl/tls - improved performance;
*) sstp - added pfs=required option to allow only ECDHE during TLS handshake;
*) storage - preserve permissions,owners,attributes when syncing under "/file/sync";
*) storage,rsync - fixed to work with clients passing "-a" option;
*) supout - added BGP advertisements section;
*) supout - added device-mode section;
*) supout - do not create autosupout.rif for second time after system reboot;
*) supout - print non BGP and OSFP routes if route list is too large;
*) supout - reduce minimal RAM required for export to be included;
*) supout - use separate LTE section;
*) switch - added "all" argument for "new-dst-ports" switch rule property for CRS3xx, CRS5xx, CCR2116 and CCR2216 devices;
*) switch - added IPv6 flow label matching in switch rules for CRS3xx, CRS5xx, CCR2116 and CCR2216 devices;
*) switch - allow bond interfaces in switch rules for CRS3xx, CRS5xx, CCR2116 and CCR2216 devices;
*) switch - allow matching network bitmask for IPv4 and IPv6 dst/src-address properties in switch rule;
*) switch - disallow switch-cpu in "ports" and "new-dst-ports" rule properties for CRS3xx, CRS5xx, CCR2116, CCR2216 and RB5009 devices;
*) switch - fixed a potential issue with packet corruption caused by incorrect switch initialization on CRS3xx/5xx devices;
*) switch - fixed L2MTU for 25Gbps ports;
*) switch - fixed RSPAN error message when using mirror-target=cpu;
*) switch - fixed rule disable in certain cases for 98DX224S, 98DX226S, and 98DX3236 switch chips;
*) switch - fixed storm-rate accuracy on 98DX224S, 98DX226S, and 98DX3236 switch chips;
*) switch - force "mac-protocol" when matching IPv4 or IPv6 specific properties;
*) switch - improved CPU performance for CRS328-24P-4S+ switch;
*) switch - improved system stability for RB5009 and CCR2004-16G-2S+ devices;
*) switch - make switch rule "ports" property not required and unsettable (allows matching packets on all switch ports);
*) switch - updated dynamic switch rules when using HW bridge with IGMP snooping (224.0.0.0/24 and ff02::/16 destination addresses are forwarded and copied to CPU);
*) system - improved IPv6 maximum routing table size based on total memory;
*) system - make ICMP error source address selection configurable (icmp-errors-use-inbound-interface-address parameter in ip settings);
*) system - make TCP timestamp handling configurable (tcp-timestamps parameter in ip settings);
*) system - moved "/system/upgrade" to "/system/package/local-update";
*) tftp - improved stability;
*) upnp - rename service description file from gateway_description.xml back to gateway.xml;
*) user-manager - improved stability;
*) vpls - added support for bridge-pvid configuration;
*) vrf - fixed packet handling with enabled queues;
*) vxlan - fixed issue causing to loose IPv6 VTEP address setting;
*) webfig - added search option for settings;
*) webfig - allow download from file details;
*) webfig - allow style.css and script.js in branding packages;
*) webfig - fixed uploading files with Windows style newlines;
*) webfig - hide inherited wifi password;
*) webfig - improved keyboard navigation;
*) webfig - improved screen reader support;
*) webfig - improved system stability when used over many simultaneous sessions;
*) webfig - redirect "/help/license.html" to "/license.txt" for backwards compatibility;
*) webfig - reduce flickering when table is sorted by column with duplicate values;
*) webfig - Skin Designer moved to centralized page;
*) webfig - status page is deprecated, old status page config will work, but can't be updated or created;
*) webfig - support unicode strings;
*) wifi - add information to each interface, showing which CAPsMAN manages it or which CAP hosts it when applicable;
*) wifi - added a debug log entry when switching channel;
*) wifi - added ability to set security.owe-transition-interface to "auto";
*) wifi - added access-list stats (CLI only);
*) wifi - added configuration.installation property to limit use of indoor-only channels;
*) wifi - added debug log messages on station authentication mismatch;
*) wifi - added extra info to CAPsMAN about message;
*) wifi - added last-activity property in registration table;
*) wifi - added multi-passphrase (PPSK) support (CLI only);
*) wifi - added option to reset MAC address (CLI only);
*) wifi - added station-roaming support;
*) wifi - allow IPv6 LL address in caps-man-addresses;
*) wifi - disabled 802.11h on 2.4GHz station;
*) wifi - fixed "disabled" property in certain cases;
*) wifi - fixed failure to resume operation after DFS non-occupancy period has elapsed;
*) wifi - fixed failure with "auto" peer update on the OWE interface;
*) wifi - fixed occasional failure to bring up management frame protection and channel switch capabilities;
*) wifi - fixed the "no available channels" message still being displayed after a setting change has made some channels available;
*) wifi - improved FT roaming with WPA3 for some Apple devices;
*) wifi - indicate radios' ability to perform a channel switch in their "hw-caps" attribute;
*) wifi - indicate which channels are subject to DFS, or are indoor-only in output of "monitor" command;
*) wifi - re-word the "SA Query timeout" log message to "not responding";
*) wifi - show authentication type and wireless standard used by each client in registration table;
*) wifi - show regulatory limits on maximum bandwidth in output of radio/reg-info command;
*) wifi - when operating in station mode, log more information when AP switches to an unsupported channel;
*) wifi-qcom - added Superchannel country profile;
*) wifi-qcom - updated regulatory info for Ukraine, Australia and United States;
*) wifi-qcom-ac - allow use of channel 144 under "Japan" regulatory domain;
*) wifi-qcom-ac - fix possible conflict between radio and USB initialization on hAP ac2;
*) wifi-qcom-ac - improved CPU load balancing and system stability;
*) winbox - added "Copy to Access List" option under "WiFi/Registration" menu;
*) winbox - added "Max Entries" and "Total Entries" properties under "IP/Firewall/Connections/Tracking" menu;
*) winbox - added "Scan" and "Test Disks" features under "System/Disks" menu;
*) winbox - added Enable/Disable buttons under "Tools/Graphing" menus;
*) winbox - added MAC address support for "Group" property under "Bridge/MDB" menu;
*) winbox - added missing "bus" option for compatible devices under "System/RouterBOARD/USB Power Reset" menu;
*) winbox - added missing properties under "IP/Neighbors" menu;
*) winbox - allow to edit Ethernet MAC address;
*) winbox - clear "Value" field when unset under "IP/DNS/Static" menu;
*) winbox - fixed duplicate timezone names;
*) winbox - fixed typo in "System/Reset Configuration" menu;
*) winbox - hide LCD menu for devices without display;
*) winbox - hide LTE "External Antenna" menu for devices without switchable antenna option;
*) winbox - improved stability;
*) winbox - minimal required version is v3.41;
*) winbox - refresh values under "Bridge/VLANs/MVRP Attributes" menu;
*) winbox - renamed and moved "System/Auto Upgrade" to "System/Packages" menu;
*) winbox - renamed wrong invalid interface flag to inactive;
*) winbox - show "FEC" property on status tab for interfaces that use it;
*) winbox - show MLAG settings for CRS326-4C+20G+2Q+ device;
*) winbox - updated properties and behavior under "Switch/QoS" menu;
*) wireguard - do not initiate handshake when peer is configured as responder;
*) wireless - added option to reset MAC address (CLI only);
*) wireless - added vlan-id to registration-table;
*) wireless - allow to set Canada2 country profile when locked with US lock package for CubeG device;
*) wireless - enable all chains by default for RB911 and RB922 series devices;
*) wireless - fixed antenna gain for SXT5ac device;
*) wireless - preserve configured country while using setup-repeater, added "country" argument (CLI only);
*) x86 - Realtek r8169 updated driver;
*) zerotier - added debug logging;
*) zerotier - do not show default settings in export;
*) zerotier - upgraded to version 1.14.0;
To upgrade, click "Check for updates" at /system package in your RouterOS configuration interface, or head to our download page:
http://www.mikrotik.com/download
If you experience version related issues, then please send supout file from your router to
support@mikrotik.com
. File must be generated while a router is not working as suspected or after some problem has appeared on the device
Please keep this forum topic strictly related to this particular RouterOS release.

---
### Author: Unknown
Date: Unknown

Finally! With important and great changes to "wifi" and many other areas. Keep up the great work!

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
Re: v7.17rc [testing] is released!
Post by CGGXANNX » Thu Jan 16, 2025 12:03 pm
Well it may goes out of memory with SMB, but if wifi-qcom-ac really takes a large chunk of RAM, then OOM might also happen if you run a container (that worked fine with wireless), or if you use adlist with huge lists, etc... If they disable and hide SMB, then should they do that with container and adlist too?
Currently you have to explicitly remove wireless and install wifi-qcom-ac. It is assumed that you read the doc before doing that, and from now on, the doc has the warning about the RAM usage. If your router suffers from OOM, your first thought now would be to revert back to wireless.

---
### Author: Unknown
Date: Unknown

I just discovered one bug. On Upgrade the timezone gets unset. It is now UTC instead of Europe/Vienna. "/export" is missing this line which was there in 7.16.2:
Code:
Select all
/system clock set time-zone-name=Europe/Vienna
edit: seems like this line from export is added or removed by the Cloud feature. After a reboot for firmware upgrade I saw the following log entry and suddenly "/system clock set time-zone-name=Europe/Vienna" was there again.
Code:
Select all
2025-01-16 14:44:43 system,critical,info cloud change time Jan/16/2025 14:43:47 => Jan/16/2025 14:44:43
Sry, not a bug.

---
### Author: Unknown
Date: Unknown

"v7 stable"
NOT STABLE.
viewtopic.php?t=198736

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
This is most probably a configuration related issue. I have cap ac with only 128MB system memory running wifi-qcom-ac and it reached quite 4 weeks uptime on 7.16.2 before I upgraded it to 7.17 today. It reported ~28mb of free memory before I upgraded the system.

---
### Author: Unknown
Date: Unknown

> *) bridge - added interface-list support for VLANs;
What does this mean?

---
### Author: Unknown
Date: Unknown

Is possible now to add interface-list as tagged or untagged interface.

---
### Author: Unknown
Date: Unknown

NOT STABLE.
In general, the problem of LOST SIGNAL has not been completely solved, and it is strange that Microtic don't pay due attention to this.
Seems that you have not read previous post about the same.
Stable enough to release.
Any code out there have bugs.  Some more, some less.  There are no perfect software.
Also going from RC to Stable will make more user try the image and more error will be found and fixed.
I do not install a 0 version in production.

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
Re: v7.17rc [testing] is released!
Post by CGGXANNX » Thu Jan 16, 2025 12:03 pm
Well it may goes out of memory with SMB, but if wifi-qcom-ac really takes a large chunk of RAM, then OOM might also happen if you run a container (that worked fine with wireless), or if you use adlist with huge lists, etc... If they disable and hide SMB, then should they do that with container and adlist too?
Currently you have to explicitly remove wireless and install wifi-qcom-ac. It is assumed that you read the doc before doing that, and from now on, the doc has the warning about the RAM usage. If your router suffers from OOM, your first thought now would be to revert back to wireless.
I have same problem with cap-ac (simple AP mode), SUP-160401 .

---
### Author: Unknown
Date: Unknown

NOT STABLE.
...
STABLE != free of bugs
As far as I understand, during beta ( eh 7.18 betaX); Mikrotik "Adds" new code ( fixes for long standing bugs, new features, porting from routeros 6....)
once in RC, they only fix bug in the code added during the betas.
-> if you don't see a a fix for an issue appearing in the changelog of the beta, there is little chance to see in the changelog of the RC.

---
### Author: Unknown
Date: Unknown

Is possible now to add interface-list as tagged or untagged interface.
Oh, that's pretty good.

---
### Author: Unknown
Date: Unknown

Super-stable 7.17 is unable to install on RB450Gx4
Code:
Select all
upgrade failed, free 9 kB of kernel disk space
450Gx4 has 512 MB storage space and only 25% of it is used. What is going on??? Other devices with 16 MB storage updated without problems...
P. S. It seems to be an overlooked problem from rc stage ->
viewtopic.php?p=1119444

---
### Author: Unknown
Date: Unknown

Here my update on the "free-memory" topic for those interested and also managing 16MB devices. Before/after of 2 devices I just upgraded. td;dr: free space decreased.
Code:
Select all
[user@router] > /system/resource/print 
                  version: 7.16.2 (stable)
           free-hdd-space: 556.0KiB
          total-hdd-space: 16.0MiB
               board-name: D53G-5HacD2HnD
                 platform: MikroTik

[user@router] > /system/resource/print        
                  version: 7.17 (stable)         
           free-hdd-space: 272.0KiB           
          total-hdd-space: 16.0MiB       
               board-name: D53G-5HacD2HnD     
                 platform: MikroTik
and
Code:
Select all
[user@cap] > /system/resource/print 
                  version: 7.16.2 (stable)
           free-hdd-space: 760.0KiB
          total-hdd-space: 16.0MiB
               board-name: cAP ac
                 platform: MikroTik

[user@cap] > /system/resource/print       
                  version: 7.17 (stable)                   
           free-hdd-space: 480.0KiB           
          total-hdd-space: 16.0MiB                   
               board-name: cAP ac             
                 platform: MikroTik

---
### Author: Unknown
Date: Unknown

We are speaking about RAM issue, not ROM. ROM has been solved roughly in 7.15, what I remember.
Here my update on the "free-memory" topic for those interested and also managing 16MB devices. Before/after of 2 devices I just upgraded. td;dr: free space decreased.
Code:
Select all
[user@router] > /system/resource/print 
                  version: 7.16.2 (stable)
           free-hdd-space: 556.0KiB
          total-hdd-space: 16.0MiB
               board-name: D53G-5HacD2HnD
                 platform: MikroTik

[user@router] > /system/resource/print        
                  version: 7.17 (stable)         
           free-hdd-space: 272.0KiB           
          total-hdd-space: 16.0MiB       
               board-name: D53G-5HacD2HnD     
                 platform: MikroTik
and
Code:
Select all
[user@cap] > /system/resource/print 
                  version: 7.16.2 (stable)
           free-hdd-space: 760.0KiB
          total-hdd-space: 16.0MiB
               board-name: cAP ac
                 platform: MikroTik

[user@cap] > /system/resource/print       
                  version: 7.17 (stable)                   
           free-hdd-space: 480.0KiB           
          total-hdd-space: 16.0MiB                   
               board-name: cAP ac             
                 platform: MikroTik

---
### Author: Unknown
Date: Unknown

@
Edpa
1.
*) bridge - added interface-list support for VLANs;
Does this mean we can now list the bridge as an interface list member and this will include all vlans attached to the bridge?
2.
*) bridge - enable faster HW offloading when detect-internet is disabled;
Will faster HW offloading also occur when detect-internet is set to NONE?   ( or only disabled? )

---
### Author: Unknown
Date: Unknown

Well, what kind of traffic you have? IPv4+IPv6? Or only IPv4? What amount of traffic? 100GB/day?
Regarding "configuration issue", what is wrong on this?
Code:
Select all
/interface wifi steering
add disabled=no name=steering1 neighbor-group=dynamic-ABC-6754ca15 rrm=yes wnm=yes
/interface wifi
set [ find default-name=wifi1 ] channel.band=2ghz-n .width=20/40mhz configuration.country=Czech .mode=ap .multicast-enhance=enabled .qos-classifier=\
    priority .ssid=ABC disabled=no mtu=1500 security.authentication-types=wpa2-psk,wpa3-psk .ft=yes .ft-over-ds=yes .ft-preserve-vlanid=no .wps=\
    disable steering=steering1
set [ find default-name=wifi2 ] channel.band=5ghz-ac .frequency=5500 .width=20/40/80mhz configuration.country=Czech .mode=ap .multicast-enhance=enabled \
    .qos-classifier=priority .ssid=ABC disabled=no security.authentication-types=wpa2-psk,wpa3-psk .ft=yes .ft-over-ds=yes .ft-preserve-vlanid=no \
    .wps=disable steering=steering1
Rest is exactly the same for "wireless.apk", which is without any observable memory leak.
"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
This is most probably a configuration related issue. I have cap ac with only 128MB system memory running wifi-qcom-ac and it reached quite 4 weeks uptime on 7.16.2 before I upgraded it to 7.17 today. It reported ~28mb of free memory before I upgraded the system.

---
### Author: Unknown
Date: Unknown

@anav
1. You can use interface-list for "tagged", "untagged" properties under the /interface/bridge/vlan menu.
https://help.mikrotik.com/docs/spaces/R ... rfacelists
2. /interface/detect-internet/set detect-interface-list=none

---
### Author: Unknown
Date: Unknown

@
Edpa
1.
*) bridge - added interface-list support for VLANs;
Does this mean we can now list the bridge as an interface list member and this will include all vlans attached to the bridge?
Screenshot 2025-01-16 172728.png

---
### Author: Unknown
Date: Unknown

Dude client is failing to update as well
Code:
Select all
connecting to upgrade.mikrotik.com
...
connection closed

---
### Author: Unknown
Date: Unknown

indeed, dude client fails to upgrade
Code:
Select all
connecting to upgrade.mikrotik.com
...
connection closed

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
Re: v7.17rc [testing] is released!
Post by CGGXANNX » Thu Jan 16, 2025 12:03 pm
Well it may goes out of memory with SMB, but if wifi-qcom-ac really takes a large chunk of RAM, then OOM might also happen if you run a container (that worked fine with wireless), or if you use adlist with huge lists, etc... If they disable and hide SMB, then should they do that with container and adlist too?
Currently you have to explicitly remove wireless and install wifi-qcom-ac. It is assumed that you read the doc before doing that, and from now on, the doc has the warning about the RAM usage. If your router suffers from OOM, your first thought now would be to revert back to wireless.
I'm surprised they managed to make the propietary QCOM drivers run on a board with 128MB of RAM, back then when I had the ac2 it OOM'd even on OpenWrt running the "small buffers" ath10k driver.

---
### Author: Unknown
Date: Unknown

Have a small bug. On my CCR1009, when I right click Interfaces --> Interface --> any interface --> Detail Mode in winbox3.41 just closed.
https://imgur.com/a/Ompf5pA

---
### Author: Unknown
Date: Unknown

We are speaking about RAM issue, not ROM. ROM has been solved roughly in 7.15, what I remember.
Thank you for clarifying, Sit75. My earlier post wasn’t intended as a direct response to the RAM issue you mentioned. I’ve been monitoring free memory on RouterOS since version 7.13, and my recent observation of approximately 280KB less free space after upgrading was meant as a general heads-up for the community.
Devices with limited free memory - say, around 200KB on 7.16 - could potentially encounter issues when moving to 7.17. Hopefully, this additional context will help others keep an eye on their device disk space during upgrades.

---
### Author: Unknown
Date: Unknown

The Dude upgrade issue acknowledged, we are working on it.

---
### Author: Unknown
Date: Unknown

Does this also fix NPT? It is broken in 7.16. I don't see it changelog

---
### Author: Unknown
Date: Unknown

MikroTik RB450Gx4 --> 7.16.2 --> 7.17 upgrade failed, free 5 kB of kernel disk space mikrotik

---
### Author: Unknown
Date: Unknown

The Dude upgrade issue acknowledged, we are working on it.
Workaround for now is to download 7.17 installer and run it manually. This way update succeeds and client is able to connect to 7.17 Dude server.

---
### Author: Unknown
Date: Unknown

For any1 who upgraded to 7.17 pls check if it is still possible to downgrade to 7.14.3 after? Or it is now marked as not "allowed-versions" or whatever device mode forbids

---
### Author: Unknown
Date: Unknown

For any1 who upgraded to 7.17 pls check if it is still possible to downgrade to 7.14.3 after? Or it is now marked as not "allowed-versions" or whatever device mode forbids
It should be possible to downgrade to 7.14.3 if I read it right:
Code:
Select all
/system/device-mode/print 
     mode: advanced     
     allowed-versions: 7.13+,6.49.8+
     ...

---
### Author: Unknown
Date: Unknown

Upgrade from 7.16.2 to 7.17 fails on a CCR2004-1G-12S+2XS. ~35MB of flash storage and ~3.8GB RAM available currently. Tried the upgrade multiple times.
Edit: tried to do the update on a second CCR2004-1G-12S+2XS which has a different configuration, got the exact same error.
Code:
Select all
upgrade failed, free 25 kB of kernel disk space

---
### Author: Unknown
Date: Unknown

For any1 who upgraded to 7.17 pls check if it is still possible to downgrade to 7.14.3 after? Or it is now marked as not "allowed-versions" or whatever device mode forbids
It should be possible to downgrade to 7.14.3 if I read it right:
Code:
Select all
/system/device-mode/print 
     mode: advanced     
     allowed-versions: 7.13+,6.49.8+
     ...
Thx good man

---
### Author: Unknown
Date: Unknown

Dude CHR installs might lose other disk if configured with multiple disks. Made a ticket to support about this as well.
It is probably wise to wait for 7.17.1

---
### Author: Unknown
Date: Unknown

hi, neighbors is broken for winbox v3.41 with de last update (7.17)
with winbox v4 is working fine

---
### Author: Unknown
Date: Unknown

How do you go about rebranding Webfig?
If you use an old rebranding.dpk it doesn't work. Do I need to regenerate it or do you still have to work on it?
The login page appears customized after loading the branding package but if I enter the credentials while clicking log in it adds /? instead of /webfig after the router address in the address bar and the login fails

---
### Author: Unknown
Date: Unknown

dude client upgrade seems fixed !
tnx Mikrotik

---
### Author: Unknown
Date: Unknown

Skins still don't work on Winbox 4

---
### Author: Unknown
Date: Unknown

"v7 stable"
NOT STABLE.
Remember that "stable" in software releases means: "here you have a version that will remain for a while, we will not release a new version every week or two, so you can install this and won't have to update it immediately".  The stability refers to the number of updates.
It does NOT mean that it will work in a stable way, i.e. will not crash or will not have problems with certain functions.

---
### Author: Unknown
Date: Unknown

Skins still don't work on Winbox 4
This has nothing to do with ROS 7.17, it is a Winbox 4 issue.

---
### Author: Unknown
Date: Unknown

NOT STABLE.
Remember that "stable" in software releases means: "here you have a version that will remain for a while, we will not release a new version every week or two, so you can install this and won't have to update it immediately".  The stability refers to the number of updates.
It does NOT mean that it will work in a stable way, i.e. will not crash or will not have problems with certain functions.
Wow... And how about me that, using semantic versioning as a reference, I was thinking that Stable could mean that the software manufacturer should only release as stable code that is free of any known bugs.
I think I'll review a little more about versioning standards.

---
### Author: Unknown
Date: Unknown

new webfig is nice, too bad there's still no dark mode in itself :D
Branding all broken here: %host% and %version% are showing as is instead of showing actual ip and ROS version...
it's not showing as breaking change on changelog (branding is not webfig itself), is there documentation about these changes?
(and also, documentation about "allow style.css and script.js in branding packages" would be good since it has potential)

---
### Author: Unknown
Date: Unknown

hi, neighbors is broken for winbox v3.41 with de last update (7.17)
with winbox v4 is working fine
It works perfectly for me

---
### Author: Unknown
Date: Unknown

hi, neighbors is broken for winbox v3.41 with de last update (7.17)
with winbox v4 is working fine
It works perfectly for me
It was a strange situation, I restarted the PC and it works again

---
### Author: Unknown
Date: Unknown

I can't upgrade a CCR2004:
Code:
Select all
19:35:52 system,error upgrade failed, free 29 kB of kernel disk space
Code:
Select all
uptime: 2m19s
                  version: 7.16.2 (stable)
               build-time: 2024-11-26 12:09:40
         factory-software: 6.48.1
              free-memory: 3840.5MiB
             total-memory: 4096.0MiB
                      cpu: ARM64
                cpu-count: 4
            cpu-frequency: 1700MHz
                 cpu-load: 0%
           free-hdd-space: 35.7MiB
          total-hdd-space: 64.0MiB
  write-sect-since-reboot: 33
         write-sect-total: 310187
               bad-blocks: 0%
        architecture-name: arm64
               board-name: CCR2004-1G-12S+2XS
                 platform: MikroTik
There aren't any non-system files on the disk, and I tried the upgrade following a clean reboot. I've seen another user complaining about the same issue on different hardware:
viewtopic.php?p=1119074&sid=8afa3d3815d ... 4cc46d0daa

---
### Author: Unknown
Date: Unknown

For me so far, on CCR2004's, it added a new problem.
I have one at my office - one at my home.   I use EOIP (yes, I know I should subnet it, but for now I need it all on the same layer 2) with encryption to link the two locations together.
Version 7.16.2 the best on a 1gb symmetrical connection I could get was 400MB/sec between the two locations.
Version 7.17 made some huge improvements, I'm seeing 700-800MB/sec....
BUT connections are dropping.   Not packet loss - connections get closed.   You'll be winboxed in and poof - you're disconnected to the remote site.
Roll back to 7.16.2 - my speeds are back to what they were - and it's stable again.
Thoughts anyone?

---
### Author: Unknown
Date: Unknown

Wow... And how about me that, using semantic versioning as a reference, I was thinking that Stable could mean that the software manufacturer should only release as stable code that is free of any known bugs.
I think I'll review a little more about versioning standards.
It would be desirable when it was like that, but for software as complex and versatile as RouterOS that simply isn't realistic.
There will always be known bugs, the only criticism on MikroTik with regard to that is that there is no section "known bugs and limitations" in the release notes.  Some other manufacturers do that, but a lot of them do not.  So they are not alone.
Due to the versatility, there are always users that concern particular bugs as a showstopper, while 99% of other users do not use that feature and do not mind that it is released with that bug.
(good example: the "SMB crashes the router when there is not enough free memory".  some have repeatedly claimed that this is a showstopper bug, but I do not care at all because my router is not my fileserver, SMB is always disabled).

---
### Author: Unknown
Date: Unknown

Skins still don't work on Winbox 4
skin does not work at all.
Complete rewrite webfig without finish this important feature... I don't understand....

---
### Author: Unknown
Date: Unknown

Thoughts anyone?
EoIP is a connectionless protocol, there is no "connection that is closing".
However, as with any tunnel protocol, there is the risk of creating a loop where encapsulated traffic is again encapsulated.
Maybe the circumstances have changed due to the version upgrade, like some change in the bridge handling.
Best approach for now: get rid of the EoIP.

---
### Author: Unknown
Date: Unknown

Yeah, need to but re-ip'ing 40 items and making all those changes in home assistant isn't on my top of the to do list.     Wonder if doing layer 2 tunneling a different method would be better.
Seems it's more than just that.    After looking at wireshark captures it looks like the packets just quit getting responses - like you unplugged the link.   Yet other sessions will stay up.   So odd.      Pings will go with no loss.
Have rolled forward and back twice and it's definitely with 7.17.
Thanks!

---
### Author: Unknown
Date: Unknown

Remember that "stable" in software releases means: "here you have a version that will remain for a while, we will not release a new version every week or two, so you can install this and won't have to update it immediately".  The stability refers to the number of updates.
It does NOT mean that it will work in a stable way, i.e. will not crash or will not have problems with certain functions.
Wow... And how about me that, using semantic versioning as a reference, I was thinking that Stable could mean that the software manufacturer should only release as stable code that is free of any known bugs.
I think I'll review a little more about versioning standards.
And why is Microsoft releasing versions for Windows then ?
You believe they are bug free ? Surely you are aware of Patch Tuesday mishaps ?
Stable being bug free ... I wish.

---
### Author: Unknown
Date: Unknown

new webfig is nice, too bad there's still no dark mode in itself :D
Branding all broken here: %host% and %version% are showing as is instead of showing actual ip and ROS version...
it's not showing as breaking change on changelog (branding is not webfig itself), is there documentation about these changes?
(and also, documentation about "allow style.css and script.js in branding packages" would be good since it has potential)
With Beta and RC I reported CSS issues and it got Fixed before Final Realse
All good with my heavily modified Brading Packge

---
### Author: Unknown
Date: Unknown

The new web interface is interesting. Maybe I will get used to it, but just in terms of being easy to read, I think the old interface is "clearly" better. The new one just seems softer and less distinct. I'm sure I will find some benefits to it after using it, but I would certainly like it more if it were as easy to see and read as the old one.

---
### Author: Unknown
Date: Unknown

Yeah the custom font that MikroTik insist on using for WinBox 4 and the new WebFig is not very high quality and completely unoptimized for display on non-hiDPI display at non-huge sizes. Whoever produced that font did not spend proper effort with hinting. It's a blurry mess at smaller size, not properly snapping to pixel boundaries or supporting Clear Type. The system fonts are much better, at least on Windows.
Also, the two woff2 font files must be stored on the router and consume 38KB of valuable flash storage on devices like the hAP ac². Just look at how horrible "memory" and "interface" look with the MT font compared to WinBox 3 (zoomed out screenshot):
WebFig:
webfig-font.png
WinBox 3:
winbox3-font.png
WinBox 4:
winbox4-font.png

---
### Author: Unknown
Date: Unknown

Lot of work on WebUI.
But still no way to easily disable quickset, have an empty user name on login, re-login on page refresh and graphs are still 1998 style instead the webui...

---
### Author: Unknown
Date: Unknown

Both of my devices (RB5009UG+S+ and RBwAPGR-5HacD2HnD) lost same part of configuration, likely related to changes 7.17 introduced around these parts, but this should absolutely never result in such a loss of configuration, especially near neighbor discovery which after upgrade started leaking out of every interface instead of previously configured set).
Code:
Select all
/ip firewall connection tracking
  set enabled=yes tcp-close-wait-timeout=30s tcp-fin-wait-timeout=30s tcp-time-wait-timeout=30s
/ip neighbor discovery-settings
  set discover-interface-list=discovery lldp-mac-phy-config=yes lldp-vlan-info=yes
/ip settings
  set max-neighbor-entries=1024 rp-filter=loose
/ipv6 settings
  set accept-redirects=no max-neighbor-entries=1024
Sadly, I do not have ability to generate support ticket for these as I have noticed this change after second reboot to upgrade RouterBOOT, but leaving it here for others to verify their own configs.
---
Additionally, RBwAPGR-5HacD2HnD is showing non-printable characters for current RouterBOOT version:
WinBox_2025-01-16_22-52-28.png
WinBox_2025-01-16_22-54-25.png

---
### Author: Unknown
Date: Unknown

Having an issue with my Active-Backup interface. Giving a RX looped packet error and crashing the interface. SUP-176645.

---
### Author: Unknown
Date: Unknown

I spent 2h this night going about the shop to switch off all the devices after updating the 'device-mode', I still have 2 other sites to update (they will wait some time so that 7.17 is better tested here). I undestand what it is for, but I cannot imagine those that have lots of devices in the fields as I used to .. good luck.
BTW.. so far so good, all my lab office's devices are on 7.17 and they work as expected.

---
### Author: Unknown
Date: Unknown

Remember that "stable" in software releases means: "here you have a version that will remain for a while, we will not release a new version every week or two, so you can install this and won't have to update it immediately".  The stability refers to the number of updates.
It does NOT mean that it will work in a stable way, i.e. will not crash or will not have problems with certain functions.
Wow... And how about me that, using semantic versioning as a reference, I was thinking that Stable could mean that the software manufacturer should only release as stable code that is free of any known bugs.
I think I'll review a little more about versioning standards.
Stable in mikrotik standards.
I never think that the existence of errors is unacceptable. The problem is that when there are errors, you spend development resources on ROSE SMB NAS DNS. Is it because these people are not capable of fixing the routeros-core package so they can only develop those features? Why not fire them and hire capable people?
I am a network engineer & Java software engineer from China and also an ordinary user. I have a normal "Stable" cognition no matter what they say.

---
### Author: Unknown
Date: Unknown

Lot of work on WebUI.
But still no way to easily disable quickset, have an empty user name on login, re-login on page refresh and graphs are still 1998 style instead the webui...
Well, the situation with the new UI is still not perfect, though some improvements have been made.
Webfig - only inline comments? This is a complete usability show stopper for me.
Winbox 4 - login screen - grouping is not about adding just a column, but provide real grouping like with Winbox 3. Difficult to navigate, so I need to resort to filters.
Winbox 4 - column separators - looks weird imo.
Winbox 4 - font colors - improved a bit. Darker comments than items themselves? Drags an attention a bit, but hopefully groving on me. All could be solved, if we would be allowed to choose the colors ourselves.
Winbox 4 - table row padding setting - perfect.
Winbox 4 - table row alternate color might be handy. Conditional coloring would be cool, but that's probably a little too much :-)

---
### Author: Unknown
Date: Unknown

How do I stop my cap from auto updating when I update my router?

---
### Author: Unknown
Date: Unknown

*) ovpn-client - added tls-crypt, tls-crypt-v2 support;
Hello
Has anyone checked this? Especially on NordVPN or ProtonVPN services
The problem is that I don't know how to add the tls key, of course I used the import option but the problem still persists and it gives the tls error

---
### Author: Unknown
Date: Unknown

*) wifi - added access-list stats (CLI only);
Can we get an example for this ?    I could not figure it out myself and there is no documentation for it.

---
### Author: Unknown
Date: Unknown

CHR on KVM/QEMU: VirtIO disk after upgrade not detected.
Solution: remove disk from virtual and re-add it, now it is in disk list with new name...

---
### Author: Unknown
Date: Unknown

How do I stop my cap from auto updating when I update my router?
/interface/wifi/capsman/upgrade-policy
none - do not perform upgrade
require-same-version - CAPsMAN suggests to upgrade the CAP RouterOS version and, if it fails it will not provision the CAP. (Manual provision is still possible)
suggest-same-version - CAPsMAN suggests to upgrade the CAP RouterOS version and if it fails it will still be provisioned
I would expect it to be set on require-same-version currently? Set it to none to prevent updating.
https://help.mikrotik.com/docs/spaces/R ... figuration

---
### Author: Unknown
Date: Unknown

Nowhere in the documentation does it say that the upgrade is done automatically. It doesn't work for me unless I put the packages in the "Packge path" folder.

---
### Author: Unknown
Date: Unknown

For me so far, on CCR2004's, it added a new problem.
I have one at my office - one at my home.   I use EOIP (yes, I know I should subnet it, but for now I need it all on the same layer 2) with encryption to link the two locations together.
Version 7.16.2 the best on a 1gb symmetrical connection I could get was 400MB/sec between the two locations.
Version 7.17 made some huge improvements, I'm seeing 700-800MB/sec....
BUT connections are dropping.   Not packet loss - connections get closed.   You'll be winboxed in and poof - you're disconnected to the remote site.
Roll back to 7.16.2 - my speeds are back to what they were - and it's stable again.
Thoughts anyone?
Install latest testing version and send us supout rif file from the devices.

---
### Author: Unknown
Date: Unknown

*) ovpn-client - added tls-crypt, tls-crypt-v2 support;
Hello
Has anyone checked this? Especially on NordVPN or ProtonVPN services
The problem is that I don't know how to add the tls key, of course I used the import option but the problem still persists and it gives the tls error
Please refer to instructions.
https://help.mikrotik.com/docs/spaces/R ... ls-cryptv2

---
### Author: Unknown
Date: Unknown

Nowhere in the documentation does it say that the upgrade is done automatically. It doesn't work for me unless I put the packages in the "Packge path" folder.
Here the text can be improved, as "suggests" seems to either "tried" or "performed".
In regards to the packages:
Folder location for the RouterOS packages. For example, use "/upgrade" to specify the upgrade folder from the files section. If an empty string is set, CAPsMAN can use built-in RouterOS packages, note that in this case only CAPs with the same architecture as CAPsMAN will be upgraded.
MikroTik is always open to improvement, feel free to contact them to make an improvement in the documentation. Thanks for noticing (though it is not 7.17 related).

---
### Author: Unknown
Date: Unknown

Code:
Select all
/interface/wifi/radio/reg-info country="Superchannel" number=0          
ranges: 2402-2482/60dBm/40MHz 
5170-5895/60dBm/160MHz
Trying Superchannel on HAP AX3, isnt it supposed to run all channels at max power? But when i set 5180 it runs at (tx-power: 17), i see briefly 60tx and drops to 17, i did try to set manually 28 it doesn't help.
On the other hand if i set United States it does run on max power (tx-power: 28)
Also not related to superchannel but AP keeps dropping power after some time, interface gets enabled, runs at tx-power: 24, all great, but after few hours it drops to tx-power: 17, there is no channel change or anything in logs it just silently drops power, anyone else notice this?

---
### Author: Unknown
Date: Unknown

RB912UAG-2HPnD
Can not change silent-bool option after upgrading to 7.17
Code:
Select all
[admin@MT] /system/routerboard/settings> set silent-boot=yes 
failure: not allowed by device-mode

---
### Author: Unknown
Date: Unknown

RB912UAG-2HPnD
Can not change silent-bool option after upgrading to 7.17
Code:
Select all
[admin@MT] /system/routerboard/settings> set silent-boot=yes 
failure: not allowed by device-mode
system/device-mode/update routerboard=yes

---
### Author: Unknown
Date: Unknown

That was fast!. Indeed. Didn't notice it was changes after upgrade :/

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
Re: v7.17rc [testing] is released!
Post by CGGXANNX » Thu Jan 16, 2025 12:03 pm
Well it may goes out of memory with SMB, but if wifi-qcom-ac really takes a large chunk of RAM, then OOM might also happen if you run a container (that worked fine with wireless), or if you use adlist with huge lists, etc... If they disable and hide SMB, then should they do that with container and adlist too?
Currently you have to explicitly remove wireless and install wifi-qcom-ac. It is assumed that you read the doc before doing that, and from now on, the doc has the warning about the RAM usage. If your router suffers from OOM, your first thought now would be to revert back to wireless.
We are working towards optimizing wireless-qcom-ac as we try to optimize other packages to be less resource heavy, but it is still a work in progress. As of this moment, wifi-qcom-ac is known and expected to take up more resources (including RAM) than legacy wireless drivers.

---
### Author: Unknown
Date: Unknown

HZsolt
,
osc86
,
ormandj
,
nmt1900
Please send supout.rif file from your device to
support@mikrotik.com

---
### Author: Unknown
Date: Unknown

Code:
Select all
/interface/wifi/radio/reg-info country="Superchannel" number=0          
ranges: 2402-2482/60dBm/40MHz 
5170-5895/60dBm/160MHz
Trying Superchannel on HAP AX3, isnt it supposed to run all channels at max power? But when i set 5180 it runs at (tx-power: 17), i see briefly 60tx and drops to 17, i did try to set manually 28 it doesn't help.
On the other hand if i set United States it does run on max power (tx-power: 28)
There is no superchannel in the new wifi-qcom(-ac) drivers, also there is no no_country_set. (BTW, superchannel was a mode, no_country_set was regulatory domain, so you're doing wrong things in the first place.)
The router is probably kicking you back to a default of Latvia, which is at 17.
And yes, I'm also running my wifi as "United States" because of high TX power, despite being in the EU. Isn't that great? :) But the only reason I have that is because I can't remember which South American country is better :D Was it Panama?

---
### Author: Unknown
Date: Unknown

Bigger isn't always better...necessity of higher TX Power is an indication that you don't have enough accesspoints.

---
### Author: Unknown
Date: Unknown

Code:
Select all
/interface/wifi/radio/reg-info country="Superchannel" number=0          
ranges: 2402-2482/60dBm/40MHz 
5170-5895/60dBm/160MHz
Trying Superchannel on HAP AX3, isnt it supposed to run all channels at max power? But when i set 5180 it runs at (tx-power: 17), i see briefly 60tx and drops to 17, i did try to set manually 28 it doesn't help.
On the other hand if i set United States it does run on max power (tx-power: 28)
There is no superchannel in the new wifi-qcom(-ac) drivers, also there is no no_country_set. (BTW, superchannel was a mode, no_country_set was regulatory domain, so you're doing wrong things in the first place.)
The router is probably kicking you back to a default of Latvia, which is at 17.
And yes, I'm also running my wifi as "United States" because of high TX power, despite being in the EU. Isn't that great? :) But the only reason I have that is because I can't remember which South American country is better :D Was it Panama?
What are you even talking about, its literary in changelog of 7.17 update:
) wifi-qcom - added Superchannel country profile;
And it does work for higher channels i just tried like 5500 and 5600 it runs max power and skips DFS check, just not for lower ones for some reason so it seams as a bug..

---
### Author: Unknown
Date: Unknown

Why disable firewall rules that are part of VRFs? We use VRFs extensively on every CPE, to separate management interfaces from client traffic interfaces. All client interfaces are subsequently part of a VRF where we then filter forwarded traffic to prevent traffic from a Guest network towards an address list called local (includes 10.0.0.0/8, 172.16.0.0/12 and 192.168.0.0/16). Similarly for CCTV, we want to drop all traffic unless from DVRs or NVRs.
The change recently disables a firewall forward rule when an input interface is part of a VRF. It however works when we create a new interface list add the interface to that list and then adjust the firewall rule to filter the traffic.
NB: The problem here is that we now have to refactor every router's configuration after upgrading. This introduces human error and will invariably result in routers not being upgraded for several weeks/months.
Filtering semantics really shouldn't be affected whether or not an interface is part of a VRF. It worked perfectly before upgrading to 7.17 and continues to work if we use the above work around. Sounds to me that the config control is disabling the rule and not actually putting it in to the config based on a filter when it determines that the referenced interface is part of a VRF.
Reference snip:
router7_firewall_rule_disabled_when_interface_part_of_VRF.png
Reference where others are doing something similar:
viewtopic.php?t=191016
Documentation reference advising that firewall rules associated with a VRF interfaces will now reference the VRF instead:
https://help.mikrotik.com/docs/spaces/R ... ding+-+VRF
Please don't disable the rules, they should work just fine. This should be optional and possibly recommended for many use cases but not when you have a larger single VRF with various VLANs being members and you want to selectively filter traffic ingressing via one of the VRF VLANs.

---
### Author: Unknown
Date: Unknown

Ah, terribly sorry, the ax3 is wifi-qcom, I thought it was -ac and wasn't added there as per the changelog. I'm still in the -ac phase after upgrading my Audience so I think everything is -ac.
erlinden: If you can tell me how to place an access point in the basement for my washer and dryer that doesn't involve destroying walls and drilling through 0.4m of reinforced concrete, I'm all ears...

---
### Author: Unknown
Date: Unknown

erlinden: If you can tell me how to place an access point in the basement for my washer and dryer that doesn't involve destroying walls and drilling through 0.4m of reinforced concrete, I'm all ears...
Not being erlinden but first thing which comes to mind: powerline.
E,g,:
https://www.devolo.global/products
You don't have to use the wifi variant, you can use the ethernet-only version and use your own AP of choice.
"sender" and "receiver" need to be on the same phase of your electrical installation and presence of solar power installations will reduce throughput drastically if on that same circuit (but I assume for a washer and dryer there is not much bandwidth needed).

---
### Author: Unknown
Date: Unknown

Unable to update RB450GX4. After rebooting the ROS version remains 16.2

---
### Author: Unknown
Date: Unknown

Unable to update RB450GX4. After rebooting the ROS version remains 16.2
What say LOG?

---
### Author: Unknown
Date: Unknown

Smol homenet updated:
Zwischenablage_01-17-2025_02.jpg
Works good so far :)
QUESTIONS:
*) firewall - added support for random external port allocation;
What means this? A bugfix or something we can configure? What is "random" now and what works now what has not worked before?
*) snmp - added wifi fields to MIKROTIK-MIB;
Where can I view the .mib-file? Which OIDs?
*) health - removed board-temperature on RB5009UPr+S+IN device;
WHY?! I used this as OID and it gave good reading!!
You removed it for the
RB5009UPr+S+
(not "IN") too :'(
chart.png

---
### Author: Unknown
Date: Unknown

Not being erlinden but first thing which comes to mind: powerline.
E,g,:
https://www.devolo.global/products
You don't have to use the wifi variant, you can use the ethernet-only version and use your own AP of choice.
"sender" and "receiver" need to be on the same phase of your electrical installation and presence of solar power installations will reduce throughput drastically if on that same circuit (but I assume for a washer and dryer there is not much bandwidth needed).
Ah yes, that's nice, except for the fact that I have 3-phase electricity at home :) With wifi-qcom-ac my appliances are just barely holding on, whereas the old wireless package with superchannel and no_country_set was great, and I really have no desire to spend a crapload of extra money just so my wife can get notifications when the laundry is done...

---
### Author: Unknown
Date: Unknown

Hi
After upgrading, l2tp client is not connecting. In Webfig all ipsec tabs are empty and an /ip/ipsec/export  results on an error.
# 2025-01-17 11:14:14 by RouterOS 7.17
# software id = WZEK-CJNA
#
# model = CCR2004-16G-2S+
# serial number = XXXXXXXXX
#error exporting "/ip/ipsec/policy/group" (timeout)
#error exporting "/ip/ipsec/proposal" (timeout)
#error exporting "/ip/ipsec/mode-config" (timeout)
#error exporting "/ip/ipsec/policy" (timeout)
#error exporting "/ip/ipsec/profile" (timeout)
#error exporting "/ip/ipsec/settings" (timeout)
Any clues?

---
### Author: Unknown
Date: Unknown

Smol homenet updated:
Zwischenablage_01-17-2025_02.jpg
Works good so far :)
QUESTIONS:
*) firewall - added support for random external port allocation;
What means this? A bugfix or something we can configure? What is "random" now and what works now what has not worked before?
*) snmp - added wifi fields to MIKROTIK-MIB;
Where can I view the .mib-file? Which OIDs?
*) health - removed board-temperature on RB5009UPr+S+IN device;
WHY?! I used this as OID and it gave good reading!!
You removed it for the
RB5009UPr+S+
(not "IN") too :'(
chart.png
Due to a chip issue which reports board temperature MikroTik decided to remove this parameter from health.

---
### Author: Unknown
Date: Unknown

Hi
After upgrading, l2tp client is not connecting. In Webfig all ipsec tabs are empty and an /ip/ipsec/export  results on an error.
# 2025-01-17 11:14:14 by RouterOS 7.17
# software id = WZEK-CJNA
#
# model = CCR2004-16G-2S+
# serial number = XXXXXXXXX
#error exporting "/ip/ipsec/policy/group" (timeout)
#error exporting "/ip/ipsec/proposal" (timeout)
#error exporting "/ip/ipsec/mode-config" (timeout)
#error exporting "/ip/ipsec/policy" (timeout)
#error exporting "/ip/ipsec/profile" (timeout)
#error exporting "/ip/ipsec/settings" (timeout)
Any clues?
Please send supout rif file.

---
### Author: Unknown
Date: Unknown

Due to a chip issue which reports board temperature MikroTik decided to remove this parameter from health.
Sad - it gave me good, plausible and reliable reading.
Opened a ticket (SUP-176683), because I can not relate.

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Edit: read next post, this is complex routing issue

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
Re: v7.17rc [testing] is released!
Post by CGGXANNX » Thu Jan 16, 2025 12:03 pm
Well it may goes out of memory with SMB, but if wifi-qcom-ac really takes a large chunk of RAM, then OOM might also happen if you run a container (that worked fine with wireless), or if you use adlist with huge lists, etc... If they disable and hide SMB, then should they do that with container and adlist too?
Currently you have to explicitly remove wireless and install wifi-qcom-ac. It is assumed that you read the doc before doing that, and from now on, the doc has the warning about the RAM usage. If your router suffers from OOM, your first thought now would be to revert back to wireless.
I can´t confirm that there´s a general problem with wifi-qcom-ac.
There are 4 devices running since 50days without any memory leaks or other problems:
hc_438.jpg

---
### Author: Unknown
Date: Unknown

Unable to update RB450GX4. After rebooting the ROS version remains 16.2
What say LOG?
upgrade failed, free 9 kB of kernel disk space
Free Memory: 617.6 MiB               Total Memory:1024.0 MiB
Free HDD Space:  409.2 MiB        Total HDD Size: 512.0 MiB

---
### Author: Unknown
Date: Unknown

What say LOG?
upgrade failed, free 9 kB of kernel disk space
Free Memory: 617.6 MiB               Total Memory:1024.0 MiB
Free HDD Space:  409.2 MiB        Total HDD Size: 512.0 MiB
MikroTik asked to send supout to them for this. I already netinstalled so can’t, but if you can generate a supout and send it to them as the above post requested, I’m sure they will help them.
HZsolt
,
osc86
,
ormandj
,
nmt1900
Please send supout.rif file from your device to
support@mikrotik.com

---
### Author: Unknown
Date: Unknown

But the only reason I have that is because I can't remember which South American country is better :D Was it Panama?
Brazil is better than ETSI most of times: 30dBm vs 20dBm on 2.4GHz, 30dBm vs. 14dBm on 5735-5875 MHz ... but not always: ETSI has 30dBm vs. 24dBm on 5490-5730 MHz.
According to reg-info from wAP ax running 7.17, US is the same as Brazil ... but starting with 2025-01-20 I'll like Brazil better than US (regardless nationality of the first lady to be) ;-)

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Its strange! I using L2TPv2 tunnels, ip,ipv6,mpls over it. Using IGP protocol (RIP or OSPF doesn't matter) to distribute Loopback addresses. MPLS LDP is active on it and using BGP to exchange VPNvX routes. On IPv4 BGP peers I echange VPNv4 routes, on IPv6 BGP peers I exchange VPNv6 routes.
Here comes the strange part. Until only IPv4 BGP peer is active nothing bad happens. When IPv6 BGP peer is comes up or it gets update(?) then it messing up the IPv4 routing table. For example it deleting the DHCP default route so L2TP tunnel goes down.

---
### Author: Unknown
Date: Unknown

Due to a chip issue which reports board temperature MikroTik decided to remove this parameter from health.
The questions was "WHY?" What is the chip doing to cause this decision?

---
### Author: Unknown
Date: Unknown

What say LOG?
upgrade failed, free 9 kB of kernel disk space
Free Memory: 617.6 MiB               Total Memory:1024.0 MiB
Free HDD Space:  409.2 MiB        Total HDD Size: 512.0 MiB
First they have to figure out what does this message actually mean...

---
### Author: Unknown
Date: Unknown

Due to a chip issue which reports board temperature MikroTik decided to remove this parameter from health.
The questions was "WHY?" What is the chip doing to cause this decision?
Sometimes the reported board temperature is ridiculously high, I have seen that in one of our devices (while others are OK).

---
### Author: Unknown
Date: Unknown

[*]*) ppp - add routes in matching VRF;
Still not all routes added to the correct VRF for PPP interfaces added to an interface list (through PPP profile) and interface list added to VRF.
I'll eat a broom if this bug ever gets fixed.

---
### Author: Unknown
Date: Unknown

I've sent supout files from two devices to support regarding the 'upgrade failed, free XX kB of kernel disk space' error.

---
### Author: Unknown
Date: Unknown

upgrade failed, free 9 kB of kernel disk space
First they have to figure out what does this message actually mean...
Maybe on some devices there is a separate partition for /boot ?
That used to be required/customary on some Linux filesystems or disk devices, to guarantee that the boot code was always within some area supported by the bootloader.
When for some reason the previous kernel version is not removed after upgrade, a next upgrade may be impossible.
(I know that issue from a server which was installed with a previous Debian version that by default created a "small" boot partition in certain circumstances)

---
### Author: Unknown
Date: Unknown

IKEv2 tunnels fail to establish after upgrading to 7.17 (between 7.17<->7.17 and 7.17<->7.16.2). However, 7.17 does establish IKEv2 with Huawei AR (same settings).
Rolling back to 7.16.2 does fix the issue.
Auth method is PSK, 7.17 peer sends "Delete" right after successful IKE_AUTH. Tested on both live RBs and GNS3 lab.
Am I the only one with this issue?

---
### Author: Unknown
Date: Unknown

upgrade failed, free 9 kB of kernel disk space
First they have to figure out what does this message actually mean...
Maybe on some devices there is a separate partition for /boot ?
That used to be required/customary on some Linux filesystems or disk devices, to guarantee that the boot code was always within some area supported by the bootloader.
When for some reason the previous kernel version is not removed after upgrade, a next upgrade may be impossible.
(I know that issue from a server which was installed with a previous Debian version that by default created a "small" boot partition in certain circumstances)
On server-space it sounds quite logical, but here we have situation where some of same models succeed and some fail - while using same installation packages and sharing same architecture. It is hard to believe this has anything to do with userspace.
P. S. Even units with same hardware behave differently - hap ac2 with its' 16 MB storage succeeds but RB450Gx4 with 512 MB storage fails while both have essentially same SoC

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Confirm, I have the same problem on RB5009. I’ve implemented a workaround script to trigger DHCP release once the obtained default route gets missing.

---
### Author: Unknown
Date: Unknown

I can confirm this - happened on my hEX Refresh too. Triggered a dhcp release and it went back to normal.

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Confirm, I have the same problem on RB5009. I’ve implemented a workaround script to trigger DHCP release once the obtained default route gets missing.
It seems, it reinitializes all the IGPs after 5sec:
Code:
Select all
2025-01-17 13:23:21 route,bgp,info JPoP_MTik1-IPv6-1 {l_addr: fc00::10:43:0:126, r_addr: fc00::10:7:255:255} Established
 2025-01-17 13:23:26 route,rip,info instance { 0 IP } created
 2025-01-17 13:23:26 route,rip,info instance { 0 IP6 } created
 2025-01-17 13:23:27 route,rip,info instance { 0 IP } interface { L2TP1 } created
 2025-01-17 13:23:27 route,rip,info instance { 0 IP6 } interface { L2TP1 } created
 2025-01-17 13:23:29 route,rip,info instance { 0 IP6 } interface { L2TP1 } neighbor fe80::eb47:9598:f0:28%*8 created
 2025-01-17 13:23:32 route,ospf,info instance { version: 3 router-id: 10.43.0.126 } created
 2025-01-17 13:23:32 route,ospf,info OSPFv3 { version: 3 router-id: 10.43.0.126 } area { 0.0.0.0 } created
 2025-01-17 13:23:32 route,ospf,info instance { version: 2 router-id: 10.43.0.126 } created
 2025-01-17 13:23:32 route,ospf,info OSPFv2 { version: 2 router-id: 10.43.0.126 } area { 0.0.0.0 } created
This is totally platform independent, experiencing on CHR too. If I add a static default then where forwarding works, where it doesn't:
Code:
Select all
$ ping 10.43.0.126
PING 10.43.0.126 (10.43.0.126) 56(84) bytes of data.
64 bytes from 10.43.0.126: icmp_seq=11 ttl=60 time=10.5 ms
64 bytes from 10.43.0.126: icmp_seq=12 ttl=60 time=12.1 ms
64 bytes from 10.43.0.126: icmp_seq=13 ttl=60 time=10.6 ms
64 bytes from 10.43.0.126: icmp_seq=14 ttl=60 time=12.0 ms
64 bytes from 10.43.0.126: icmp_seq=15 ttl=60 time=10.3 ms
64 bytes from 10.43.0.126: icmp_seq=16 ttl=60 time=10.3 ms
64 bytes from 10.43.0.126: icmp_seq=17 ttl=60 time=12.1 ms
64 bytes from 10.43.0.126: icmp_seq=18 ttl=60 time=10.1 ms
64 bytes from 10.43.0.126: icmp_seq=19 ttl=60 time=9.82 ms
64 bytes from 10.43.0.126: icmp_seq=20 ttl=60 time=12.5 ms
64 bytes from 10.43.0.126: icmp_seq=21 ttl=60 time=15.8 ms
64 bytes from 10.43.0.126: icmp_seq=22 ttl=60 time=10.4 ms
64 bytes from 10.43.0.126: icmp_seq=23 ttl=60 time=10.2 ms
64 bytes from 10.43.0.126: icmp_seq=24 ttl=60 time=10.2 ms
64 bytes from 10.43.0.126: icmp_seq=25 ttl=60 time=11.6 ms
64 bytes from 10.43.0.126: icmp_seq=26 ttl=60 time=10.2 ms

64 bytes from 10.43.0.126: icmp_seq=75 ttl=60 time=8.75 ms
64 bytes from 10.43.0.126: icmp_seq=76 ttl=60 time=11.5 ms
64 bytes from 10.43.0.126: icmp_seq=77 ttl=60 time=10.0 ms
64 bytes from 10.43.0.126: icmp_seq=78 ttl=60 time=11.7 ms
64 bytes from 10.43.0.126: icmp_seq=79 ttl=60 time=10.8 ms
64 bytes from 10.43.0.126: icmp_seq=80 ttl=60 time=10.6 ms
64 bytes from 10.43.0.126: icmp_seq=81 ttl=60 time=10.8 ms
64 bytes from 10.43.0.126: icmp_seq=82 ttl=60 time=11.8 ms
64 bytes from 10.43.0.126: icmp_seq=83 ttl=60 time=12.2 ms
64 bytes from 10.43.0.126: icmp_seq=84 ttl=60 time=10.1 ms
64 bytes from 10.43.0.126: icmp_seq=85 ttl=60 time=10.5 ms
64 bytes from 10.43.0.126: icmp_seq=86 ttl=60 time=10.2 ms

^C
--- 10.43.0.126 ping statistics ---
201 packets transmitted, 28 received, 86.0696% packet loss, time 202355ms
rtt min/avg/max/mdev = 8.746/10.988/15.813/1.273 ms

---
### Author: Unknown
Date: Unknown

What is this field (Netwatch)?
Screenshot 2025-01-17 173006.jpg
Screenshot 2025-01-17 173021.jpg

---
### Author: Unknown
Date: Unknown

After updating from 7.16.2 to 7.17 yesterday the 5ghz wifi has stopped working.
I have a hAP ax^3 (C53UiG+5HPaxD2HPaxD). The wifi1 interface has all of the configurations that it previously had, but is offline.
Both wifi interfaces are members of Bridge1, Bridge ports show wifi2 (2ghz) is up and running and it transmitting its SSID, whereas wifi1 shows it is not up and is not broadcasting its SSID.
I've looked at the config pre-update and post-update and it has not changed.
I manually uploaded the wifi-qcom package hoping it was just corrupt, that didn't help. I uninstalled the wifi-qcom package and then reinstalled it, no luck.
Any ideas?
Thanks,
Glenn

---
### Author: Unknown
Date: Unknown

Hi,
Arggg it seems like there are too many bugs in this version ...

---
### Author: Unknown
Date: Unknown

While usual stable release may sometimes be beta-level quality, this endless polishing of device-mode produced a release of alpha-level quality if not even worse...

---
### Author: Unknown
Date: Unknown

It might be possible, it is related to some scenarios only. For example: majority of IPv6 traffic, heavy load, traffic handovers between 2,4 and 5 GHz bands, fast BSS transition according IEEE 802.11r etc. etc. If I would know, it would be excellent, but I don't know root cause. Reality is that in my quite simple case and simple config always ending with not only Linux OOPS, but even kernel panic crash and restart with autosupout.rif generated.
All autosupout.rif had been provided to Mikrotik. And result was - nothing, it is fine, old HW, use "wireless.apk". On the other hand "wirelles.apk" works fine. But in this case is big question, why Qualcomm native drivers on Qualcomm HW work so badly in specific cases? And it seems I am not alone. Majority of my connected devices are Apple products and there were more complains from other users about the usage, traffic fluctuation, sudden disconnections and reconnections etc.
I can´t confirm that there´s a general problem with wifi-qcom-ac.
There are 4 devices running since 50days without any memory leaks or other problems:
hc_438.jpg

---
### Author: Unknown
Date: Unknown

Thank you Deniss for your effort. I wanted not to be rude, but closing the tickets with kernel crashes without any solution makes me little bit angry. And not only here, in my job (mobile telco industry) too. :-)) Resources are in my case fine, I have 256MB RAM, not only 128MB. I am willing to test it, if you want.
We are working towards optimizing wireless-qcom-ac as we try to optimize other packages to be less resource heavy, but it is still a work in progress. As of this moment, wifi-qcom-ac is known and expected to take up more resources (including RAM) than legacy wireless drivers.

---
### Author: Unknown
Date: Unknown

I upgraded to 7.17 on my hAP ax2 and realized that the bridge ports are not shown as "hardware offloaded" anymore. This was always the case on previous versions. Bug?
P.S: Setting "detect interface list" (Detect Internet) to "none" doesn't fix the issue.

---
### Author: Unknown
Date: Unknown

IKEv2 tunnels fail to establish after upgrading to 7.17 (between 7.17<->7.17 and 7.17<->7.16.2). However, 7.17 does establish IKEv2 with Huawei AR (same settings).
Rolling back to 7.16.2 does fix the issue.
Auth method is PSK, 7.17 peer sends "Delete" right after successful IKE_AUTH. Tested on both live RBs and GNS3 lab.
Am I the only one with this issue?
Using Mikrotik as spoke (IKEv2 + PSK) to a Cisco Router and it still works fine after upgrading to 7.17.

---
### Author: Unknown
Date: Unknown

Arggg it seems like there are too many bugs in this version ...
Yeah and some random guy here dreamed *THIS* will be a long-term, because it took so long... LOL
This is a typical MT point-zero release, 3 steps forward and 5 back... The long-term is as far away as with the v7.0 release.

---
### Author: Unknown
Date: Unknown

The issue with WiFi password being shown upon entering HTTPS login screen (even though "Hidden/Hide" is ticked) is still there.

---
### Author: Unknown
Date: Unknown

Am going to wait it out, would not be surprised if 7.17.1 or .2 release come out shortly to fix up minor issues.

---
### Author: Unknown
Date: Unknown

Try to add wifi1 (5 GHz) on bridge manually. It might help.
After updating from 7.16.2 to 7.17 yesterday the 5ghz wifi has stopped working.
Both wifi interfaces are members of Bridge1, Bridge ports show wifi2 (2ghz) is up and running and it transmitting its SSID, whereas wifi1 shows it is not up and is not broadcasting its SSID.

---
### Author: Unknown
Date: Unknown

It continues to be "Offline".
I reset the wifi1 interface and re-configured also, still nothing.
Try to add wifi1 (5 GHz) on bridge manually. It might help.
After updating from 7.16.2 to 7.17 yesterday the 5ghz wifi has stopped working.
Both wifi interfaces are members of Bridge1, Bridge ports show wifi2 (2ghz) is up and running and it transmitting its SSID, whereas wifi1 shows it is not up and is not broadcasting its SSID.

---
### Author: Unknown
Date: Unknown

Arggg it seems like there are too many bugs in this version ...
Yeah and some random guy here dreamed *THIS* will be a long-term, because it took so long... LOL
This is a typical MT point-zero release, 3 steps forward and 5 back... The long-term is as far away as with the v7.0 release.
This is because many people wait for the final release to pull the trigger: "omg!!!!! it broke my xyz". instead of evaluating the testing releases ao Mikrotik can fix release specific issues before final version.

---
### Author: Unknown
Date: Unknown

There is no superchannel in the new wifi-qcom(-ac) drivers, also there is no no_country_set. (BTW, superchannel was a mode, no_country_set was regulatory domain, so you're doing wrong things in the first place.)
The router is probably kicking you back to a default of Latvia, which is at 17.
And yes, I'm also running my wifi as "United States" because of high TX power, despite being in the EU. Isn't that great? :) But the only reason I have that is because I can't remember which South American country is better :D Was it Panama?
What are you even talking about, its literary in changelog of 7.17 update:
) wifi-qcom - added Superchannel country profile;
And it does work for higher channels i just tried like 5500 and 5600 it runs max power and skips DFS check, just not for lower ones for some reason so it seams as a bug..
Superchannel is working great on my hAP ax3, no DFS and max TX power allowed by the hardware just had to limit the frequency to 5180-5805 and 2412-2462. Otherwise it may pick a channel out of the usable spectrum for most WiFi clients.

---
### Author: Unknown
Date: Unknown

I upgraded to 7.17 on my hAP ax2 and realized that the bridge ports are not shown as "hardware offloaded" anymore. This was always the case on previous versions. Bug?
I don't think that the hAP ax²/ax³ have ever had hardware offload support for the bridge. It's stated in the doc since the beginning:
https://help.mikrotik.com/docs/spaces/R ... Offloading
Currently, HW offloaded bridge support for the IPQ-PPE switch chip is still a work in progress. We recommend using, the default, non-HW offloaded bridge (enabled RSTP).

---
### Author: Unknown
Date: Unknown

Yeah and some random guy here dreamed *THIS* will be a long-term, because it took so long... LOL
This is a typical MT point-zero release, 3 steps forward and 5 back... The long-term is as far away as with the v7.0 release.
This is because many people wait for the final release to pull the trigger: "omg!!!!! it broke my xyz". instead of evaluating the testing releases ao Mikrotik can fix release specific issues before final version.
@infabo, I know this is well intended.
But as a practical matter, I can't afford to duplicate my network.
MT is slowly killing themselves by dumping testing on the user base.
This is a treadmill where I can't risk upgrading until a 7.xx.2+ version.
Over time fewer and fewer small users will ever touch a 7.xx.0 version.
IMO reliable networking is critical substantially over and above features.
Releasing new features while breaking old ones is beyond a cardinal sin.
Every feature should have an automated test in-place to catch regressions.

---
### Author: Unknown
Date: Unknown

do we have any update on [SUP-134566]: BGP-VRF V7?
when that feature will be implemented.
It works perfectly fine on v6

---
### Author: Unknown
Date: Unknown

Yeah and some random guy here dreamed *THIS* will be a long-term, because it took so long... LOL
This is a typical MT point-zero release, 3 steps forward and 5 back... The long-term is as far away as with the v7.0 release.
This is because many people wait for the final release to pull the trigger: "omg!!!!! it broke my xyz". instead of evaluating the testing releases ao Mikrotik can fix release specific issues before final version.
I respect that you want to be a MikroTik beta tester, but in a network with real network administrators and managers and hundreds of users to explain to if a software update goes wrong, this is something not everyone can afford.

---
### Author: Unknown
Date: Unknown

"Wireless" is fine with 7.17, but "wifi-qcom-ac" is crap, unfortunately. I have had long time open memory leak ticket SUP-147911 for hAP ac^2. This ticket has been closed without solution - but it is bullet proof the leak is related to "wifi-qcom-ac", because "wireless" is fine and stable. There is no any willingness on Mikrotik side to do any investigation, only short message - it is old HW. But this old HW IPQ-4019 with exact same amount of RAM memory (256MB) and ROM memory (16MB) is used in Chateau 5G R16. There was visible decrease of RAM free memory 10MB/day starting with 150MB to OOP after roughly 14-21 days - kernel panic memory.
This is most probably a configuration related issue. I have cap ac with only 128MB system memory running wifi-qcom-ac and it reached quite 4 weeks uptime on 7.16.2 before I upgraded it to 7.17 today. It reported ~28mb of free memory before I upgraded the system.
same for me.
running 2 hAP ac2 (one with the 256MB and one with the 128MB flash storage)
both running without any issues what so ever on wifi-qcom-ac for weeks under 7.16

---
### Author: Unknown
Date: Unknown

do we have any update on [SUP-134566]: BGP-VRF V7?
when that feature will be implemented.
It works perfectly fine on v6
what is the problem here?
cannot find SUP-134566 when i search for it here

---
### Author: Unknown
Date: Unknown

This is because many people wait for the final release to pull the trigger: "omg!!!!! it broke my xyz". instead of evaluating the testing releases ao Mikrotik can fix release specific issues before final version.
I respect that you want to be a MikroTik beta tester, but in a network with real network administrators and managers and hundreds of users to explain to if a software update goes wrong, this is something not everyone can afford.
I believe there’s been a misunderstanding. I’m not looking to be a beta tester, as I use RouterOS in a private capacity and don’t have the inclination to take on that additional work.
However, in a professional environment with dedicated network administrators, as you mentioned, it’s standard practice to have a lab setup for testing and evaluating configurations before rolling out updates to a production network with hundreds of users. It’s worth considering.

---
### Author: Unknown
Date: Unknown

do we have any update on [SUP-134566]: BGP-VRF V7?
when that feature will be implemented.
It works perfectly fine on v6
what is the problem here?
cannot find SUP-134566 when i search for it here

---
### Author: Unknown
Date: Unknown

After upgrading my RB3011UiAS (arm) from v7.16.2 to v7.17, I had problems with CAPsMAN allowing devices to connect.  Some devices that were connected before the upgrade were still able to connect.  However, others were not able to connect and received the message "mikrotik received deauth: sending station leaving (3)".  I told the smartphone devices to forget the WiFi network and then tried to reconnect, but it wouldn't work.  I also tried connecting new devices to CAPsMAN, but none of them were able to connect, either.  After working on it for a day, I downgraded back to v7.16.2 and I was able to connect with new devices and devices that were given the message "mikrotik received deauth: sending station leaving (3)".

---
### Author: Unknown
Date: Unknown

You might want to open a new topic, @BobA. There you can supply your config and get some more feedback. As well, you can request for support. Did you also upgrade firmware besides RouterOS?

---
### Author: Unknown
Date: Unknown

If you use Wireguard multipeer, please note changelog:
*) wireguard - do not initiate handshake when peer is configured as responder;
If you do not uncheck "Responder" in Wireguard clients in RouterOS 7.17 you will have a problem.
Wireguard will not work.
The gateway remains inactive and the tunnel with the server will not be established.
PiVi

---
### Author: Unknown
Date: Unknown

for now everything look pretty good, upgrade was smooth and i found issue of my VLAN configuration. With restart routerOS was disabling my bridge port device, I was able to fix it now. Only thing I'm dealing with is the Quick Set option, with old winbox and system update I was closing the tab with OK button, now when i press it and all is running smooth I lose the connection to the device and it disappear, can not see it even with RoMON tool.

---
### Author: Unknown
Date: Unknown

I respect that you want to be a MikroTik beta tester, but in a network with real network administrators and managers and hundreds of users to explain to if a software update goes wrong, this is something not everyone can afford.
I believe there’s been a misunderstanding. I’m not looking to be a beta tester, as I use RouterOS in a private capacity and don’t have the inclination to take on that additional work.
However, in a professional environment with dedicated network administrators, as you mentioned, it’s standard practice to have a lab setup for testing and evaluating configurations before rolling out updates to a production network with hundreds of users. It’s worth considering.
I totally agree with you. But we also know that it is not realistic to think that a 100% functioning test can be performed in a laboratory.

---
### Author: Unknown
Date: Unknown

This
Code:
Select all
*) ppp - add routes in matching VRF;
Doesn't appear to work still:
Code:
Select all
DIvH 194.4.172.12/32    10.86.33.193                0  main                                                                            
  DAd  0.0.0.0/0          10.86.33.193@mobile         1  mobile         10.86.33.193%vlan32
The first route is the /32 auto-generated by l2tp-client. The l2tp-client is configured with a VRF (called mobile) in the connect-to= parameter, so should be created in the mobile VRF not main.

---
### Author: Unknown
Date: Unknown

@spippan
fyi:

---
### Author: Unknown
Date: Unknown

@wuspmikrotik
And yet, it seems that MikroTik is expected to know every possible scenario and real-world setup and perform functional tests to ensure that absolutely no one experiences any problems in their specific environment.

---
### Author: Unknown
Date: Unknown

upgrade failed, free 9 kB of kernel disk space
Free Memory: 617.6 MiB               Total Memory:1024.0 MiB
Free HDD Space:  409.2 MiB        Total HDD Size: 512.0 MiB
I had the same problem on my CCR2004, make sure you don't have any features in use that will get disabled by the new device-mode settings. In my case, i had the device partitioned. After removing the second partition the update went flawlessly.
A better error message might certainly help here (;
best

---
### Author: Unknown
Date: Unknown

I upgraded to 7.17 on my hAP ax2 and realized that the bridge ports are not shown as "hardware offloaded" anymore. This was always the case on previous versions. Bug?
I don't think that the hAP ax²/ax³ have ever had hardware offload support for the bridge. It's stated in the doc since the beginning:
https://help.mikrotik.com/docs/spaces/R ... Offloading
Currently, HW offloaded bridge support for the IPQ-PPE switch chip is still a work in progress. We recommend using, the default, non-HW offloaded bridge (enabled RSTP).
Sorry, my bad. I have also other devices like hAP ac2, maybe I'm confusing those 2. I'll upgrade the ac2 to see if hw-offload works.
Thanks for noticing this!

---
### Author: Unknown
Date: Unknown

I had the same problem on my CCR2004, make sure you don't have any features in use that will get disabled by the new device-mode settings. In my case, i had the device partitioned. After removing the second partition the update went flawlessly.
What takes away the possibility to easy switch back to the previous version in case you run into issues with 7.17.
Make sure to take a backup before the update and in case of pole mounted devices have a ladder ready.

---
### Author: Unknown
Date: Unknown

I believe there’s been a misunderstanding. I’m not looking to be a beta tester, as I use RouterOS in a private capacity and don’t have the inclination to take on that additional work.
Good to know we are commonly situated.
However, in a professional environment with dedicated network administrators, as you mentioned, it’s standard practice to have a lab setup for testing and evaluating configurations before rolling out updates to a production network with hundreds of users. It’s worth considering.
Small and medium sized business can't afford this either and the enterprise population is numerically small.

---
### Author: Unknown
Date: Unknown

I don't think that the hAP ax²/ax³ have ever had hardware offload support for the bridge. It's stated in the doc since the beginning:
https://help.mikrotik.com/docs/spaces/R ... Offloading
My hAP ax2 on v7.16.2 shows bridge ports are hardware-offloaded:
It is buggy though, plugging in a 100Mbps ethernet device on any of the ports reduces the max switch capacity to 100Mbps.

---
### Author: Unknown
Date: Unknown

upgrade failed, free 9 kB of kernel disk space
Free Memory: 617.6 MiB               Total Memory:1024.0 MiB
Free HDD Space:  409.2 MiB        Total HDD Size: 512.0 MiB
I had the same problem on my CCR2004, make sure you don't have any features in use that will get disabled by the new device-mode settings. In my case, i had the device partitioned. After removing the second partition the update went flawlessly.
A better error message might certainly help here (;
best
This does not solve my problem with RB450Gx4. After that that madness with polishing device-mode I start to feel somewhat reluctant to be unpaid outsourced beta tester of "stable" releases.

---
### Author: Unknown
Date: Unknown

@wuspmikrotik
And yet, it seems that MikroTik is expected to know every possible scenario and real-world setup and perform functional tests to ensure that absolutely no one experiences any problems in their specific environment.
MT should be using enterprise software development practices which includes for each function module, in parallel they write a unit test that covers every code path in the function module. The unit tests run late in the build cycle to catch regressions without manual testing which is where the payback occurs to offset the unit test development time. Without unit tests and as features grow the manual regression testing coverage becomes sparse (what we see today) and eventually the user base collapse death spiral occurs.
Don't excuse MT; pressure them to fix their testing process to keep their user base and business alive.
They do pretty good but testing is their weak point and it's a
fixable issue
.
You know if MT (A) goes open source with a closed proprietary license, and (B) adds unit testing frame work to the build, then the user community could contribute to unit testing. IMO reliability and manual testing time saving leverage would be tremendous compared to the hell hole we are stuck in today.

---
### Author: Unknown
Date: Unknown

I’m not making excuses for Mikrotik, and I know there are better ways to approach some of these problems in software development. But the issues being discussed here—like kernel image space and hardware offloading, and similar—aren’t something unit tests can handle. These are integration issues that involve hardware and need automated integration tests, not unit tests.
Unit tests are small, focused, and usually test pure functions. When external dependencies, like hardware, are involved, it’s no longer a unit test. For example, wifi-qcom client disconnection issues can’t be tested this way. It’d be nice if we could just add tests and make all interoperability issues disappear, but it’s not that simple. Something like BGP protocol handling or DNS server implementation might work well for unit testing, though.
Let’s get back on topic. Share your experience with version 7.17, and report any issues to Mikrotik support with a **supout.rif**.

---
### Author: Unknown
Date: Unknown

I must agree @infabo.
I use 17 MT devices in my home and I participate in nearly every beta or RC to find problems and give MT feedback.
As I use automatic backups any problem is fixed fast ;-)
But I´m also an IT professional and a new ROS should be handled as all software updates, it should be testet in your environment before you roll it out in the productive environment.
In that case MT is nothing special, it´s the same story for ALL vendors (Microsoft, Red Hat, F5, aso.)
I guess you would never make an inplace upgrade of a MS Server 2019 to 2025 without testing, right?

---
### Author: Unknown
Date: Unknown

I don't think that the hAP ax²/ax³ have ever had hardware offload support for the bridge. It's stated in the doc since the beginning:
https://help.mikrotik.com/docs/spaces/R ... Offloading
My hAP ax2 on v7.16.2 shows bridge ports are hardware-offloaded:
It is buggy though, plugging in a 100Mbps ethernet device on any of the ports reduces the max switch capacity to 100Mbps.
You probably have protocol-mode=none configured on your bridge. The Wiki page referenced states:
Code:
Select all
Currently, HW offloaded bridge support for the IPQ-PPE switch chip is still a work in progress. We recommend using, the default, non-HW offloaded bridge (enabled RSTP).

---
### Author: Unknown
Date: Unknown

This is most probably a configuration related issue. I have cap ac with only 128MB system memory running wifi-qcom-ac and it reached quite 4 weeks uptime on 7.16.2 before I upgraded it to 7.17 today. It reported ~28mb of free memory before I upgraded the system.
same for me.
running 2 hAP ac2 (one with the 256MB and one with the 128MB flash storage)
both running without any issues what so ever on wifi-qcom-ac for weeks under 7.16
For curiosity, what is your wifi1 and wifi2 configuration? In my case quite basic one SSID with fast roaming on between 2,4 GHz and 5GHz bands. Allowed WPA2 and WPA3. No any interAP roaming. Nothing special. Mixed IPv4 and IPv6 traffic with majority of IPv6.
Code:
Select all
/interface wifi steering
add disabled=no name=steering1 neighbor-group=dynamic-ABC-6754ca15 rrm=yes wnm=yes
/interface wifi
set [ find default-name=wifi1 ] channel.band=2ghz-n .width=20/40mhz configuration.country=Czech .mode=ap .multicast-enhance=enabled .qos-classifier=\
    priority .ssid=ABC disabled=no mtu=1500 security.authentication-types=wpa2-psk,wpa3-psk .ft=yes .ft-over-ds=yes .ft-preserve-vlanid=no .wps=\
    disable steering=steering1
set [ find default-name=wifi2 ] channel.band=5ghz-ac .frequency=5500 .width=20/40/80mhz configuration.country=Czech .mode=ap .multicast-enhance=enabled \
    .qos-classifier=priority .ssid=ABC disabled=no security.authentication-types=wpa2-psk,wpa3-psk .ft=yes .ft-over-ds=yes .ft-preserve-vlanid=no \
    .wps=disable steering=steering1

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Where do you get dhcp from? I have tried several models/scenarios and I don't see this problem.

---
### Author: Unknown
Date: Unknown

Updated devices and noticed that haps (RB951Ui-2nD) does brick whit my custom config. Tried to apply config line by line and:
Code:
Select all
/ip neighbor discovery-settings
set discover-interface-list=L2_neighbor_discovery
is at fault. That list contains vxlans. Reported to sup. Updated also my hap ax lite whit similar config and it was fine, so this does not affect all architectures.

---
### Author: Unknown
Date: Unknown

Hi,
Upgraded RBLtAP-2HnD from 7.16.2 to v7.17 this morning.
These comments I want to add / ask after the upgrade:
1., not used LTE APNs can't be deleted - even if LTE1 interface is disabled. I have 3 created for test purpose. One will stay as a tested/working one. Other two APN profiles (test) can't be deleted. Any restriction for the deletion of them?
2., LTE1 interface is used as passthrough via VLANxx interface. 4GInternet works fine. The status on the top says: "Running", "Not Slave" "Not Passthrough", Not Inactive".So the message "Not Passthrough" is confusing in this case.
3., As the devide is used as a passthrough device from 4G WAN to the main router CCR1009 and configured according to the manual - strangely one DHCP Server entry appeared and can't be deleted. Seems like dynamic entry...The name is equal to the working and used APN "name". Is that with purpose? I read that DHCP server needs to be deleted in such case where device used as an LTE passthrough.
Prior thanks for the clarification.
Regards,
Pal

---
### Author: Unknown
Date: Unknown

Super-stable 7.17 is unable to install on RB450Gx4
Code:
Select all
upgrade failed, free 9 kB of kernel disk space
450Gx4 has 512 MB storage space and only 25% of it is used. What is going on??? Other devices with 16 MB storage updated without problems...
P. S. It seems to be an overlooked problem from rc stage ->
viewtopic.php?p=1119444
Have an rb450gx4 and was able to upgrade to 7.17 without issues from 7.16.2

---
### Author: Unknown
Date: Unknown

Well, crap...
Code:
Select all
19:24:07 system,error upgrade failed, free 57 kB of disk space
Code:
Select all
> /system/package/print 
Columns: NAME, VERSION, BUILD-TIME, SIZE
# NAME          VERSION  BUILD-TIME           SIZE     
0 container     7.16.2   2024-11-26 12:09:40  96.1KiB  
1 wifi-qcom-ac  7.16.2   2024-11-26 12:09:40  2676.1KiB
2 routeros      7.16.2   2024-11-26 12:09:40  11.1MiB 

> /system/resource/print 
                   uptime: 7m2s
                  version: 7.16.2 (stable)
               build-time: 2024-11-26 12:09:40
         factory-software: 6.99
              free-memory: 74.7MiB
             total-memory: 256.0MiB
                      cpu: ARM
                cpu-count: 4
            cpu-frequency: 448MHz
                 cpu-load: 3%
           free-hdd-space: 256.0KiB
          total-hdd-space: 16.0MiB
  write-sect-since-reboot: 891
         write-sect-total: 1243788
        architecture-name: arm
               board-name: D53G-5HacD2HnD
                 platform: MikroTik
Edit:
After 2nd attempt upgrade was successful, but disk space is very low:
Code:
Select all
> /system/resource/print 
                   uptime: 1m58s              
                  version: 7.17 (stable)      
               build-time: 2025-01-16 08:19:28
         factory-software: 6.99               
              free-memory: 57.9MiB            
             total-memory: 256.0MiB           
                      cpu: ARM                
                cpu-count: 4                  
            cpu-frequency: 672MHz             
                 cpu-load: 3%                 
           free-hdd-space: 68.0KiB            
          total-hdd-space: 16.0MiB            
  write-sect-since-reboot: 510                
         write-sect-total: 1245818            
        architecture-name: arm                
               board-name: D53G-5HacD2HnD     
                 platform: MikroTik
Going back to 7.16.2 until some future version will have less disk consumption...

---
### Author: Unknown
Date: Unknown

Super-stable 7.17 is unable to install on RB450Gx4
Code:
Select all
upgrade failed, free 9 kB of kernel disk space
450Gx4 has 512 MB storage space and only 25% of it is used. What is going on??? Other devices with 16 MB storage updated without problems...
P. S. It seems to be an overlooked problem from rc stage ->
viewtopic.php?p=1119444
Have an rb450gx4 and was able to upgrade to 7.17 without issues from 7.16.2
What is your RB450Gx4's factory version?

---
### Author: Unknown
Date: Unknown

Have an rb450gx4 and was able to upgrade to 7.17 without issues from 7.16.2
What is your RB450Gx4's factory version?
6.45.1

---
### Author: Unknown
Date: Unknown

What is your RB450Gx4's factory version?
6.45.1
My theory is some of older versions creating too small partition for kernel. If you repartition your device for two partition with 7.16.2, and activate the part1 (second) partition and upgrade with part1 then you could upgrade. Or make full backup, netinstall with 7.16.2 then upgrade should be successful.

---
### Author: Unknown
Date: Unknown

I have hap ac2 with factory version 6.44 and it updated with no issue. Same chip and older factory version...

---
### Author: Unknown
Date: Unknown

My hAP ax2 on v7.16.2 shows bridge ports are hardware-offloaded:
It is buggy though, plugging in a 100Mbps ethernet device on any of the ports reduces the max switch capacity to 100Mbps.
You probably have protocol-mode=none configured on your bridge. The Wiki page referenced states:
Code:
Select all
Currently, HW offloaded bridge support for the IPQ-PPE switch chip is still a work in progress. We recommend using, the default, non-HW offloaded bridge (enabled RSTP).
I validated this, setting protocol-mode=none shows hw-offloaded ports on my hAP ax2. It's a pitty that in 2024/25 we still have recent products without basic features like bridge hw-offload + R/MSTP...

---
### Author: Unknown
Date: Unknown

Not stable!
had a bad upgrade experience. Upgrade to 7.17 - no name resolution for the router or lan clients, no helpful error message - receiving nxdomain, disable/enable, change dns servers for the internal service - nada. Downgrade to 7.16/7.15 - all works fine. Upgrade to 7.17 again - no workie. Again, no dns related messages in console except for tcp syn flood on port 53!.
Tried to disable all static entries - now clients get servfail instead of nxdomain. Disable and enable again - ok, now get resolution. Going on to enable static entries one-by-one - ah, a new error appears - a duplicate entry! What? That has never been the case, and second, why do you care - ignore it, if it is truly duplicate it does not cause any indeterminate state in the config (yes, they were truly duplicate). Why is that error not in console log when the system boots and service is brought up and chokes?
You can't drop the ball like that Mikrotik.  This is a simple situation your QAs should test. And not only that but if you roll service with such hairbrained changes it should be a parallel optional service that you ask the users to manually enable in place of the tried and true which should be the default - then the few that actually like to thinker with config will try it and provide feedback and give you the missing test cases that you did not cover, and only that you change what is the default. And at least put some error messages in the console. This is simply not how you produce quality!
Platform: arm32

---
### Author: Unknown
Date: Unknown

Nice update! I just love how it bricked my RB450Gx4 <3 <3
Factory reset got it back to life, reverted to 7.16.2, guess I'm not updating for a while.

---
### Author: Unknown
Date: Unknown

*) dhcpv6-server - added IPv6 address delegation support;
this not work. When i select a pool on ADDRESS POOL in the dhcpv6 server, i obtain in log: pool6 refused acquire: bad preferred prefix length! (1) and the pool is properly configured

---
### Author: Unknown
Date: Unknown

I was not able to upgrade an MLAG setup on two CRS312-4C+8XG switches successfully. Right after an upgrade it immediately caused a broadcast storm on MLAG bonding-interfaces which were connected to another Mikrotik appliances like CCR2116-12G-4S+ where bonding-interfaces were a slave ports in a switch-chip bridge. CCR2116 was already upgraded to the 7.17 version.
Simpler two interface loops connected via a few same MSTP region Mikrotik switches also started to cause a broadcast storm and printed a multiple errors like these below:
Code:
Select all
combo2 excessive broadcasts/multicasts, probably a loop
combo2: bridge RX looped packet - MAC 48:a9:8a:be:de:b5 -> 33:33:00:00:00:01 VID 500 ETHERTYPE 0x86dd
combo2: bridge RX looped packet - MAC 48:a9:8a:be:de:b5 -> 33:33:00:00:00:01 VID 500 ETHERTYPE 0x86dd
combo2: bridge RX looped packet - MAC 48:a9:8a:be:de:b5 -> ff:ff:ff:ff:ff:ff VID 500 ETHERTYPE 0x0806
combo2: bridge RX looped packet - MAC 48:a9:8a:be:de:b5 -> ff:ff:ff:ff:ff:ff VID 500 ETHERTYPE 0x0806
combo2: bridge RX looped packet - MAC 48:a9:8a:be:de:b5 -> 33:33:00:00:00:01 VID 500 ETHERTYPE 0x86dd
Thankfully rolling back to the previous 7.16.2 version restored functionality of MLAG setup.

---
### Author: Unknown
Date: Unknown

R11e-LTE-US is not working! With 7.16.2 works well.
Downgraded and working well again.

---
### Author: Unknown
Date: Unknown

ccr2004 update failed, unable to restart

---
### Author: Unknown
Date: Unknown

It seems that 7.17 has broken the VRRP Sync Connection tracking mechanism. On my VRRP interfaces with Torch and I don't see any protocol-112 (vrrp) or UDP/8275 traffic. What gives??

---
### Author: Unknown
Date: Unknown

*) dhcpv6-server - added IPv6 address delegation support;
this not work. When i select a pool on ADDRESS POOL in the dhcpv6 server, i obtain in log: pool6 refused acquire: bad preferred prefix length! (1) and the pool is properly configured
Same there. But if i set pool prefix lenght to 128 error dissapears. But right setting for my  pool prefix lenght is 64. With 64 in settings it gives error "pool6 refused acquire: bad preferred prefix length!".

---
### Author: Unknown
Date: Unknown

Well, we should make some test before upgrading en-masse our devices. I have upgraded only one my personal router that is not critical. The other one in my network are all on the 7.16.2

---
### Author: Unknown
Date: Unknown

running 2 hAP ac2 (one with the 256MB and one with the 128MB flash storage)
this model is supposed to have 16MB of flash, how did you get 128 or 256MB?

---
### Author: Unknown
Date: Unknown

Since I upgraded to this v7.17 release my IPv6 routing working many years ago properly is died now.
I can ping, for example, google.com from the router itself, but from the hosts behind I cannot. I request IPv6 subnet from my ISP via DHCPv6.
Strange, because with packet sniffing, I see the ICMPv6 echo requests packets on the WAN interface but no response and they never reach the remote end too.
What's more, when I try to disable a local ipv6 IP it is not possible. See the picture attached. This thing is related to a bug I reported before in email to support (different bug but related).
UPDATE:
Finally I downgraded back to v7.16.2 (from v7.17) and now all fine again with my IPv6 connection. Unfortunately I do not know what could be the problem but both of my two routers were affected and first seems to be fixed by the downgrade. I hope other router will be fine after the downgrade especially because it is quite far away from me so I have no physical access to it.
UPDATE2:
I give up. I cannot decide if it is an ISP related issue or a Mikrotik. After a couple of minutes it went wrong again even with the downgraded Mikrotik version version.

---
### Author: Unknown
Date: Unknown

I guess you would never make an inplace upgrade of a MS Server 2019 to 2025 without testing, right?
Certainly, there are admins who might attempt such an upgrade directly, but it's always a risk. Even on Windows, untested updates - such as Exchange KBs - can cause significant issues if applied without proper research or understanding of others' experiences. Microsoft has had its fair share of problematic updates, despite being a billion-dollar enterprise. Yet, when it comes to Mikrotik, expectations of zero bugs remain sky-high - something to reflect on!

---
### Author: Unknown
Date: Unknown

running 2 hAP ac2 (one with the 256MB and one with the 128MB flash storage)
this model is supposed to have 16MB of flash, how did you get 128 or 256MB?
I guess poster is confusing flash and RAM (early units came with 256MB RAM, the rest came with 128MB RAM as it was always advertised). All units AFAIK have 16MB flash (with 7.16 they "recovered" a few kB of flash compared to earlier versions).

---
### Author: Unknown
Date: Unknown

I don't know if the author got confused but in 2020-21 when AC2 came out there were some units, the first ones produced, that came out with this configuration, I remember some posts on this forum.
I take this opportunity to say that my LAN (3 AC2s one Capsman and the others CAP) work perfectly on 7.17, the only flaw that I found and that I have already reported in the various RCs is that if I use a USB key via SMB everything freezes with a nice kernel panic. I was told by MK and other users that this depends on the hardware resources of AC2. I just wanted to point it out to anyone who finds themselves in my situation.

---
### Author: Unknown
Date: Unknown

Well, we should make some test before upgrading en-masse our devices. I have upgraded only one my personal router that is not critical. The other one in my network are all on the 7.16.2
As a homeowner, I had no issues updating my hapax3, non-critical AP to 7.17.  My main router CCR1009 will not get upgraded until 7.17.1 or 7.17.2 are released, fixing the most egregious 7.17 issues.
As an IT provider (business, would never impose new firmware on clients without first testing all required functionality in a sandbox environment as well as wait for at least 7.17.1 ).
MT is not immune from creating new issues when fixing old issues or implementing new features.

---
### Author: Unknown
Date: Unknown

*) wifi - added access-list stats (CLI only);
Can we get an example for this ?    I could not figure it out myself and there is no documentation for it.
Find something ? I also try but can't figure out.

---
### Author: Unknown
Date: Unknown

Still recieve "association rejected, can't find PMKSA" on v7.17 stable on 2.4 and 5 Ghz channels on Chateau Pro ax just re-tested.
It happens and gets logged in the Capsman log when a single client roams across multiple APs and roams to each.
Interesting is it happens for first device walk through near each AP.
But subsequent walk thorugh done in couple of minutes afte the first one roams fine, without reporting this error.
Package loss when pinging during roaming is 0.5 - 1 second, regardless if error the is logged or not and I couldnt notice any differences.
Settings:
WPA3 PSK,
Management protection required
Management encryption default
PMKID not disabled
Group encryption default
Group key update 23:59:00
Connect group 0/1
FT enabled
FT mobility domain defined hex value
FT over DS enabled
FT preserve VLAN ID enabled
Steering name is defined
Default Neighbour group selected (4 APs, 8 SSIDs)
RRM enabled
WNM enabled
Other settings are more less default, apart from access list pushing clients into different VLANs based on MACs (VLAN driving which works).
Channels are ax, default width, DFS skipped, reselect interval 3-13h (and different accross the bands).
Time and time zones are sync across all devices.
Hope it helps.

---
### Author: Unknown
Date: Unknown

Got an interesting situation I first noticed very recently, on v7.16.2, and just confirmed to be happening on v7.17, so "reporting" it here on the v7.17 thread, with the observation I have indeed seen the very same behavior on v7.16.2 last week (when I realized it).
I was trying to add some IP Firewall Mangle rules with the extra "Hotspot" Value,
via the webfig
. Created a plain "accept" rule, tab Mangle, chain Prerouting, Extra,Hotspot, value "Auth", OK. Rule got created, no problem. If I click (to edit) the rule, Hotspot "Auth" is there selected, as just configured.
However, from an 'export', the rule has no hotspot criteria:
Code:
Select all
[admin@ACIEG] /ip/firewall/mangle> export terse
[ .... ]
/ip firewall mangle add action=accept chain=prerouting
[admin@ACIEG] /ip/firewall/mangle>
.
Now using Winbox, I can edit the rule and hotspot=auth appears as configured, despite not showing on export (which clearly indicates some persistency is happening, something is being save somewhere). If I edit the rule and change something else, hotspot=auth starts appearing on the export. If I create the rule from scratch via Winbox, hotspot=auth is there on export (as expected).
.
Code:
Select all
[admin@ACIEG] /ip/firewall/mangle> export terse
[ ... ]
/ip firewall mangle add action=accept chain=prerouting hotspot=auth
[admin@ACIEG] /ip/firewall/mangle>
.
At the end, i'm confused on the rule keeping the hotspot=auth while being edited via Webfig and Winbox, after being created via Webfig, but not showing on the export. I'm not sure if the parameter is being evaluated, despite somehow being made persistent via webfig. I even tried logging off and logging again (from Webfig), and hotspot=auth can be seen selected there, despite not shown on export.
At the end, I'm not sure if this is a webfig problem or just an export problem. I didn't tested to really check if the hotspot=auth is being enforced when it's not showing on the export. Some persitency is clearly happening, but also something clearly is weird because the hotspot=auth parameter doesn't shows on export if rule is created via Webfig.

---
### Author: Unknown
Date: Unknown

Hi,
7.17 is working great few days on:
HAP AX3, HAP AC 3, HAP AX2, HAP AC2, SXT, WAP G60, CUBE 60

---
### Author: Unknown
Date: Unknown

7.17 upgrade went smooth, running on
PL7411-2nD (2x)
HAP RB962UiGS-5HacT2HnT (5x)
RB750GL (1x)
RB1100 (1x)
RB2011 (1x)
HEX RB750Gr3 (1x)
HAP AX3 (4x)
CHATEAU 5G (1x)
no unexpected issues

---
### Author: Unknown
Date: Unknown

Yes, after reading the documentation on the wiki, I noticed that dhcp6 can only assign /128 addresses, which if you think about it, makes sense. Since it would be an address only for cpe management, since for navigation there would be the prefix that could be /64, /56, /48, etc.
In that sense, you must create 2 IPv6 pools, one that will assign the prefixes, for example /64 for residential users and another pool that will assign IPv6 addresses /128 to the user's cpe wan
*) dhcpv6-server - added IPv6 address delegation support;
this not work. When i select a pool on ADDRESS POOL in the dhcpv6 server, i obtain in log: pool6 refused acquire: bad preferred prefix length! (1) and the pool is properly configured
Same there. But if i set pool prefix lenght to 128 error dissapears. But right setting for my  pool prefix lenght is 64. With 64 in settings it gives error "pool6 refused acquire: bad preferred prefix length!".

---
### Author: Unknown
Date: Unknown

Hi,
7.17 is working great few days on:
HAP AX3, HAP AC 3, HAP AX2, HAP AC2, SXT, WAP G60, CUBE 60
Hi,
May I know how you could upgrade HAP AC2 to 7.17? I am still using 7.12
What steps to upgrade?
Thanks

---
### Author: Unknown
Date: Unknown

Use the ROS built in update functionality. It updates to latest 7.12 first. Then it upgrades to 7.13. After that you can upgrade to 7.17 finally. More info can be found at help.mikrotik.com/docs

---
### Author: Unknown
Date: Unknown

Have an rb450gx4 and was able to upgrade to 7.17 without issues from 7.16.2
What is your RB450Gx4's factory version?
Code:
Select all
uptime: 16h9m8s            
                  version: 7.17 (stable)      
               build-time: 2025-01-16 08:19:28
         factory-software: 6.45.3             
              free-memory: 871.9MiB           
             total-memory: 1024.0MiB          
                      cpu: ARM                
                cpu-count: 4                  
            cpu-frequency: 448MHz             
                 cpu-load: 12%                
           free-hdd-space: 429.2MiB           
          total-hdd-space: 512.0MiB           
  write-sect-since-reboot: 39224              
         write-sect-total: 32069553           
               bad-blocks: 0.1%               
        architecture-name: arm                
               board-name: RB450Gx4           
                 platform: MikroTik

---
### Author: Unknown
Date: Unknown

Can we get an example for this ?    I could not figure it out myself and there is no documentation for it.
Find something ? I also try but can't figure out.
I think its talking about this:
Code:
Select all
/interface/wifi/access-list> print
#  MAC-ADDRESS        ACTION  LAST-LOGGED-OUT      MATCH-COUNT
;;; Switch
 0  E0:F6:B5:XX:XX:XX  accept  2025-01-18 02:15:16            3
;;; Xiaomi
 1  9E:AA:77:XX:XX:XX  accept  2025-01-19 22:56:08           70

---
### Author: Unknown
Date: Unknown

*) smb - stability improvements for client/server;
The SMB client run by Infuse player app on Apple TV stopped working. macOS native SMB client connects without problems.
Below are dissections from Wireshark.
Infuse:
Code:
Select all
--Request by Infuse--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x18, Canonicalized Pathnames, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...1 .... = Canonicalized Pathnames: Pathnames are canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc843, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Used, Extended Attributes, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .1.. .... = Long Names Used: Path names in request are long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..1. = Extended Attributes: Extended attributes are supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 0
        Process ID: 1344
        User ID: 0
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:31:13.155350300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by Infuse--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 99
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 28]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d5a10eba0dae463de64e00a9d6f28d86caf27f31cbee57633eee39494cbf27b6c601bf7ee95418c314a20508a331866661c4abd3b99240566b0f96e46bb3f036]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 4
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x00000045, DFS, LARGE MTU, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 0... = MULTI CHANNEL: This host does NOT support MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 51497ea5-5cef-b244-b964-6e8ce408a16f
        NegotiateContextOffset: 0x00000000
        NegotiateContextCount: 0
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_INSUFFICIENT_RESOURCES (0xc000009a)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 24]
        [Time from request: 0.000004000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: f4c7dbdcf3ecb837e5cb129c6cc7c78a3a6f3b2b56109787fd24bcdf2ce7ac44650bd5b25beafbb863ca3411f0f53ebfc1a15743abe42cd58eb4777cdc21ddc2]
        StructureSize: 0x0009
            0000 0000 0000 100. = Fixed Part Length: 4
            .... .... .... ...1 = Dynamic Part: True
        Error Context Count: 0
        Reserved: 0x00
        Byte Count: 0
        Error Data: 00
macOS's Finder:
Code:
Select all
--Request by macOS--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x08, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...0 .... = Canonicalized Pathnames: Pathnames are not canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc801, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .0.. .... = Long Names Used: Path names in request are not long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..0. = Extended Attributes: Extended attributes are not supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 65535
        Process ID: 1
        User ID: 65535
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.815501500 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by macOS--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 0
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 58]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d31c2830b42fa5c6603ae5e67d9fbbd519687ecc35f3a604d91d0b2cf677831d9ee858e922cf7f1e2fbd9e18b9c1fef59ddb991a3fe69433da1d3eac9afa60c8]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 5
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x0000007f, DFS, LEASING, LARGE MTU, MULTI CHANNEL, PERSISTENT HANDLES, DIRECTORY LEASING, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..1. = LEASING: This host supports LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...1 .... = PERSISTENT HANDLES: This host supports PERSISTENT HANDLES
            .... .... .... .... .... .... ..1. .... = DIRECTORY LEASING: This host supports DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 5918f3a6-8558-bf44-bce9-89cb9c46119a
        NegotiateContextOffset: 0x00000070
        NegotiateContextCount: 5
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)
        Dialect: SMB 3.1.1 (0x0311)
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: b2967270afec39d772b756b248b7e7f8c6868f28a5bd3dae84be2c94061cdd38
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 10
            Reserved: 00000000
            CipherCount: 4
            CipherId: AES-256-GCM (0x0004)
            CipherId: AES-256-CCM (0x0003)
            CipherId: AES-128-GCM (0x0002)
            CipherId: AES-128-CCM (0x0001)
        Negotiate Context: SMB2_COMPRESSION_CAPABILITIES 
            Type: SMB2_COMPRESSION_CAPABILITIES (0x0003)
            DataLength: 10
            Reserved: 00000000
            CompressionAlgorithmCount: 1
            Flags: 0x00000000
                .... .... .... .... .... .... .... ...0 = Chained: False
                0000 0000 0000 0000 0000 0000 0000 000. = Reserved: 0x00000000
            CompressionAlgorithmId: None (0x0000)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 6
            Reserved: 00000000
            SigningAlgorithmCount: 2
            SigningAlgorithmId: AES-GMAC (0x0002)
            SigningAlgorithmId: AES-CMAC (0x0001)
        Negotiate Context: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID 
            Type: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID (0x0005)
            DataLength: 58
            Reserved: 00000000
            Netname: Shared Movies._smb._tcp.local

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 54]
        [Time from request: 0.000007000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: 5c8cf3670d9ca5d3b91e2199ac05900e9dc87288dfab3e1ebf702d0fba52eaeafe46ae3070c36de4b1460af9540cd3ceeb601c97b62ba1d73ab22a9a011d192f]
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB 3.1.1 (0x0311)
        NegotiateContextCount: 3
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.820239300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        NegotiateContextOffset: 0x000000d0
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: edb44f22adfc8867776d42525d298d1ee4b228e0690e951e33ad271ab36e6f6a
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 4
            Reserved: 00000000
            CipherCount: 1
            CipherId: AES-128-GCM (0x0002)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 4
            Reserved: 00000000
            SigningAlgorithmCount: 1
            SigningAlgorithmId: AES-CMAC (0x0001)
SUP-176851

---
### Author: Unknown
Date: Unknown

R11e-LTE-US is not working! With 7.16.2 works well.
Downgraded and working well again.
It works perfectly for me, do you also have this firmware?
R11e-LTE6_V038

---
### Author: Unknown
Date: Unknown

Hmm, on some devices I see a lot of...
system;warning possible SYN flooding on tcp port 53
... though this is just regular DNS traffic on a hotspot. Can I mitigate this warning from being triggered?

---
### Author: Unknown
Date: Unknown

i4ko
Please send supout.rif file from your device to
support@mikrotik.com

---
### Author: Unknown
Date: Unknown

Hi,
Upgraded RBLtAP-2HnD from 7.16.2 to v7.17 this morning.
These comments I want to add / ask after the upgrade:
1., not used LTE APNs can't be deleted - even if LTE1 interface is disabled. I have 3 created for test purpose. One will stay as a tested/working one. Other two APN profiles (test) can't be deleted. Any restriction for the deletion of them?
2., LTE1 interface is used as passthrough via VLANxx interface. 4GInternet works fine. The status on the top says: "Running", "Not Slave" "Not Passthrough", Not Inactive".So the message "Not Passthrough" is confusing in this case.
3., As the devide is used as a passthrough device from 4G WAN to the main router CCR1009 and configured according to the manual - strangely one DHCP Server entry appeared and can't be deleted. Seems like dynamic entry...The name is equal to the working and used APN "name". Is that with purpose? I read that DHCP server needs to be deleted in such case where device used as an LTE passthrough.
Regarding #3, dynamic DHCP serves are  used to handout IP info to LTE passthrough client in this and previous RouterOS  versions, most likely was not noticing it.
Regarding #1 and #2, please create Supout file with extended LTE logging enabled and open servicedesk ticket.
[
https://help.mikrotik.com/servicedesk/servicedesk
]
This article explains how to make a Supout.rif file:
[
https://help.mikrotik.com/docs/display/ROS/Supout.rif
]
Use following commands to enable extended LTE logging:
Code:
Select all
/system logging action remove [find name=support]
/system logging action add name=support target=memory memory-lines=16383
/system logging add action=support topics=lte

---
### Author: Unknown
Date: Unknown

It seems that 7.17 has broken the VRRP Sync Connection tracking mechanism. On my VRRP interfaces with Torch and I don't see any protocol-112 (vrrp) or UDP/8275 traffic. What gives??
Yup, seeing the same thing, it shows like this:
Screenshot_20250120_114301.png
Also, when one router was 7.17 and the other 7.16.x the VRRP would move master from the older to newer one when it was not supposed to (higher priority on older).

---
### Author: Unknown
Date: Unknown

I had uploaded v7.17 for my device RB951G-2HnD and carried out tests as in CCR1009 v7.16.1 [1]. The results failed again. The attached excerpt of "RouterOS version 7.17 have been released in the "v7 stable" channel!" is shown below:
*) dns - do not look up local cache when executing ":resolve" command with specified "server" parameter (introduced in v7.16);
Ref.
[1]
viewtopic.php?p=1103784#p1103784

---
### Author: Unknown
Date: Unknown

Yup, seeing the same thing, it shows like this:
Screenshot_20250120_114301.png
Also, when one router was 7.17 and the other 7.16.x the VRRP would move master from the older to newer one when it was not supposed to (higher priority on older).
Exactly... I have this red message too.. I should open a SUP but can't do it yet as I'm on vacation.

---
### Author: Unknown
Date: Unknown

R11e-LTE-US is not working! With 7.16.2 works well.
Downgraded and working well again.
Where are no known general connectivity issue with R11e-LTE-US under RouterOS v7.17 control.
Regarding log in screenshot, according to it modem reports what its registered in home cellular network and instantly reports registration is lost.
Please create Supout file with extended LTE logging enabled from v7.17 and v7.16.2 for reference and open servicedesk ticket.
[
https://help.mikrotik.com/servicedesk/servicedesk
]
This article explains how to make a Supout.rif file:
[
https://help.mikrotik.com/docs/display/ROS/Supout.rif
]
Use following commands to enable extended LTE logging:
Code:
Select all
/system logging action remove [find name=support]
/system logging action add name=support target=memory memory-lines=16383
/system logging add action=support topics=lte

---
### Author: Unknown
Date: Unknown

After upgrading to 7.17 the dhcp+radius bundle stopped working.  We switched back to 7.16.2 and everything works as it should. DHPC clients receive ip after authorization via radius.

---
### Author: Unknown
Date: Unknown

Hello ArtisM,
A support case is created under SUP-176902 for point 1 and 2
For Point 3 I think the IP / DHCP server dynamic entry should noted in LTE > "Passthrough Example" section on WIKI (
https://help.mikrotik.com/docs/spaces/R ... 146563/LTE
)
Now the reading is this: "...On the host on the network where the Passthrough is providing the IP a DHCP-Client should be enabled on that interface too..."
Better to extend it with this text "LTE Passthrough mode activation will dynamically create a DHCP server entry with nam of the APN used for such purpuse, which can't be deleted". Or similar.
Many of us found info how to do this correctly on Mikrotik and other sites, like this as well (
https://wisp.net.au/blog/news/how-do-i- ... tik-router
), Step 3 clearly said to disable DHCP Server. I know that the site is not yours, but Mikrotik WIKI does not say about the DHCP Server.
Hi,
Upgraded RBLtAP-2HnD from 7.16.2 to v7.17 this morning.
These comments I want to add / ask after the upgrade:
1., not used LTE APNs can't be deleted - even if LTE1 interface is disabled. I have 3 created for test purpose. One will stay as a tested/working one. Other two APN profiles (test) can't be deleted. Any restriction for the deletion of them?
2., LTE1 interface is used as passthrough via VLANxx interface. 4GInternet works fine. The status on the top says: "Running", "Not Slave" "Not Passthrough", Not Inactive".So the message "Not Passthrough" is confusing in this case.
3., As the devide is used as a passthrough device from 4G WAN to the main router CCR1009 and configured according to the manual - strangely one DHCP Server entry appeared and can't be deleted. Seems like dynamic entry...The name is equal to the working and used APN "name". Is that with purpose? I read that DHCP server needs to be deleted in such case where device used as an LTE passthrough.
Regarding #3, dynamic DHCP serves are  used to handout IP info to LTE passthrough client in this and previous RouterOS  versions, most likely was not noticing it.
Regarding #1 and #2, please create Supout file with extended LTE logging enabled and open servicedesk ticket.
[
https://help.mikrotik.com/servicedesk/servicedesk
]
This article explains how to make a Supout.rif file:
[
https://help.mikrotik.com/docs/display/ROS/Supout.rif
]
Use following commands to enable extended LTE logging:
Code:
Select all
/system logging action remove [find name=support]
/system logging action add name=support target=memory memory-lines=16383
/system logging add action=support topics=lte

---
### Author: Unknown
Date: Unknown

In CLI Responder parameter for Wireguard peer renamed to "responder" and was "is-responder" in previous versions. So some exported configs will produce syntax error

---
### Author: Unknown
Date: Unknown

Thank you Deniss for your effort. I wanted not to be rude, but closing the tickets with kernel crashes without any solution makes me little bit angry. And not only here, in my job (mobile telco industry) too. :-)) Resources are in my case fine, I have 256MB RAM, not only 128MB. I am willing to test it, if you want.
We are working towards optimizing wireless-qcom-ac as we try to optimize other packages to be less resource heavy, but it is still a work in progress. As of this moment, wifi-qcom-ac is known and expected to take up more resources (including RAM) than legacy wireless drivers.
Yes, thanks team! I also opened a ticket on it a little bit more than a year ago (7.13 at that time). But my experience is little bit different than yours and others reporting "its fine" in this topic. So for me it's been random kernel crash, but generally speaking likely tied to serious traffic going through the AP via wifi (speedtest etc.). Sometimes after updates I had a kernel panic within 24 hours, sometimes after days, weeks, sometimes it was fine for multiple months after this. But the issue was there. I received an update on my ticket then 7.17rc1 came out, and not installed 7.17 on all my devices - has been stable on all these, so fingers crossed.

---
### Author: Unknown
Date: Unknown

Hi,
Where did all data in ip->kid-control and activity field go ?, after upgrade today on rb4011 the activity field is emptry but the rest seems to be the same.
Cheers

---
### Author: Unknown
Date: Unknown

I have a problem with CRS112-8P-4S / 7.16.2 (stable) after installing the 7.17 update.
Since then, the CPU has been much more heavily utilised and accordingly there is a lot of hiccups when transferring data. I have tested it with a connected AccessPoint, a bridge with VLAN is configured. The SSID is in an extra subnet/VLAN.
Under 7.16.2 and previous versions there are no restrictions. With 7.17, for example, a YouTube video loads very slowly and is unusable.
I have reinstalled 7.16.2 and the problems are gone.
How can I provide support so that the problem can be found?
Sorry for my english.

---
### Author: Unknown
Date: Unknown

For the CRS112 it is important to configure the switch chip instead of the bridge. Otherwise all traffic will be passed through the CPU.
Therefore, please share the config (in a new topic) to validate current config.
When running into problems, create a supout file and send it to support:
https://help.mikrotik.com/docs/spaces/R ... Supout.rif
https://help.mikrotik.com/servicedesk/s ... on=portals
Did you both update RouterOS and firmware?

---
### Author: Unknown
Date: Unknown

So many new issues...
Could someone help listing the "hypothetical" new issues that our friends brought here to this thread?
I honestly lost count.
Is this Stable, RC, Beta, ou Alpha?

---
### Author: Unknown
Date: Unknown

It is RouterOS version 7.17 released in the "v7 stable" channel.

---
### Author: Unknown
Date: Unknown

From 4 (four) RB4011s routers I have, in 3 of them the Webfig skin is not working at all with v7.17. File is present on the correct place (skins/skinname.json) but is not selectable via System/User/Groups menu. Just revised the v7.17rc thread, and one user report the same behavior I'm facing with different RC versions.
In previous versions, this also happens here and there, and in almost all cases, rebooting would force the skin to appear as an option. With v7.17, rebooting changes nothing.
And fun fact is that in 1 RB4011 router, it's just working. It was running v7.16.2, updated to v7.17, and it just worked. On the other 3 RB4011s, skin value for the Group got set to something garbage (example /user group set full skin=*182E) and I cannot get it to work again anymore.
Tried creating a new skin from scratch, using the Skin Designer, saved it, file was created on the disk, but just can't select it neither.

---
### Author: Unknown
Date: Unknown

I have create a new topic. @erlinden

---
### Author: Unknown
Date: Unknown

In CLI Responder parameter for Wireguard peer renamed to "responder" and was "is-responder" in previous versions. So some exported configs will produce syntax error
You should understand in general that while RouterOS does automatically convert configuration when you upgrade (and it usually also works OK when you downgrade), but there is no compatibility between exported configuration between versions.
So, you cannot (in general) import a configuration that was exported under another version (earlier or later)!  It may work, it often works, but it also regularly fails.
Sure it would be nice when a later version could always read an export from an earlier version, e.g. by having later versions recognize both names of the parameter and then store it under the new name, but that has not been the case in RouterOS for as long as I know.
It would also be nice when an import would not fatally terminate when it encounters such an error, but rather it just outputs a warning and skips the parameter or the entire line, then continues with the next.  But, RouterOS does not do that either.

---
### Author: Unknown
Date: Unknown

The new WebFig redesign has quite a few visual issues, especially in Safari. My skin file works fine as far as I see, but I’m scared to click around too much because I’m worried a wrong click might mess up my config.

---
### Author: Unknown
Date: Unknown

We noticed a bug that doesn't seem to be unique to 7.17
We have 2 CCR1072s on v7.17 and v7.16.2, and neither will link the ether1 copper lan port (the one used for netbooting). You can physically see the port's LEDs light up, but in routerOS, the link remains down. We were able to replicate the issue with a spare CCR1072 that was running v6. The port works and links normally in v6, but as soon as we upgrade it to 7.16.2, the port will light up the LEDs, but will not link on routerOS. We didn't test how far back this goes on the v7 tree.
We tested plugging a different device just in case, same outcome. We also tried to disable auto-neg on the port, and it won't link as well. Netbooting to netinstall is not affected and will work correctly running v7.

---
### Author: Unknown
Date: Unknown

Upgraded a RB1100AHx2 from 7.16.2 to 7.17 on Friday afternoon, everything was fine up until last night when the DHCP server stopped issuing DHCP leases. Service Desk unfortunately restarted the router without first collecting a supout.rif file but that fixed the issue.
Will most probably need to wait for the issue to re-occur, so that we can give support something to work with.

---
### Author: Unknown
Date: Unknown

Upgraded a RB1100AHx2 from 7.16.2 to 7.17 on Friday afternoon, everything was fine up until last night when the DHCP server stopped issuing DHCP leases. Service Desk unfortunately restarted the router without first collecting a supout.rif file but that fixed the issue.
Will most probably need to wait for the issue to re-occur, so that we can give support something to work with.
Fortunately my RB1100AHx2 continuously serving DHCP clients for more than 4 days without any problem. There is no RADIUS or any special case, only static and dynamic bindings.

---
### Author: Unknown
Date: Unknown

My log is full of "cache full, not storing [ignoring repeated messages]" messages. hAP AX2 here. Cache contains only cca 380 items. For some time, I have run an Adlist. Due to missign redirection for Googleadservices, I have disabled it, restarted the router, but the messages still do appear, though not so frequently. Was not observing it before. Turned on the logging for DNS topic, but not sure what should I look into. Anyone observing anything similar?

---
### Author: Unknown
Date: Unknown

Not sure what memory is used for adlist, but you might want to decrease its size:
/ip dns
cache-size
What is it currently set to? Default is 2048.

---
### Author: Unknown
Date: Unknown

After updating my RB4011+RM from 7.16.2 to 7.17, several IP related settings were lost/reset to default. Caught it because the router was suddenly sending out neighbor discovery packets.
These settings went missing:
Code:
Select all
/ip neighbor discovery-settings set discover-interface-list=none
/ip settings set max-neighbor-entries=8192 rp-filter=strict
/ipv6 settings set accept-redirects=no accept-router-advertisements=no max-neighbor-entries=8192

---
### Author: Unknown
Date: Unknown

Ok, I have serious problem with DHCP client after upgrade to 7.17, as it drops default route on multiple type of devices (RB4011, SXTsq 5 ac). I experienced this on RCs and betas too. Routers creating autosupout.rif file after dropping def route. I try to figure out what triggers this issue.
Confirm, I have the same problem on RB5009. I’ve implemented a workaround script to trigger DHCP release once the obtained default route gets missing.
Do you use VPNv6 in BGP?

---
### Author: Unknown
Date: Unknown

I can confirm this - happened on my hEX Refresh too. Triggered a dhcp release and it went back to normal.
Do you use VPNv6 in BGP?

---
### Author: Unknown
Date: Unknown

>  [stable] is released!
far from stable ...
rb760igs
crs326-24g-2s+
both have same problem
few hour after update, one of CPU core goes to 100%, dhcp leases are not served any more, login from winbox show EMPTY windows in IPv4 dhcp server/network/leases
after reboot, everything is back to normal

---
### Author: Unknown
Date: Unknown

@npeca75, can you share their configs for sanity checking?

---
### Author: Unknown
Date: Unknown

After updating my RB4011+RM from 7.16.2 to 7.17, several IP related settings were lost/reset to default. Caught it because the router was suddenly sending out neighbor discovery packets.
These settings went missing:
Code:
Select all
/ip neighbor discovery-settings set discover-interface-list=none
/ip settings set max-neighbor-entries=8192 rp-filter=strict
/ipv6 settings set accept-redirects=no accept-router-advertisements=no max-neighbor-entries=8192
.
I also noticed neighbor settings changing in some routers while upgrading from v7.16.2 to v7.17.

---
### Author: Unknown
Date: Unknown

yeah, I can confirm this. Couple of my units had different setting of discover-interface.

---
### Author: Unknown
Date: Unknown

TLDR: ROS DNS forwarder should not switch upstream DNS server just because a single request was answered with status SERVFAIL, because SERVFAIL not necessarily indicates a problem with the specific DNS server.
Long story:
I'm not sure if this is new with the DNS refactoring listed in the 7.17 release notes: My RB5009 at home is running 7.17 since 4d days (work stuff has to stay on 7.13 until BGM issues are solved).
It works quite well, but yesterday I noticed the DNS forwarder is seemingly random switching btw. configured upstream resolvers. Packet sniffing DNS traffic did not show any timeouts or otherwise missing DNS responses. Further inspection showed that ROS 7.17 DNS cache/forwarder is changing the upstream server every time it gets SERVFAIL as a response.
SERVFAIL means the server could not resolve the request, but this might be because of an issue with the DNS server responsible for a given domain, not a problem of the actual upstream server queried.
One example is zeropaper.com.br. This domain is still officially registered, but the DNS server listed as responsible server does return REFUSED if asked for anything related to zeropaper.com.br.
All "big" DNS servers (1.1.1.1, 8.8.8.8, 9.9.9.9) respond with SERVFAIL if queried. They ask the official server, which returns REFUSED which in turn is translated to SERVFAIL causing the ROS DNS forwarder to switch to the next configured upstream DNS server.
My wife had an old app on her phone, which asked every few minutes for a host in zeropaper.com.br. The response by the upstream server is SERVFAIL, and the ROS DNS forwarder switches to the next upstream DNS server in the list. It can be manually triggered anytime by running
dig zeropaper.com.br
on a client using the ROS DNS forwarder. This is not an issue at my home, as both DNS servers are equally good. But there are customer sites, where the secondary DNS server is much slower and really should only be used if the primary one doe snot work or cannot be reached. The problem can be mitigated by adding a static NXDOMAIN to the ROS DNS forwarder for the affected domain. But the same issue can happen anytime for any other domain returning SERVFAIL.
Steps to reproduce: Run
dig zeropaper.com.br
or (
nslookup zeropaper.com.br
on Windows) while capturing DNS traffic on the WAN interface and see the ROS DNS cache/forwarder changing to the next upstream DNS server in the list.

---
### Author: Unknown
Date: Unknown

>  [stable] is released!
far from stable ...
rb760igs
crs326-24g-2s+
both have same problem
few hour after update, one of CPU core goes to 100%, dhcp leases are not served any more, login from winbox show EMPTY windows in IPv4 dhcp server/network/leases
after reboot, everything is back to normal
Maybe you are willing to participate in the beta and rc cycles to identify more bugs, before it gets "stable" like I do? :-)

---
### Author: Unknown
Date: Unknown

Maybe you are willing to participate in the beta and rc cycles to identify more bugs, before it gets "stable" like I do? :-)
Most users like myself can't afford to duplicate their network.
IMO MikroTik is making two (2) mistakes, (A) sub-standard software testing (too many regressions) compared to competition, and (B) releasing new features before fixing old bugs. This release is the worst possible combination, releasing new broken features at the same time breaking old features.

---
### Author: Unknown
Date: Unknown

Hi Mikrotik,
In addition to the annoyingly lost settings for
/ip neighbor discovery-settings
I noticed two typos in new LoRA option fields:
Code:
Select all
> iot/lora/set forward=
crc-validtaion     dev-addr-validtaion     proprietary-traffic
should be
validation
in both cases I assume.
I also lost the important settings for URPF and syncookies:
Code:
Select all
- /ip settings
- set max-neighbor-entries=8192 rp-filter=loose tcp-syncookies=yes
There's also this minor cosmetic bug:
Code:
Select all
/system clock
- set time-zone-name=Europe/Amsterdam
+ set time-zone-name=Europe/London
All of those when upgrading 7.16.2 to 7.17.0.
Thanks for your great efforts and please keep doing that great work despite all the criticism ;-)
Irrwitzer

---
### Author: Unknown
Date: Unknown

...
We have 2 CCR1072s on v7.17 and v7.16.2, and neither will link the ether1 copper lan port (the one used for netbooting). You can physically see the port's LEDs light up, but in routerOS, the link remains down. We were able to replicate the issue with a spare CCR1072 that was running v6. The port works and links normally in v6, but as soon as we upgrade it to 7.16.2, the port will light up the LEDs, but will not link on routerOS. We didn't test how far back this goes on the v7 tree.
...
So you were
not
able to reproduce the same issue on v6.
When you did the move to v7 have you upgraded or used
Netinstall
? If the former than does the issue persist if you
Netinstall
the latest stable
7.17.0
without default configuration than reach the desired configuration state by starting from scratch (or applying the result of the
export verbose show-sensitive file=desired_name
done on 7.17.0 one command at a time)?

---
### Author: Unknown
Date: Unknown

What is your RB450Gx4's factory version?
Code:
Select all
uptime: 16h9m8s            
                  version: 7.17 (stable)      
               build-time: 2025-01-16 08:19:28
         factory-software: 6.45.3             
              free-memory: 871.9MiB           
             total-memory: 1024.0MiB          
                      cpu: ARM                
                cpu-count: 4                  
            cpu-frequency: 448MHz             
                 cpu-load: 12%                
           free-hdd-space: 429.2MiB           
          total-hdd-space: 512.0MiB           
  write-sect-since-reboot: 39224              
         write-sect-total: 32069553           
               bad-blocks: 0.1%               
        architecture-name: arm                
               board-name: RB450Gx4           
                 platform: MikroTik
Code:
Select all
system,arm - automatically increase boot part size on upgrade or netinstall (fixed upgrade failed due to a lack of space on kernel disk/partition)
It looks like they found a way to fix this problem in 7.18 beta - but why this was not made in correct way in the first place?

---
### Author: Unknown
Date: Unknown

Most users like myself can't afford to duplicate their network.
IMO MikroTik is making two (2) mistakes, (A) sub-standard software testing (too many regressions) compared to competition, and (B) releasing new features before fixing old bugs. This release is the worst possible combination, releasing new broken features at the same time breaking old features.
Here's some advice then, to everybody who complains every time there's a new release, from someone who's been doing this for 20+ years:
Don't put brand new releases on your devices unless there's a feature or fix you specifically need,
and even then,
be prepared for other things to break.
With RouterOS 7, wait until at least a point release or two before upgrading production devices, especially if you don't have a way to test beforehand.
If having the latest and greatest is that critical to you, buy some cheaper hardware to test with, or lab things up in GNS3 (for free).

---
### Author: Unknown
Date: Unknown

...
We have 2 CCR1072s on v7.17 and v7.16.2, and neither will link the ether1 copper lan port (the one used for netbooting). You can physically see the port's LEDs light up, but in routerOS, the link remains down. We were able to replicate the issue with a spare CCR1072 that was running v6. The port works and links normally in v6, but as soon as we upgrade it to 7.16.2, the port will light up the LEDs, but will not link on routerOS. We didn't test how far back this goes on the v7 tree.
...
So you were
not
able to reproduce the same issue on v6.
When you did the move to v7 have you upgraded or used
Netinstall
? If the former than does the issue persist if you
Netinstall
the latest stable
7.17.0
without default configuration than reach the desired configuration state by starting from scratch (or applying the result of the
export verbose show-sensitive file=desired_name
done on 7.17.0 one command at a time)?
I quote my original post:
"We were able to replicate the issue with a spare CCR1072 that was running v6. The port works and links normally in v6, but as soon as we upgrade it to 7.16.2, the port will light up the LEDs, but will not link on routerOS."
In simple words, running the last v6 long-term version does NOT present the issue, port works as intended. The issue is only present running v7, regardless of how it was upgraded to v7 (via normal upgrade, or reinstalling with netinstall). Going back to v6 solves the issue. The test ccr1072 was clean, no config, and the problem is present as well. I mentioned netinstall because the port does work if you netboot with v7 installed, but a normal boot to routerOS v7 makes the port unusable. We tried these methods, all with the same outcome (no link on v7):
- Normal upgrade with no config (clean slate) from v6 to v7.
- Netinstall v7.17 clean with no config.
- Netinstall v7.16.2 clean with no config.
- Normal upgrade from clean net-installed v7.16.2 to v7.17.
The problem is present and can be replicated under any state on v7.16.2 and v7.17 on our 2 production CCR1072s and the test CCr1072.

---
### Author: Unknown
Date: Unknown

Not sure what memory is used for adlist, but you might want to decrease its size:
/ip dns
cache-size
What is it currently set to? Default is 2048.
Realising that after the Google search I could not reach many sites (related to not having whitelisted googleadservices.com), I have turned the ad-list feature off (disabling the item), so it should not be imo relevant.
The cache size is default, 2048, 346 items recently. Looking into the ip/dns output though, it seems, that the cache is full .....
Code:
Select all
servers: 8.8.8.8
                               4.4.4.4
              dynamic-servers:        
               use-doh-server:        
              verify-doh-cert: no     
   doh-max-server-connections: 5      
   doh-max-concurrent-queries: 50     
                  doh-timeout: 5s     
        allow-remote-requests: yes    
          max-udp-packet-size: 4096   
         query-server-timeout: 2s     
          query-total-timeout: 10s    
       max-concurrent-queries: 100    
  max-concurrent-tcp-sessions: 20     
                   cache-size: 2048KiB
                cache-max-ttl: 1w     
      address-list-extra-time: 0s     
                          vrf: main   
           mdns-repeat-ifaces:        
                   cache-used: 1997KiB
Will double the size and further watch it. It was never a problem before. We will see and thanks for the response ....
PS: just realised, that 4.4.4.4 is not a Google DNS server, hence changing it to 8.8.4.4.

---
### Author: Unknown
Date: Unknown

Here's some advice then, to everybody who complains every time there's a new release, from someone who's been doing this for 20+ years:
Don't put brand new releases on your devices unless there's a feature or fix you specifically need,
and even then,
be prepared for other things to break.
With RouterOS 7, wait until at least a point release or two before upgrading production devices, especially if you don't have a way to test beforehand.
If having the latest and greatest is that critical to you, buy some cheaper hardware to test with, or lab things up in GNS3 (for free).
Generally good advice, thank you!
The complaints have purpose, MikroTik improves development to ease user product burden and accelerate product uptake.
IMO, useful complaints keep MT current on user interests and needs. As user needs are met, complaints will self extinguish.

---
### Author: Unknown
Date: Unknown

TLDR: ROS DNS forwarder should not switch upstream DNS server just because a single request was answered with status SERVFAIL, because SERVFAIL not necessarily indicates a problem with the specific DNS server.
A "good" way to handle this (this is how bind9 does it) is to keep a rolling average of response times of different DNS resolvers, i.e. each time a query is sent and replied by that resolver (also SERVFAIL reply) the average is updated to like (avg*99 + this)/100, and send most of the queries to the fastest server.  Sometimes queries are sent to the others, to keep their averages uptodate.
However, it also is desirable to have "groups" of resolvers that are used with priority.  I.e. normally the servers in the first group are used in a way like above, and only when no replies are received from those, the second group is consulted.
That way, it is possible to configure the ISP resolvers to be normally used (e.g. 2*IPv4 and 2*IPv6), but have a fallback to resolvers like Google or Cloudflare, or a DNS via an LTE fallback for example.

---
### Author: Unknown
Date: Unknown

The cache size is default, 2048, 346 items recently. Looking into the ip/dns output though, it seems, that the cache is full .....
The strange thing is your device shows 2MB of used cache for 346 DNS entries. This is unreasonable large (>5kB/entry).
As an example, the DNS cache of my RB5009 currently consumes about 300kB for ca. 600 entries (ca 0.5kB/entry).

---
### Author: Unknown
Date: Unknown

Hi! I noticed that Adlist does not work after reboot (saved locally on usb). It does not load automatically. Name count = 0. No errors. It starts working after the RELOAD command. On 7.16 it worked automatically after rebooting the router with the same file and media.

---
### Author: Unknown
Date: Unknown

Just upgraded from 7.16.2 hoping to kill a problem with watchdog timer reboots on my CRS328-24P-4S+.
Started using my SFP+ ports after getting fiber internet (capable of 5Gb/sec, set up for 2Gb/s).
I have three 10Gb copper SFP+ inserts and have discovered that almost any link down event on them will trigger watchdog timer reboot (pretty quickly).  While watching the serial console, you see this, with no intervening messages:
Code:
Select all
[admin@Turmels of Fayetteville] /ip/dhcp-server/lease> 
BootROM 1.41
Booting from SPI flash
BootROM: Image checksum verification PASSED


RouterBOOT booter 7.17

CRS328-24P-4S+

CPU frequency: 800 MHz
  Memory size: 512 MiB
 Storage size:  16 MiB

Press Ctrl+E to enter etherboot mode
Press any key within 2 seconds to enter setup..

loading kernel... OK
setting up elf image... OK
jumping to kernel code
followed shortly by a new login prompt.
After login, the banner is followed by a new log entry of this format:
Code:
Select all
system,error,critical router was rebooted without proper shutdown by watchdog timer
When I first encountered this, I noticed that the SFP+ was ancient--2012--so I replaced it with a new one, and added another new one, both from CableMatters, dated Feb 2024.  No change in behavior.  Link down on either interface triggers the reboot.
My config:
Code:
Select all
# 2025-01-21 17:14:56 by RouterOS 7.17
# software id = MJ1C-VXZR
#
# model = CRS328-24P-4S+
# serial number = C7810B2D860A
/interface bridge
add admin-mac=C4:AD:34:9A:7E:10 auto-mac=no comment="Main Switch w/ VLANs" \
    ingress-filtering=no name=br0 port-cost-mode=short vlan-filtering=yes
/interface ethernet
set [ find default-name=ether1 ] comment=\
    "Living Rm South Wall at Stairs Lower Port" l2mtu=10218 mtu=9216
set [ find default-name=ether2 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether3 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether4 ] comment="Dining Rm West Wall Solo Port" \
    l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether5 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether6 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether7 ] comment="Dining Rm East Wall Upper Port" \
    l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether8 ] comment="Dining Rm East Wall Center Port" \
    l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether9 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether10 ] comment=\
    "Living Rm South Wall West Right Port" l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether11 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether12 ] comment="Man Cave East Wall Upper Port" \
    l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether13 ] comment="Foyer/Hall East Wall Red" l2mtu=\
    10218 mtu=9216
set [ find default-name=ether14 ] comment="Foyer/Hall East Wall White" l2mtu=\
    10218 mtu=9216 poe-out=off
set [ find default-name=ether15 ] comment=Unallocated l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether16 ] comment="Brutus LAN1" l2mtu=10218 mtu=9216 \
    poe-out=off
set [ find default-name=ether17 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether18 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether19 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether20 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether21 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether22 ] comment="Unallocated PoE" l2mtu=10218 mtu=\
    9216
set [ find default-name=ether23 ] comment="Living Rm West B (Mantel) BluRay" \
    l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=ether24 ] comment=\
    "Living Rm West A (Mantel) Television" l2mtu=10218 mtu=9216 poe-out=off
set [ find default-name=sfp-sfpplus1 ] comment="Brutus Trunk" l2mtu=10218 \
    mtu=9216 sfp-ignore-rx-los=yes
set [ find default-name=sfp-sfpplus2 ] comment=\
    "Man Cave East Wall Middle Port (Trunk)" l2mtu=10218 mtu=9216 \
    sfp-ignore-rx-los=yes
set [ find default-name=sfp-sfpplus3 ] comment="AT&T Fiber Uplink 5Gb" l2mtu=\
    10218 mtu=9216 sfp-ignore-rx-los=yes
set [ find default-name=sfp-sfpplus4 ] comment=Unallocated l2mtu=10218 mtu=\
    9216 sfp-ignore-rx-los=yes
/interface ovpn-client
add certificate="Home VPN" comment="AutoPros Road Warrior via OpenVPN" \
    connect-to=router.automation-pros.com mac-address=FE:0D:63:23:59:A1 name=\
    AutoProsVPN port=1195 use-peer-dns=no user=vpnuser \
    verify-server-certificate=yes
/interface vlan
add comment="Household LAN for DHCP Server" interface=br0 name=vlan1 vlan-id=\
    1
add comment="AT&T Fiber WAN for DHCP Client" interface=br0 name=vlan2 \
    vlan-id=2
/interface list
add comment="Switch to Switch ports" name=TRUNK
add comment="Upstream Network" name=WAN
add comment=Household name=LAN
add comment=Trusted name=TUNNEL
/interface lte apn
set [ find default=yes ] ip-type=ipv4 use-network-apn=no
/ip pool
add comment="Household Address Pool" name=dhcp_pool0 ranges=\
    192.168.20.200-192.168.20.249
/ip dhcp-server
add address-pool=dhcp_pool0 authoritative=after-2sec-delay comment=\
    "Household Pool" interface=vlan1 name=House
/ip smb users
set [ find default=yes ] disabled=yes
/port
set 0 name=serial0
/routing bgp template
set default disabled=no output.network=bgp-networks
/routing ospf instance
add disabled=no name=default-v2
/routing ospf area
add disabled=yes instance=default-v2 name=backbone-v2
/interface bridge port
add bridge=br0 comment="Living Rm South Wall at Stairs Lower Port" \
    frame-types=admit-only-untagged-and-priority-tagged interface=ether1 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether2 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether3 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Dining Rm West Wall Solo Port" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether4 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether5 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether6 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Dining Rm East Wall Upper Port" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether7 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Dining Rm East Wall Center Port" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether8 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether9 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Living Rm South Wall West Right Port" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether10 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether11 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Man Cave East Wall Upper Port (on hold)" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether12 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Foyer/Hall East Wall Red" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether13 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Foyer/Hall East Wall White" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether14 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment=Unallocated frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether15 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Brutus LAN1" frame-types=admit-only-vlan-tagged \
    interface=ether16 internal-path-cost=10 path-cost=10
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether17 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether18 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether19 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether20 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether21 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Unallocated PoE" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether22 \
    internal-path-cost=10 path-cost=10 pvid=3
add bridge=br0 comment="Living Rm West B (Mantel) BluRay" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether23 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Living Rm West A (Mantel) Television" frame-types=\
    admit-only-untagged-and-priority-tagged interface=ether24 \
    internal-path-cost=10 path-cost=10
add bridge=br0 comment="Brutus Trunk" frame-types=admit-only-vlan-tagged \
    interface=sfp-sfpplus1 internal-path-cost=10 path-cost=10
add bridge=br0 comment="Man Cave East Wall Middle Port (Trunk)" frame-types=\
    admit-only-vlan-tagged interface=sfp-sfpplus2 internal-path-cost=10 \
    path-cost=10
add bridge=br0 comment="AT&T Fiber Uplink 5Gb" frame-types=\
    admit-only-untagged-and-priority-tagged interface=sfp-sfpplus3 \
    internal-path-cost=10 path-cost=10 pvid=2
add bridge=br0 comment="Man Cave East Wall Upper Port" frame-types=\
    admit-only-untagged-and-priority-tagged interface=sfp-sfpplus4 \
    internal-path-cost=10 path-cost=10
/ip firewall connection tracking
set udp-timeout=10s
/ip neighbor discovery-settings
set discover-interface-list=!dynamic
/ip settings
set max-neighbor-entries=8192
/ipv6 settings
set disable-ipv6=yes
/interface bridge vlan
add bridge=br0 comment="Household Default Network" tagged=\
    br0,ether16,sfp-sfpplus1,sfp-sfpplus2,sfp-sfpplus4 vlan-ids=1-4094
/interface list member
add comment="AT&T Fiber Uplink" interface=vlan2 list=WAN
add comment=Household interface=vlan1 list=LAN
add comment=Trusted interface=AutoProsVPN list=TUNNEL
/interface ovpn-server server
add auth=sha1,md5 mac-address=FE:41:32:50:C0:27 name=ovpn-server1
/ip address
add address=192.168.20.254/24 comment="House LAN" interface=vlan1 network=\
    192.168.20.0
/ip dhcp-client
add comment="AT&T Fiber Delegate" interface=vlan2
/ip dhcp-server lease
add address=192.168.20.161 mac-address=FE:54:00:FA:00:01
add address=192.168.20.160 mac-address=D4:93:90:4E:3D:97
/ip dhcp-server network
add address=192.168.20.0/24 comment=Household gateway=192.168.20.254 netmask=\
    24
/ip dns
set allow-remote-requests=yes cache-size=32768KiB
/ip dns adlist
add ssl-verify=no url=\
    https://www.automation-pros.com/autopros-unified-hosts.txt
add ssl-verify=no url="https://raw.githubusercontent.com/StevenBlack/hosts/mas\
    ter/alternates/gambling-porn/hosts"
/ip dns static
add address=192.168.19.1 name=polaris.automation-pros.com type=A
add address=192.168.19.1 name=ks.automation-pros.com type=A
add address=192.168.19.2 name=orion.automation-pros.com type=A
add address=192.168.19.3 name=superm.automation-pros.com type=A
add address=192.168.19.4 name=wap54g.automation-pros.com type=A
add address=192.168.19.5 name=alliedtelesis.automation-pros.com type=A
add address=192.168.19.6 name=prosafe.automation-pros.com type=A
add address=192.168.19.7 name=intellinet.automation-pros.com type=A
add address=192.168.19.8 name=gs108pe.automation-pros.com type=A
add address=192.168.19.9 name=ignfastui.automation-pros.com type=A
add address=192.168.19.11 name=ceg-grn.automation-pros.com type=A
add address=192.168.19.20 name=plc1.automation-pros.com type=A
add address=192.168.19.21 name=ge364.automation-pros.com type=A
add address=192.168.19.22 name=mtscale.automation-pros.com type=A
add address=192.168.19.23 name=vivotek1.automation-pros.com type=A
add address=192.168.19.27 name=nport.automation-pros.com type=A
add address=192.168.19.28 name=cp5225.automation-pros.com type=A
add address=192.168.19.29 name=p1000.automation-pros.com type=A
add address=192.168.19.40 name=office790.automation-pros.com type=A
add address=192.168.19.41 name=tagimporter.automation-pros.com type=A
add address=192.168.19.46 name=office796.automation-pros.com type=A
add address=192.168.19.48 name=office798.automation-pros.com type=A
add address=192.168.19.50 name=office800.automation-pros.com type=A
add address=192.168.19.51 name=pi8.automation-pros.com type=A
add address=192.168.19.52 name=office7912.automation-pros.com type=A
add address=192.168.19.53 name=office80x.automation-pros.com type=A
add address=192.168.19.55 name=rmaster.automation-pros.com type=A
add address=192.168.19.56 name=rbackup.automation-pros.com type=A
add address=192.168.19.57 name=borgdb.automation-pros.com type=A
add address=192.168.19.58 name=hbgw.automation-pros.com type=A
add address=192.168.19.59 name=hbdb.automation-pros.com type=A
add address=192.168.19.60 name=hbio.automation-pros.com type=A
add address=192.168.19.64 name=ptgw.automation-pros.com type=A
add address=192.168.19.65 name=ptdb.automation-pros.com type=A
add address=192.168.19.66 name=moxa.automation-pros.com type=A
add address=192.168.19.67 name=densogw.automation-pros.com type=A
add address=192.168.19.68 name=densodb.automation-pros.com type=A
add address=192.168.19.70 name=zeus.automation-pros.com type=A
add address=192.168.19.73 name=athena.automation-pros.com type=A
add address=192.168.19.74 name=armdev.automation-pros.com type=A
add address=192.168.19.75 name=zm.automation-pros.com type=A
add address=192.168.19.85 name=albint-fakeio.automation-pros.com type=A
add address=192.168.19.86 name=albint8115.automation-pros.com type=A
add address=192.168.19.87 name=polaris81y.automation-pros.com type=A
add address=192.168.19.88 name=superm81x.automation-pros.com type=A
add address=192.168.19.89 name=edgeiiot.automation-pros.com type=A
add address=192.168.19.90 name=edgepanel.automation-pros.com type=A
add address=192.168.19.139 name=kv8k.automation-pros.com type=A
add address=192.168.19.146 name=okic830.automation-pros.com type=A
add address=192.168.19.148 name=bro3075.automation-pros.com type=A
add address=192.168.19.160 name=grim-enp24s0.dhcp.automation-pros.com type=A
add address=192.168.19.161 name=porthos-office1.dhcp.automation-pros.com \
    type=A
add address=192.168.19.162 name=grim-office1.dhcp.automation-pros.com type=A
add address=192.168.19.254 name=mt354.automation-pros.com type=A
add address=192.168.20.1 name=r7000.turmel.org type=A
add address=192.168.20.2 name=brutus.turmel.org type=A
add address=192.168.20.160 name=grim-enp24s0.dhcp.turmel.org type=A
add address=192.168.20.161 name=porthos-home1.dhcp.turmel.org type=A
add address=192.168.20.162 name=grim-home1.dhcp.turmel.org type=A
add address=192.168.20.253 name=u6pro.turmel.org type=A
add address=192.168.20.254 name=mt328.turmel.org type=A
add address=10.1.1.1 name=nano-l320erm.automation-pros.com type=A
add address=10.1.1.150 name=nano-ocean.automation-pros.com type=A
add address=10.1.1.250 name=nano-porthos.automation-pros.com type=A
add address=10.1.1.251 name=nano-aramis.automation-pros.com type=A
add address=192.168.70.2 name=vlan9.porthos.automation-pros.com type=A
add address=192.168.70.3 name=vlan9.polaris.automation-pros.com type=A
add address=192.168.70.19 name=ceg-grn-db.automation-pros.com type=A
add address=192.168.70.27 name=srv02.greenstone.ceg-engineers.com type=A
add address=192.168.70.28 name=ppc01.greenstone.ceg-engineers.com type=A
add address=192.168.70.35 name=env01.greenstone.ceg-engineers.com type=A
add address=192.168.70.36 name=env02.greenstone.ceg-engineers.com type=A
add address=192.168.70.37 name=env03.greenstone.ceg-engineers.com type=A
add address=192.168.70.35 name=env04.greenstone.ceg-engineers.com type=A
add address=192.168.70.141 name=r30bat01.greenstone.ceg-engineers.com type=A
add address=192.168.70.142 name=r30bat02.greenstone.ceg-engineers.com type=A
add address=192.168.70.143 name=r30bat03.greenstone.ceg-engineers.com type=A
add address=192.168.70.144 name=r30bat04.greenstone.ceg-engineers.com type=A
add address=192.168.70.145 name=r30bat05.greenstone.ceg-engineers.com type=A
add address=192.168.70.146 name=r30bat06.greenstone.ceg-engineers.com type=A
add address=192.168.70.147 name=r30bat07.greenstone.ceg-engineers.com type=A
add address=192.168.71.3 name=inv01.greenstone.ceg-engineers.com type=A
add address=192.168.71.4 name=inv02.greenstone.ceg-engineers.com type=A
add address=192.168.71.5 name=inv03.greenstone.ceg-engineers.com type=A
add address=192.168.71.6 name=inv04.greenstone.ceg-engineers.com type=A
add address=192.168.71.7 name=inv05.greenstone.ceg-engineers.com type=A
add address=192.168.71.8 name=inv06.greenstone.ceg-engineers.com type=A
add address=192.168.71.9 name=inv07.greenstone.ceg-engineers.com type=A
add address=192.168.71.132 name=trk01.greenstone.ceg-engineers.com type=A
add address=192.168.71.133 name=trk02.greenstone.ceg-engineers.com type=A
add address=192.168.71.134 name=trk03.greenstone.ceg-engineers.com type=A
add address=192.168.71.135 name=trk04.greenstone.ceg-engineers.com type=A
add address=192.168.71.136 name=trk05.greenstone.ceg-engineers.com type=A
add address=192.168.71.137 name=trk06.greenstone.ceg-engineers.com type=A
add address=192.168.71.138 name=trk07.greenstone.ceg-engineers.com type=A
add address=192.168.71.139 name=trk08.greenstone.ceg-engineers.com type=A
add address=192.168.71.140 name=trk09.greenstone.ceg-engineers.com type=A
add address=192.168.71.141 name=trk10.greenstone.ceg-engineers.com type=A
add address=192.168.71.142 name=trk11.greenstone.ceg-engineers.com type=A
add address=192.168.71.143 name=trk12.greenstone.ceg-engineers.com type=A
add address=192.168.71.144 name=trk13.greenstone.ceg-engineers.com type=A
add address=192.168.71.145 name=trk14.greenstone.ceg-engineers.com type=A
add address=10.16.7.2 name=lab-l72.automation-pros.com type=A
add address=10.16.7.3 name=lab-l24.automation-pros.com type=A
add address=10.16.7.4 name=lab-l320erm.automation-pros.com type=A
add address=10.16.7.5 name=lab-l81e.automation-pros.com type=A
add address=10.16.7.6 name=lab-drum.automation-pros.com type=A
add address=10.16.7.7 name=lab-gong.automation-pros.com type=A
add address=10.16.7.9 name=lab-fastui.automation-pros.com type=A
add address=10.16.7.10 name=lab-point-aent.automation-pros.com type=A
add address=10.16.7.11 name=lab-enet.automation-pros.com type=A
add address=10.16.7.12 name=lab-enbt.automation-pros.com type=A
add address=10.16.7.19 name=lab-bango.automation-pros.com type=A
add address=10.16.7.20 name=lab-flute.automation-pros.com type=A
add address=10.16.7.26 name=lab-zeus.automation-pros.com type=A
add address=10.16.7.27 name=lab-vision.automation-pros.com type=A
add address=10.16.7.28 name=lab-athena.automation-pros.com type=A
add address=10.16.7.34 name=lab-densogw.automation-pros.com type=A
add address=10.16.7.35 name=lab-superm81x.automation-pros.com type=A
add address=10.16.7.36 name=lab-polaris81y.automation-pros.com type=A
add address=10.16.7.40 name=lab-porthos79x.automation-pros.com type=A
add address=10.16.7.41 name=lab-porthos80x.automation-pros.com type=A
add address=10.16.7.42 name=lab-porthos81x.automation-pros.com type=A
add address=10.16.7.43 name=lab-porthos81y.automation-pros.com type=A
add address=10.16.7.44 name=lab-porthos81z.automation-pros.com type=A
add address=10.16.7.51 name=lab-m850.automation-pros.com type=A
add address=10.16.7.89 name=lab-edgeiiot.automation-pros.com type=A
add address=10.16.7.90 name=lab-edgepanel.automation-pros.com type=A
add address=10.16.7.235 name=lab-t2200.automation-pros.com type=A
add address=10.16.7.240 name=lab-corvus.automation-pros.com type=A
add address=10.16.7.243 name=lab-aramis.automation-pros.com type=A
add address=10.16.7.252 name=at-lab.automation-pros.com type=A
add address=10.16.7.253 name=tmachine.automation-pros.com type=A
add address=192.168.31.3 name=superm81x.zm.automation-pros.com type=A
add address=192.168.31.10 name=backN.zm.automation-pros.com type=A
add address=192.168.31.11 name=backSW.zm.automation-pros.com type=A
add address=192.168.31.12 name=backPTZ.zm.automation-pros.com type=A
add address=192.168.31.13 name=frontNE.zm.automation-pros.com type=A
add address=192.168.31.14 name=frontS.zm.automation-pros.com type=A
add address=172.16.70.129 name=lab-en2t.automation-pros.com type=A
add address=172.16.71.89 name=lab2-edgeiiot.automation-pros.com type=A
add address=172.16.71.90 name=lab2-edgepanel.automation-pros.com type=A
add address=172.16.71.252 name=lab-en3tr.automation-pros.com type=A
/ip firewall address-list
add address=0.0.0.0/8 comment=RFC6890 list=no_forward_ipv4
add address=169.254.0.0/16 comment=RFC6890 list=no_forward_ipv4
add address=224.0.0.0/4 comment=Multicast list=no_forward_ipv4
add address=255.255.255.255 comment=RFC6890 list=no_forward_ipv4
add address=192.168.20.0/24 comment="Home Local Network" list=\
    local_ranges_ipv4
add address=127.0.0.0/8 comment=RFC6890 list=bad_ipv4
add address=192.0.0.0/24 comment=RFC6890 list=bad_ipv4
add address=192.0.2.0/24 comment="RFC6890 documentation" list=bad_ipv4
add address=198.51.100.0/24 comment="RFC6890 documentation" list=bad_ipv4
add address=203.0.113.0/24 comment="RFC6890 documentation" list=bad_ipv4
add address=240.0.0.0/4 comment="RFC6890 reserved" list=bad_ipv4
add address=0.0.0.0/8 comment=RFC6890 list=not_global_ipv4
add address=10.0.0.0/8 comment=RFC6890 list=not_global_ipv4
add address=100.64.0.0/10 comment=RFC6890 list=not_global_ipv4
add address=169.254.0.0/16 comment=RFC6890 list=not_global_ipv4
add address=172.16.0.0/12 comment=RFC6890 list=not_global_ipv4
add address=192.0.0.0/29 comment=RFC6890 list=not_global_ipv4
add address=192.168.0.0/16 comment=RFC6890 list=not_global_ipv4
add address=198.18.0.0/15 comment="RFC6890 benchmark" list=not_global_ipv4
add address=255.255.255.255 comment=RFC6890 list=not_global_ipv4
add address=224.0.0.0/4 comment=multicast list=bad_src_ipv4
add address=255.255.255.255 comment=RFC6890 list=bad_src_ipv4
add address=0.0.0.0/8 comment=RFC6890 list=bad_dst_ipv4
add address=224.0.0.0/4 comment=RFC6890 list=bad_dst_ipv4
/ip firewall filter
add action=accept chain=input comment="Accept ICMP after RAW" protocol=icmp
add action=accept chain=input comment="Accept established,related,untracked" \
    connection-state=established,related,untracked
add action=drop chain=input comment="Drop all not coming from LAN" disabled=\
    yes in-interface-list=!LAN
add action=accept chain=forward comment=\
    "Accept all that matches IPSec policy" disabled=yes ipsec-policy=in,ipsec
add action=fasttrack-connection chain=forward comment=fasttrack \
    connection-state=established,related hw-offload=yes
add action=accept chain=forward comment=\
    "Accept established,related, untracked" connection-state=\
    established,related,untracked
add action=drop chain=forward comment="Drop invalid" connection-state=invalid
add action=drop chain=forward comment=" drop all from WAN not DSTNATed" \
    connection-nat-state=!dstnat connection-state=new in-interface-list=WAN
add action=drop chain=forward comment="Drop bad forward IPs" \
    src-address-list=no_forward_ipv4
add action=drop chain=forward comment="Drop bad forward IPs" \
    dst-address-list=no_forward_ipv4
/ip firewall nat
add action=accept chain=srcnat comment="Accept all that matches IPSec policy" \
    disabled=yes ipsec-policy=out,ipsec
add action=masquerade chain=srcnat comment=Masquerade out-interface-list=WAN
/ip firewall raw
add action=drop chain=bad_tcp comment="TCP flag filter" protocol=tcp \
    tcp-flags=!fin,!syn,!rst,!ack
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    fin,syn
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    fin,rst
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    fin,!ack
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    fin,urg
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    syn,rst
add action=drop chain=bad_tcp comment="Bad TCP Flags" protocol=tcp tcp-flags=\
    rst,urg
add action=drop chain=bad_tcp comment="TCP port 0 drop" port=0 protocol=tcp
add action=accept chain=icmp4 comment="Echo reply" icmp-options=0:0 limit=\
    5,10:packet protocol=icmp
add action=accept chain=icmp4 comment="Net unreachable" icmp-options=3:0 \
    protocol=icmp
add action=accept chain=icmp4 comment="Host unreachable" icmp-options=3:1 \
    protocol=icmp
add action=accept chain=icmp4 comment="Protocol unreachable" icmp-options=3:2 \
    protocol=icmp
add action=accept chain=icmp4 comment="Port unreachable" icmp-options=3:3 \
    protocol=icmp
add action=accept chain=icmp4 comment="Fragmentation needed" icmp-options=3:4 \
    protocol=icmp
add action=accept chain=icmp4 comment=Echo icmp-options=8:0 limit=5,10:packet \
    protocol=icmp
add action=accept chain=icmp4 comment="Time exceeded " icmp-options=11:0-255 \
    protocol=icmp
add action=drop chain=icmp4 comment="Drop other icmp" protocol=icmp
add action=accept chain=prerouting comment="enable for transparent firewall" \
    disabled=yes
add action=accept chain=prerouting comment=\
    "Accept everything from Trusted Links" in-interface-list=TUNNEL \
    log-prefix="Accept Trusted Tunnels"
add action=accept chain=prerouting comment="Accept DHCP discover" \
    dst-address=255.255.255.255 dst-port=67 in-interface-list=LAN protocol=\
    udp src-address=0.0.0.0 src-port=68
add action=drop chain=prerouting comment="Drop bogon IP's" src-address-list=\
    bad_ipv4
add action=drop chain=prerouting comment="Drop bogon IP's" dst-address-list=\
    bad_ipv4
add action=drop chain=prerouting comment="Drop bogon IP's" src-address-list=\
    bad_src_ipv4
add action=drop chain=prerouting comment="Drop bogon IP's" dst-address-list=\
    bad_dst_ipv4
add action=drop chain=prerouting comment="Drop non global from WAN" disabled=\
    yes in-interface-list=WAN src-address-list=not_global_ipv4
add action=drop chain=prerouting comment="Drop forward to local lan from WAN" \
    disabled=yes dst-address-list=local_ranges_ipv4 in-interface-list=WAN
add action=drop chain=prerouting comment=\
    "Drop local if not from default IP range" in-interface-list=LAN \
    src-address-list=!local_ranges_ipv4
add action=drop chain=prerouting comment="Drop bad UDP" port=0 protocol=udp
add action=jump chain=prerouting comment="jump to ICMP chain" jump-target=\
    icmp4 protocol=icmp
add action=jump chain=prerouting comment="jump to TCP chain" jump-target=\
    bad_tcp protocol=tcp
add action=accept chain=prerouting comment="Accept everything else from LAN" \
    in-interface-list=LAN
add action=accept chain=prerouting comment="Accept everything else from WAN" \
    in-interface-list=WAN
add action=accept chain=prerouting comment="Allow SIP UDP" port=5060 \
    protocol=udp
add action=drop chain=prerouting comment="Drop the rest"
/ip ipsec profile
set [ find default=yes ] dpd-interval=2m dpd-maximum-failures=5
/ip smb shares
set [ find default=yes ] directory=/flash/pub
/ipv6 firewall address-list
add address=fe80::/10 comment="RFC6890 Linked-Scoped Unicast" list=\
    no_forward_ipv6
add address=ff00::/8 comment=Multicast list=no_forward_ipv6
add address=::1/128 comment="RFC6890 lo" list=bad_ipv6
add address=::ffff:0.0.0.0/96 comment="RFC6890 IPv4 mapped" list=bad_ipv6
add address=2001::/23 comment=RFC6890 list=bad_ipv6
add address=2001:db8::/32 comment="RFC6890 documentation" list=bad_ipv6
add address=2001:10::/28 comment="RFC6890 orchid" list=bad_ipv6
add address=::/96 comment="ipv4 compat" list=bad_ipv6
add address=100::/64 comment="RFC6890 Discard-only" list=not_global_ipv6
add address=2001::/32 comment="RFC6890 TEREDO" list=not_global_ipv6
add address=2001:2::/48 comment="RFC6890 Benchmark" list=not_global_ipv6
add address=fc00::/7 comment="RFC6890 Unique-Local" list=not_global_ipv6
add address=::/128 comment=Unspecified list=bad_dst_ipv6
add address=::/128 comment=Unspecified list=bad_src_ipv6
add address=ff00::/8 comment=Multicast list=bad_src_ipv6
/ipv6 firewall filter
add action=accept chain=input comment="Accept ICMPv6 after RAW" protocol=\
    icmpv6
add action=accept chain=input comment="Accept established,related,untracked" \
    connection-state=established,related,untracked
add action=accept chain=input comment="Accept UDP traceroute" dst-port=\
    33434-33534 protocol=udp
add action=accept chain=input comment=\
    "Accept DHCPv6-Client prefix delegation." dst-port=546 protocol=udp \
    src-address=fe80::/10
add action=accept chain=input comment="Accept IKE" dst-port=500,4500 \
    protocol=udp
add action=accept chain=input comment="Accept IPSec AH" protocol=ipsec-ah
add action=accept chain=input comment="Accept IPSec ESP" protocol=ipsec-esp
add action=drop chain=input comment="Drop all not coming from LAN" \
    in-interface-list=!LAN
add action=accept chain=forward comment=\
    "Accept established,related,untracked" connection-state=\
    established,related,untracked
add action=drop chain=forward comment="Drop invalid" connection-state=invalid
add action=drop chain=forward comment="Drop bad forward IPs" \
    src-address-list=no_forward_ipv6
add action=drop chain=forward comment="Drop bad forward IPs" \
    dst-address-list=no_forward_ipv6
add action=drop chain=forward comment="RFC4890 drop hop-limit=1" hop-limit=\
    equal:1 protocol=icmpv6
add action=accept chain=forward comment="Accept ICMPv6 after RAW" protocol=\
    icmpv6
add action=accept chain=forward comment="Accept HIP" protocol=139
add action=accept chain=forward comment="Accept IKE" dst-port=500,4500 \
    protocol=udp
add action=accept chain=forward comment="Accept AH" protocol=ipsec-ah
add action=accept chain=forward comment="Accept ESP" protocol=ipsec-esp
add action=accept chain=forward comment=\
    "Accept all that matches IPSec policy" ipsec-policy=in,ipsec
add action=drop chain=forward comment=\
    "Drop everything else not coming from LAN" in-interface-list=!LAN
/ipv6 firewall raw
add action=drop chain=icmp6 comment="RFC4890 drop ll if hop-limit!=255" \
    dst-address=fe80::/10 hop-limit=not-equal:255 protocol=icmpv6
add action=accept chain=icmp6 comment="Dst unreachable" icmp-options=1:0-255 \
    protocol=icmpv6
add action=accept chain=icmp6 comment="Packet too big" icmp-options=2:0-255 \
    protocol=icmpv6
add action=accept chain=icmp6 comment="Limit exceeded" icmp-options=3:0-1 \
    protocol=icmpv6
add action=accept chain=icmp6 comment="Bad header" icmp-options=4:0-2 \
    protocol=icmpv6
add action=accept chain=icmp6 comment="Mobile home agent address discovery" \
    icmp-options=144:0-255 protocol=icmpv6
add action=accept chain=icmp6 comment="Mobile home agent address discovery" \
    icmp-options=145:0-255 protocol=icmpv6
add action=accept chain=icmp6 comment="Mobile prefix solic" icmp-options=\
    146:0-255 protocol=icmpv6
add action=accept chain=icmp6 comment="Mobile prefix advert" icmp-options=\
    147:0-255 protocol=icmpv6
add action=accept chain=icmp6 comment="Echo request limit 5,10" icmp-options=\
    128:0-255 limit=5,10:packet protocol=icmpv6
add action=accept chain=icmp6 comment="Echo reply limit 5,10" icmp-options=\
    129:0-255 limit=5,10:packet protocol=icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 router solic limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=133:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 router advert limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=134:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 neighbor solic limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=135:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 neighbor advert limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=136:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 inverse ND solic limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=141:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=accept chain=icmp6 comment=\
    "RFC4890 inverse ND advert limit 5,10 only LAN" hop-limit=equal:255 \
    icmp-options=142:0-255 in-interface-list=LAN limit=5,10:packet protocol=\
    icmpv6
add action=drop chain=icmp6 comment="Drop other icmp" protocol=icmpv6
add action=accept chain=prerouting comment="Enable for transparent firewall" \
    disabled=yes
add action=accept chain=prerouting comment="RFC4291, section 2.7.1" \
    dst-address=ff02::1:ff00:0/104 icmp-options=135 protocol=icmpv6 \
    src-address=::/128
add action=drop chain=prerouting comment="Drop bogon IP's" src-address-list=\
    bad_ipv6
add action=drop chain=prerouting comment="Drop bogon IP's" dst-address-list=\
    bad_ipv6
add action=drop chain=prerouting comment="Drop packets with bad SRC ipv6" \
    src-address-list=bad_src_ipv6
add action=drop chain=prerouting comment="Drop packets with bad dst ipv6" \
    dst-address-list=bad_dst_ipv6
add action=drop chain=prerouting comment="Drop non global from WAN" \
    in-interface-list=WAN src-address-list=not_global_ipv6
add action=jump chain=prerouting comment="jump to ICMPv6 chain" jump-target=\
    icmp6 protocol=icmpv6
add action=accept chain=prerouting comment="Accept local multicast scope" \
    dst-address=ff02::/16
add action=drop chain=prerouting comment="Drop other multicast destinations" \
    dst-address=ff00::/8
add action=accept chain=prerouting comment="Accept everything else from WAN" \
    in-interface-list=WAN
add action=accept chain=prerouting comment="Accept everything else from LAN" \
    in-interface-list=LAN
add action=drop chain=prerouting comment="Drop the rest"
/routing bfd configuration
add disabled=no interfaces=all min-rx=200ms min-tx=200ms multiplier=5
/system clock
set time-zone-name=America/New_York
/system identity
set name="Turmels of Fayetteville"
/system note
set show-at-login=no
/system ntp client
set enabled=yes
/system ntp client servers
add address=north-america.pool.ntp.org
/system routerboard settings
set boot-device=nand-only
/system script
add comment="Copy Ether Port Comments to Bridge Ports" \
    dont-require-permissions=no name=fixbports owner=admin policy=\
    ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon source="/\
    interface bridge port\
    \n:foreach i in=[find] do={\
    \n  :local iface [get \$i interface]\
    \n  :local comment [/interface get [/interface find name=\$iface] comment]\
    \n  :put \"\$iface : \$comment\"\
    \n  set \$i comment=\$comment\
    \n}\
    \n"
add comment="Clear Firewall Rules" dont-require-permissions=yes name=\
    NoFirewall owner=admin policy=\
    ftp,reboot,read,write,policy,test,password,sniff,sensitive,romon source="#\
    \_Wipe all firewall rules and address lists\
    \n\
    \n/ip firewall filter remove [find dynamic=no]\
    \n/ip firewall nat remove [find dynamic=no]\
    \n/ip firewall raw remove [find dynamic=no]\
    \n/ipv6 firewall filter remove [find dynamic=no]\
    \n/ipv6 firewall nat remove [find dynamic=no]\
    \n/ipv6 firewall raw remove [find dynamic=no]\
    \n/ip firewall address-list remove [find dynamic=no]\
    \n/ipv6 firewall address-list remove [find dynamic=no]\
    \n"
/tool graphing interface
add interface=sfp-sfpplus3 store-on-disk=no
In the above, the two interfaces that I'm using to test link changes are sfp-sfpplus2 and sfp-sfpplus4.
I just attempted to generate supout.rif and it caused a reboot @ ~7%.
I just saw a spontaneous reboot. /:
I suspect it might be hardware, but I'm hoping others may have seen this....

---
### Author: Unknown
Date: Unknown

*) smb - stability improvements for client/server;
The SMB client run by Infuse player app on Apple TV stopped working. macOS native SMB client connects without problems.
Below are dissections from Wireshark.
Infuse:
Code:
Select all
--Request by Infuse--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x18, Canonicalized Pathnames, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...1 .... = Canonicalized Pathnames: Pathnames are canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc843, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Used, Extended Attributes, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .1.. .... = Long Names Used: Path names in request are long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..1. = Extended Attributes: Extended attributes are supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 0
        Process ID: 1344
        User ID: 0
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:31:13.155350300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by Infuse--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 99
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 28]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d5a10eba0dae463de64e00a9d6f28d86caf27f31cbee57633eee39494cbf27b6c601bf7ee95418c314a20508a331866661c4abd3b99240566b0f96e46bb3f036]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 4
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x00000045, DFS, LARGE MTU, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 0... = MULTI CHANNEL: This host does NOT support MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 51497ea5-5cef-b244-b964-6e8ce408a16f
        NegotiateContextOffset: 0x00000000
        NegotiateContextCount: 0
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_INSUFFICIENT_RESOURCES (0xc000009a)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 24]
        [Time from request: 0.000004000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: f4c7dbdcf3ecb837e5cb129c6cc7c78a3a6f3b2b56109787fd24bcdf2ce7ac44650bd5b25beafbb863ca3411f0f53ebfc1a15743abe42cd58eb4777cdc21ddc2]
        StructureSize: 0x0009
            0000 0000 0000 100. = Fixed Part Length: 4
            .... .... .... ...1 = Dynamic Part: True
        Error Context Count: 0
        Reserved: 0x00
        Byte Count: 0
        Error Data: 00
macOS's Finder:
Code:
Select all
--Request by macOS--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x08, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...0 .... = Canonicalized Pathnames: Pathnames are not canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc801, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .0.. .... = Long Names Used: Path names in request are not long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..0. = Extended Attributes: Extended attributes are not supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 65535
        Process ID: 1
        User ID: 65535
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.815501500 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by macOS--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 0
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 58]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d31c2830b42fa5c6603ae5e67d9fbbd519687ecc35f3a604d91d0b2cf677831d9ee858e922cf7f1e2fbd9e18b9c1fef59ddb991a3fe69433da1d3eac9afa60c8]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 5
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x0000007f, DFS, LEASING, LARGE MTU, MULTI CHANNEL, PERSISTENT HANDLES, DIRECTORY LEASING, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..1. = LEASING: This host supports LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...1 .... = PERSISTENT HANDLES: This host supports PERSISTENT HANDLES
            .... .... .... .... .... .... ..1. .... = DIRECTORY LEASING: This host supports DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 5918f3a6-8558-bf44-bce9-89cb9c46119a
        NegotiateContextOffset: 0x00000070
        NegotiateContextCount: 5
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)
        Dialect: SMB 3.1.1 (0x0311)
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: b2967270afec39d772b756b248b7e7f8c6868f28a5bd3dae84be2c94061cdd38
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 10
            Reserved: 00000000
            CipherCount: 4
            CipherId: AES-256-GCM (0x0004)
            CipherId: AES-256-CCM (0x0003)
            CipherId: AES-128-GCM (0x0002)
            CipherId: AES-128-CCM (0x0001)
        Negotiate Context: SMB2_COMPRESSION_CAPABILITIES 
            Type: SMB2_COMPRESSION_CAPABILITIES (0x0003)
            DataLength: 10
            Reserved: 00000000
            CompressionAlgorithmCount: 1
            Flags: 0x00000000
                .... .... .... .... .... .... .... ...0 = Chained: False
                0000 0000 0000 0000 0000 0000 0000 000. = Reserved: 0x00000000
            CompressionAlgorithmId: None (0x0000)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 6
            Reserved: 00000000
            SigningAlgorithmCount: 2
            SigningAlgorithmId: AES-GMAC (0x0002)
            SigningAlgorithmId: AES-CMAC (0x0001)
        Negotiate Context: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID 
            Type: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID (0x0005)
            DataLength: 58
            Reserved: 00000000
            Netname: Shared Movies._smb._tcp.local

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 54]
        [Time from request: 0.000007000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: 5c8cf3670d9ca5d3b91e2199ac05900e9dc87288dfab3e1ebf702d0fba52eaeafe46ae3070c36de4b1460af9540cd3ceeb601c97b62ba1d73ab22a9a011d192f]
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB 3.1.1 (0x0311)
        NegotiateContextCount: 3
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.820239300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        NegotiateContextOffset: 0x000000d0
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: edb44f22adfc8867776d42525d298d1ee4b228e0690e951e33ad271ab36e6f6a
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 4
            Reserved: 00000000
            CipherCount: 1
            CipherId: AES-128-GCM (0x0002)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 4
            Reserved: 00000000
            SigningAlgorithmCount: 1
            SigningAlgorithmId: AES-CMAC (0x0001)
SUP-176851
My SMB shares stopped successful authentication when accessed from any Android, iPhone, iPad, GoogleTV. It prompted me to enter the username and password, but never went through to the directory content and always asks for inputting the credentials.
However it still works from Windows 11 or Kali Linux. Invested several hours into troubleshooting without any luck. Decided to downgrade back to 7.16.2 and it worked right away.
Mikrotik team
, please take a good look on the new SMB implementation which you mark as
smb - stability improvements for client/server
, cause in reality it worsens the experience somehow.

---
### Author: Unknown
Date: Unknown

Regarding the watchdog stuff:
It surfaced a while ago that on many devices there is only one I2C-bus which is connected both to various "internal" components and to the SFP slots.
I2C is used to read the eeprom and diagnostic and stuff from SFP modules. However many SFP modules are "bad at I2C-ing", holding the bus seized/blocked for long amounts of time.
It was giving people false overheat alarms, for example, because the CPU was not receiving values from the external temperature sensor within the time limit.
Maybe your device has an external watchdog sitting on I2C as well, and so you're seeing kind of the reverse - the CPU is not sending the "still alive" signal to watchdog within time limit because the bus is blocked?

---
### Author: Unknown
Date: Unknown

What is the purpose and the use of "
authorized-public-key-hash
" on
device-mode
???

---
### Author: Unknown
Date: Unknown

I have upgraded one RBwAPG-5HacD2HnD from version 7.13.5 to 7.17 by uploading the required files (os + wifi-com-ac) and rebooting the device. After the update, the device stopped working because it couldn't start the OS (it boots with Etherboot mode). I have applied Netinstall with the same NPKs and now is working as expected.
Fortunately, the equipment was physically accessible and it was used as a backup router. If the problem had occurred with a more critical device, it could have been a very big issue. This is something that has happened to us in previous versions, and we have been unable to locate the cause of the error. As far as I understand, if the router does not have enough memory, the update gets canceled, but it does not get bricked like in this case...

---
### Author: Unknown
Date: Unknown

Why this do not work since 7.17??? (on all 7.16.2 and less, included v6, work)
Code:
Select all
/sys log action set [find] disk-file-name="/log"
(work without the /)
Those, and other points where can be set a path, with "/" work correctly:
Code:
Select all
/ip hotspot profile set [find default=yes] html-directory="/hotspot"
/interface wifi capsman set package-path="/package"
/interface lte settings set firmware-path="/firmware"
/tool sniffer set file-name="/pcap/sniffer.pcap"
/ip proxy set cache-path="/web-proxy"
/ip smb shares set [ find default=yes ] directory="/pub"

---
### Author: Unknown
Date: Unknown

Bug report: vlan ingress filtering set to no still broken with this release, at the very least on crs310 as confirmed by my tests, it literally has no effect.
Been broken since 7.16 (was working with 7.15).
Original report from the 7.16 release:
Quick report: on CRS310
Code:
Select all
ingress-filtering=no
on a bridge interface does not work anymore after an upgrade to 7.16, VLAN filtering seems to be enforced anyway (which is a problem for stuff like FTTx that often comes with funky VLANs dictated by ISPs who don't seem to care too much about RFCs).
I only tested this with the CRS310, this may or may not impact other devices, I have a couple RBs and CCRs as well, I'll test them when I have a minute.
Reverted back to 7.15.3, it works just fine.

---
### Author: Unknown
Date: Unknown

*) snmp - added wifi fields to MIKROTIK-MIB;
Where can I view the .mib-file? Which OIDs?
Did you get the new OIDs for wifi clients?

---
### Author: Unknown
Date: Unknown

@dag, I cannot reproduce same behavior. The ingress-filtering=no/yes works as expected.
My guess is that you are affected by some other switch/bridge change since v7.16, maybe this one?
*) bridge - added forward-reserved-addresses property which controls forwarding of MAC 01:80:C2:00:00:0x range (separated from "protocol-mode=none" functionality, disabled by default after upgrade);
Send supout.rif file to support, or create a separate topic.

---
### Author: Unknown
Date: Unknown

I see messages like these:
2025-01-22_14-57.png
Already reported that postive signal issue for registration table in ROS 7.16 via SUP-170583. Now I see these numbers in 7.17 in logs again.

---
### Author: Unknown
Date: Unknown

IKEv2 tunnels fail to establish after upgrading to 7.17 (between 7.17<->7.17 and 7.17<->7.16.2). However, 7.17 does establish IKEv2 with Huawei AR (same settings).
Rolling back to 7.16.2 does fix the issue.
Auth method is PSK, 7.17 peer sends "Delete" right after successful IKE_AUTH. Tested on both live RBs and GNS3 lab.
Am I the only one with this issue?
UPD /ip/ipsec/proposal enc-algorithms=
chacha20poly1305
doesn't work.

---
### Author: Unknown
Date: Unknown

Not sure if related to this release, started deploying Chateau Pro AX and noticing Canada 5G WIFI provisioning limits TX to 16 no matter what frequency you go with. Hap AX3 with same release doesnt do this. to get around this, have to set the frequency range and use a different country like US.

---
### Author: Unknown
Date: Unknown

Regarding the watchdog stuff:
... trim ...
However many SFP modules are "bad at I2C-ing", holding the bus seized/blocked for long amounts of time.
Sounds plausible.  I will procure some MikroTik native copper SFP+ transceivers and see if that makes a difference.

---
### Author: Unknown
Date: Unknown

Regarding the watchdog stuff:
... trim ...
However many SFP modules are "bad at I2C-ing", holding the bus seized/blocked for long amounts of time.
Sounds plausible.  I will procure some MikroTik native copper SFP+ transceivers and see if that makes a difference.
It will!
I've 3 original MT S+RJ10 with ROS 7.17 in use without any problems 😉

---
### Author: Unknown
Date: Unknown

Bug report: vlan ingress filtering set to no still broken with this release, at the very least on crs310 as confirmed by my tests, it literally has no effect.
Been broken since 7.16 (was working with 7.15).
Original report from the 7.16 release:
Quick report: on CRS310
Code:
Select all
ingress-filtering=no
on a bridge interface does not work anymore after an upgrade to 7.16, VLAN filtering seems to be enforced anyway (which is a problem for stuff like FTTx that often comes with funky VLANs dictated by ISPs who don't seem to care too much about RFCs).
I only tested this with the CRS310, this may or may not impact other devices, I have a couple RBs and CCRs as well, I'll test them when I have a minute.
Reverted back to 7.15.3, it works just fine.
oh man, mikrotik, those are basics... I also had a lot of troubles because a lifetime mikrotik prof was trying to teach my vlan concepts on mikrotik.
He failed all the way, and I know that he is 100% familiar with vlan on mikrotik, because he administered such routers (nearly) since they exist.
He said "it's impossible that this doesn't work" a few hundred times.
Why, mikrotik, why...?
I want to replace around 15 cisco switches with mikrotik in my company, but honestly, if the stable-version is still a sandbox for mikrotik, I can forget this plan!! This is more than frustrating, cause I planned this project in sum for over a year now (not fulltime o.c.)
Seems as if it's better to stay with cisco...?!

---
### Author: Unknown
Date: Unknown

SMB shares stopped working
It hits me too after upgrade from 7.1x to 7.17.
I removed shares and users, disabled the service and reconfiguring everything from scratch and now works fine again.
I hope this help.

---
### Author: Unknown
Date: Unknown

If this is also a bug list - the Chateau-LTE is affected by this change update:
*) winbox - hide LTE "External Antenna" menu for devices without switchable antenna option;
You now no longer see the settings button....
These devices have the ability to add external LTE antenna's.
Now you have to run the command manually:  /interface/lte/settings/set external-antenna=both
Please someone fix / address this?
TO be Clear: this is the Chateau-LTE6-US D53G-5HacD2HnD-TC&EG06-A.

---
### Author: Unknown
Date: Unknown

No DHCP interim updates after upgrade to to 7.17.

---
### Author: Unknown
Date: Unknown

I have the same issue after upgrading to the latest. SMB stopped working. I even upgraded to 7.18 Beta2, and that did not did the trick either.
This is what I see in the packet captures:
...E.SMBr.....C...............'......"..NT LM 0.12..SMB 2.002..SMB 2.???.
.....SMB@...........................................................A.................................@...@.|(...l............J.....`H..+......>0<..0..
+.....7..
.*0(.&.$not_defined_in_RFC4178@please_ignore
...l.SMB@.........c.................................................$.......E....]z-8.Ag.._q..s.................
...I.SMB@...........................................................	........
The SMB client run by Infuse player app on Apple TV stopped working. macOS native SMB client connects without problems.
Below are dissections from Wireshark.
Infuse:
Code:
Select all
--Request by Infuse--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x18, Canonicalized Pathnames, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...1 .... = Canonicalized Pathnames: Pathnames are canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc843, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Used, Extended Attributes, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .1.. .... = Long Names Used: Path names in request are long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..1. = Extended Attributes: Extended attributes are supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 0
        Process ID: 1344
        User ID: 0
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:31:13.155350300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by Infuse--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 99
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 28]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d5a10eba0dae463de64e00a9d6f28d86caf27f31cbee57633eee39494cbf27b6c601bf7ee95418c314a20508a331866661c4abd3b99240566b0f96e46bb3f036]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 4
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x00000045, DFS, LARGE MTU, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 0... = MULTI CHANNEL: This host does NOT support MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 51497ea5-5cef-b244-b964-6e8ce408a16f
        NegotiateContextOffset: 0x00000000
        NegotiateContextCount: 0
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_INSUFFICIENT_RESOURCES (0xc000009a)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 24]
        [Time from request: 0.000004000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: f4c7dbdcf3ecb837e5cb129c6cc7c78a3a6f3b2b56109787fd24bcdf2ce7ac44650bd5b25beafbb863ca3411f0f53ebfc1a15743abe42cd58eb4777cdc21ddc2]
        StructureSize: 0x0009
            0000 0000 0000 100. = Fixed Part Length: 4
            .... .... .... ...1 = Dynamic Part: True
        Error Context Count: 0
        Reserved: 0x00
        Byte Count: 0
        Error Data: 00
macOS's Finder:
Code:
Select all
--Request by macOS--> SMB (Server Message Block Protocol)
    SMB Header
        Server Component: SMB
        SMB Command: Negotiate Protocol (0x72)
        NT Status: STATUS_SUCCESS (0x00000000)
        Flags: 0x08, Case Sensitivity
            0... .... = Request/Response: Message is a request to the server
            .0.. .... = Notify: Notify client only on open
            ..0. .... = Oplocks: OpLock not requested/granted
            ...0 .... = Canonicalized Pathnames: Pathnames are not canonicalized
            .... 1... = Case Sensitivity: Path names are caseless
            .... ..0. = Receive Buffer Posted: Receive buffer has not been posted
            .... ...0 = Lock and Read: Lock&Read, Write&Unlock are not supported
        Flags2: 0xc801, Unicode Strings, Error Code Type, Extended Security Negotiation, Long Names Allowed
            1... .... .... .... = Unicode Strings: Strings are Unicode
            .1.. .... .... .... = Error Code Type: Error codes are NT error codes
            ..0. .... .... .... = Execute-only Reads: Don't permit reads if execute-only
            ...0 .... .... .... = Dfs: Don't resolve pathnames with Dfs
            .... 1... .... .... = Extended Security Negotiation: Extended security negotiation is supported
            .... .0.. .... .... = Reparse Path: The request does not use a @GMT reparse path
            .... .... .0.. .... = Long Names Used: Path names in request are not long file names
            .... .... ...0 .... = Security Signatures Required: Security signatures are not required
            .... .... .... 0... = Compressed: Compression is not requested
            .... .... .... .0.. = Security Signatures: Security signatures are not supported
            .... .... .... ..0. = Extended Attributes: Extended attributes are not supported
            .... .... .... ...1 = Long Names Allowed: Long file names are allowed in the response
        Process ID High: 0
        Signature: 0000000000000000
        Reserved: 0000
        Tree ID: 65535
        Process ID: 1
        User ID: 65535
        Multiplex ID: 0
    Negotiate Protocol Request (0x72)
        Word Count (WCT): 0
        Byte Count (BCC): 34
        Requested Dialects
            Dialect: NT LM 0.12
                Buffer Format: Dialect (2)
                Name: NT LM 0.12
            Dialect: SMB 2.002
                Buffer Format: Dialect (2)
                Name: SMB 2.002
            Dialect: SMB 2.???
                Buffer Format: Dialect (2)
                Name: SMB 2.???

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 0
        Reserved: 0x00000000
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
    Negotiate Protocol Response (0x00)
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB2 wildcard (0x02ff)
        Reserved: 0
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.815501500 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        Reserved2: 0x00000000

--Request by macOS--> SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        Channel Sequence: 0
        Reserved: 0000
        Command: Negotiate Protocol (0)
        Credits requested: 0
        Flags: 0x00000000
            .... .... .... .... .... .... .... ...0 = Response: This is a REQUEST
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response in: 58]
    Negotiate Protocol Request (0x00)
        [Preauth Hash: d31c2830b42fa5c6603ae5e67d9fbbd519687ecc35f3a604d91d0b2cf677831d9ee858e922cf7f1e2fbd9e18b9c1fef59ddb991a3fe69433da1d3eac9afa60c8]
        StructureSize: 0x0024
            0000 0000 0010 010. = Fixed Part Length: 18
            .... .... .... ...0 = Dynamic Part: False
        Dialect count: 5
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Reserved: 0000
        Capabilities: 0x0000007f, DFS, LEASING, LARGE MTU, MULTI CHANNEL, PERSISTENT HANDLES, DIRECTORY LEASING, ENCRYPTION
            .... .... .... .... .... .... .... ...1 = DFS: This host supports DFS
            .... .... .... .... .... .... .... ..1. = LEASING: This host supports LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...1 .... = PERSISTENT HANDLES: This host supports PERSISTENT HANDLES
            .... .... .... .... .... .... ..1. .... = DIRECTORY LEASING: This host supports DIRECTORY LEASING
            .... .... .... .... .... .... .1.. .... = ENCRYPTION: This host supports ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Client Guid: 5918f3a6-8558-bf44-bce9-89cb9c46119a
        NegotiateContextOffset: 0x00000070
        NegotiateContextCount: 5
        Reserved: 0000
        Dialect: SMB 2.0.2 (0x0202)
        Dialect: SMB 2.1 (0x0210)
        Dialect: SMB 3.0 (0x0300)
        Dialect: SMB 3.0.2 (0x0302)
        Dialect: SMB 3.1.1 (0x0311)
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: b2967270afec39d772b756b248b7e7f8c6868f28a5bd3dae84be2c94061cdd38
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 10
            Reserved: 00000000
            CipherCount: 4
            CipherId: AES-256-GCM (0x0004)
            CipherId: AES-256-CCM (0x0003)
            CipherId: AES-128-GCM (0x0002)
            CipherId: AES-128-CCM (0x0001)
        Negotiate Context: SMB2_COMPRESSION_CAPABILITIES 
            Type: SMB2_COMPRESSION_CAPABILITIES (0x0003)
            DataLength: 10
            Reserved: 00000000
            CompressionAlgorithmCount: 1
            Flags: 0x00000000
                .... .... .... .... .... .... .... ...0 = Chained: False
                0000 0000 0000 0000 0000 0000 0000 000. = Reserved: 0x00000000
            CompressionAlgorithmId: None (0x0000)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 6
            Reserved: 00000000
            SigningAlgorithmCount: 2
            SigningAlgorithmId: AES-GMAC (0x0002)
            SigningAlgorithmId: AES-CMAC (0x0001)
        Negotiate Context: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID 
            Type: SMB2_NETNAME_NEGOTIATE_CONTEXT_ID (0x0005)
            DataLength: 58
            Reserved: 00000000
            Netname: Shared Movies._smb._tcp.local

<--Reply by RouterOS-- SMB2 (Server Message Block Protocol version 2)
    SMB2 Header
        ProtocolId: 0xfe534d42
        Header Length: 64
        Credit Charge: 0
        NT Status: STATUS_SUCCESS (0x00000000)
        Command: Negotiate Protocol (0)
        Credits granted: 1
        Flags: 0x00000001, Response
            .... .... .... .... .... .... .... ...1 = Response: This is a RESPONSE
            .... .... .... .... .... .... .... ..0. = Async command: This is a SYNC command
            .... .... .... .... .... .... .... .0.. = Chained: This pdu is NOT a chained command
            .... .... .... .... .... .... .... 0... = Signing: This pdu is NOT signed
            .... .... .... .... .... .... .000 .... = Priority: This pdu does NOT contain a PRIORITY
            ...0 .... .... .... .... .... .... .... = DFS operation: This is a normal operation
            ..0. .... .... .... .... .... .... .... = Replay operation: This is NOT a replay operation
        Chain Offset: 0x00000000
        Message ID: 1
        Reserved: 0x0000feff
        Tree Id: 0x00000000
        Session Id: 0x0000000000000000
        Signature: 00000000000000000000000000000000
        [Response to: 54]
        [Time from request: 0.000007000 seconds]
    Negotiate Protocol Response (0x00)
        [Preauth Hash: 5c8cf3670d9ca5d3b91e2199ac05900e9dc87288dfab3e1ebf702d0fba52eaeafe46ae3070c36de4b1460af9540cd3ceeb601c97b62ba1d73ab22a9a011d192f]
        StructureSize: 0x0041
            0000 0000 0100 000. = Fixed Part Length: 32
            .... .... .... ...1 = Dynamic Part: True
        Security mode: 0x01, Signing enabled
            .... ...1 = Signing enabled: True
            .... ..0. = Signing required: False
        Dialect: SMB 3.1.1 (0x0311)
        NegotiateContextCount: 3
        Server Guid: 00000000-0000-0000-0000-000000000000
        Capabilities: 0x0000000c, LARGE MTU, MULTI CHANNEL
            .... .... .... .... .... .... .... ...0 = DFS: This host does NOT support DFS
            .... .... .... .... .... .... .... ..0. = LEASING: This host does NOT support LEASING
            .... .... .... .... .... .... .... .1.. = LARGE MTU: This host supports LARGE_MTU
            .... .... .... .... .... .... .... 1... = MULTI CHANNEL: This host supports MULTI CHANNEL
            .... .... .... .... .... .... ...0 .... = PERSISTENT HANDLES: This host does NOT support PERSISTENT HANDLES
            .... .... .... .... .... .... ..0. .... = DIRECTORY LEASING: This host does NOT support DIRECTORY LEASING
            .... .... .... .... .... .... .0.. .... = ENCRYPTION: This host does NOT support ENCRYPTION
            .... .... .... .... .... .... 0... .... = NOTIFICATIONS: This host does NOT support receiving NOTIFICATIONS
        Max Transaction Size: 1048576
        Max Read Size: 4194304
        Max Write Size: 4194304
        Current Time: Jan 19, 2025 19:12:36.820239300 PST
        Boot Time: No time specified (0)
        Blob Offset: 0x00000080
        Blob Length: 74
        Security Blob: 604806062b0601050502a03e303ca00e300c060a2b06010401823702020aa32a3028a0261b246e6f745f646566696e65645f696e5f5246433431373840706c656173655f69676e6f7265
            GSS-API Generic Security Service Application Program Interface
                OID: 1.3.6.1.5.5.2 (SPNEGO - Simple Protected Negotiation)
                Simple Protected Negotiation
                    negTokenInit
                        mechTypes: 1 item
                            MechType: 1.3.6.1.4.1.311.2.2.10 (NTLMSSP - Microsoft NTLM Security Support Provider)
                        negHints
                            hintName: not_defined_in_RFC4178@please_ignore
        NegotiateContextOffset: 0x000000d0
        Negotiate Context: SMB2_PREAUTH_INTEGRITY_CAPABILITIES 
            Type: SMB2_PREAUTH_INTEGRITY_CAPABILITIES (0x0001)
            DataLength: 38
            Reserved: 00000000
            HashAlgorithmCount: 1
            SaltLength: 32
            HashAlgorithm: SHA-512 (0x0001)
            Salt: edb44f22adfc8867776d42525d298d1ee4b228e0690e951e33ad271ab36e6f6a
        Negotiate Context: SMB2_ENCRYPTION_CAPABILITIES 
            Type: SMB2_ENCRYPTION_CAPABILITIES (0x0002)
            DataLength: 4
            Reserved: 00000000
            CipherCount: 1
            CipherId: AES-128-GCM (0x0002)
        Negotiate Context: SMB2_SIGNING_CAPABILITIES 
            Type: SMB2_SIGNING_CAPABILITIES (0x0008)
            DataLength: 4
            Reserved: 00000000
            SigningAlgorithmCount: 1
            SigningAlgorithmId: AES-CMAC (0x0001)
SUP-176851
My SMB shares stopped successful authentication when accessed from any Android, iPhone, iPad, GoogleTV. It prompted me to enter the username and password, but never went through to the directory content and always asks for inputting the credentials.
However it still works from Windows 11 or Kali Linux. Invested several hours into troubleshooting without any luck. Decided to downgrade back to 7.16.2 and it worked right away.
Mikrotik team
, please take a good look on the new SMB implementation which you mark as
smb - stability improvements for client/server
, cause in reality it worsens the experience somehow.

---
### Author: Unknown
Date: Unknown

I noticed something strange on reboot with 7.17. There is this strange error and the adlist is stuck and does not reload automatically. A manual reload fixes it.
2025-01-23 01:02:30 system,info router rebooted by winbox-3.41/tcp-msg(winbox):
admin@192.168.88.xx
2025-01-23 01:02:30 dns,error [adlist] http client error: resolving error
2025-01-23 01:02:31 interface,info lo link up
2025-01-23 01:02:32 bridge,info hardware offloading activated on bridge "bridge" ports: ether2-local,ether3-local,ether4-local,ether5-local
2025-01-23 01:02:35 interface,info ether4-local link up (speed 1G, full duplex)
2025-01-23 01:02:35 interface,info ether5-local link up (speed 1G, full duplex)
2025-01-23 01:02:36 interface,info ether1-wan link up (speed 1G, full duplex)
2025-01-23 01:02:39 dhcp,info dhcp-client on ether1-wan got IP address xx.xx.xx.xx
2025-01-23 01:02:41 system,info,account user admin logged in from 192.168.88.xx via winbox
Shouldn't adlist wait to reload AFTER all interfaces are up and dhcp client gets ip for the wan interface?

---
### Author: Unknown
Date: Unknown

bridge - disallow duplicate static VLAN entries;
Is this change the reason why I can no longer add e.g. on port 23 vlans in the range of 1-2000 and on port 24 vlans in the range of 10-20?
In previous versions it was possible, but now I get an error.
I have a lot of vlans and it was mega convenient for me when I assigned vlans to ports. And now unfortunately I have to assign ports to vlans :/

---
### Author: Unknown
Date: Unknown

I was finally able to update RB450Gx4 7.16.2 -> 7.17 by going "babysteps":
At start 7.17. stable gave error message "free up 9 kB of kernel disk space"
I tried then with 7.17 beta6 -> "free up 5 kB of kernel disk space". Looks like we are moving to right direction...
Then I took 7.17 beta2 and that succeeded - CAP's became unbound though
Then I tried 7.17 stable again and failed.
I tried again with 7.17 beta6 and that succeeded - CAP's were operational again - good news.
Then I went to /system package update download to get 7.17 stable - and now that succeeded as well and all seems to be working OK for now.
So your path can be 7.16.2 -> 7.17beta2 -> 7.17beta6 -> 7.17 stable
That all meant that I had to manually dig out these old betas from download.mikrotik.com - if they would not be available then all this would not have been possible.

---
### Author: Unknown
Date: Unknown

I had an issue upgrading due to low disk space on a D53G-5HacD2HnD (Chateau LTE6).
I did a netinstall to 7.17 and restored a backup, but the space was low again.
Then I looked into an unencrypted backup and saw many, around 150, CA certificates.
I don't know how and when those CA certificates got downloaded and filled into the certificate store.
Is there some built-in automation to do that?
I have 5 different routers, but only this and another have the same filled-up cert store; the rest do not have any root CA.

---
### Author: Unknown
Date: Unknown

No, what are the certs name (not the issuer, but the name on routeros)?

---
### Author: Unknown
Date: Unknown

We have upgraded multiple (20+) devices and sometimes the bridge interface is deleted on upgrade, but there is no log message saying that it was or why.  On nearly all of CubeG-5ac60ay-SA devices the bridge was deleted, but on other devices the average for the problem was much lower.  Has anyone else had this problem, and have any idea why this occurred?

---
### Author: Unknown
Date: Unknown

As usually, "you" forget to write history of all previous RouerOS versions installed.

---
### Author: Unknown
Date: Unknown

SMB shares stopped working
It hits me too after upgrade from 7.1x to 7.17.
I removed shares and users, disabled the service and reconfiguring everything from scratch and now works fine again.
I hope this help.
After the upgrade, SMB worked fine for me. I can connect from MacOS, and I believe other users in this thread can connect from Windows Machines, too. However, all my media servers are running Infuse, and Infuse can't connect to MikroTik shares anymore.

---
### Author: Unknown
Date: Unknown

The previous RouterOS version on our devices have varied from 7.12.1 to 7.16.2, but it doesn't seem to matter the previous version.  Some of the devices shipped with v6 and others random v7.  The routerboot version varies from 6.42 to 7.16.2. I have not been able to find any commonality between all of the devices.  I have even tried deleting and recreating the bridge in 7.16.2 before the upgrade on a few of the CubeG-5ac60ay-SA devices, but that didn't even help.

---
### Author: Unknown
Date: Unknown

No, what are the certs name (not the issuer, but the name on routeros)?
Hi, thanks for asking. On my other router (hAP ax³, version 7.16.2) the certificates are named
cacert.pem_0 to cacert.pem_150
.
It looked similar on the Chateau LTE6 before I deleted all the certs.
While it was a problem on the Chateau LTE6, it probably won't be a problem on the hAP ax³ due to the much larger flash size.
I'm just wondering if I did something in the past to import all those certs, and I just cannot remember it. 😊

---
### Author: Unknown
Date: Unknown

You've probably, sometime in the past, downloaded the CA bundle from here
https://curl.se/docs/caextract.html
and uploaded it to the router, hence the cacert.pem filename as source.
Nowadays I usually download the list from here
https://www.ccadb.org/resources
(PEM of Root Certificates in Mozilla’s Root Store with the Websites (TLS/SSL) Trust Bit Enabled (TXT))
More info:
https://blog.mozilla.org/security/2019/ ... ase-ccadb/

---
### Author: Unknown
Date: Unknown

It seems that 7.17 has broken the VRRP Sync Connection tracking mechanism. On my VRRP interfaces with Torch and I don't see any protocol-112 (vrrp) or UDP/8275 traffic. What gives??
I opened SUP-177102 about the VRRP connection sync issue.

---
### Author: Unknown
Date: Unknown

> *) bridge - added interface-list support for VLANs;
What does this mean?
Meaning dont have to tag ports per vlan 1 by 1.. this is HUGE!!! and a range command?!?! im thrilled.. I use the CRS switches so this is a big deal to me..

---
### Author: Unknown
Date: Unknown

Just two days ago, I suggested in the
7.18 topic
that release features could be announced better. Now, two days later, there’s a great changelog video for 7.17. That must be a coincidence - you can’t make a video like that so quickly!
RouterOS 7.17 changelog as a YT video:
https://www.youtube.com/watch?v=Dv-cv1h5Yfc
I really like that format!

---
### Author: Unknown
Date: Unknown

I have suggested before that the changelog should be changed to a link to a site, where additional info can be provided.
E.g. a link to relevant documentation in the manual (help site), a mouseover tip that explains the items in slightly more detail, and information like the release where a fixed problem was introduced.
That site should also be able to dynamically generate a changelog between two versions (e.g. between 7.16 and 7.18) by merging the changelog lines and omitting those that were introduced AND fixed between the releases.
The "check for updates" feature in the router could link to that because it knows the currently installed version and the install candidate.

---
### Author: Unknown
Date: Unknown

I'm just wondering if I did something in the past to import all those certs, and I just cannot remember it. 😊
Yes, you read this topic and apply the script.
viewtopic.php?p=1080348#p831111
@CGGXANNX never trust intermediate sites.
viewtopic.php?p=1121413#p1121413
On the previous link I add script for
https://ccadb.my.salesforce-sites.com/m ... e=Websites

---
### Author: Unknown
Date: Unknown

Hi i migrate from 7.15.3 to 7.17 and now all my SFP is not working and i loose access to the device if i reset device i get access to factory default but my old configuration dont work
I tried to downgrade but nothing work it stay on 7.17 whatever
I tried /system/device-mode/update partition=yes and it dont want to downgrade
Is there any way to fix my configuration to work with 7.17 or how i can downgrade correctly i followed what i found on the forum but nothing work

---
### Author: Unknown
Date: Unknown

CRS112..
Where are all the vlan settings under switch gone?

---
### Author: Unknown
Date: Unknown

@evilsabc
For use netinstall to reinstall 7.15.3 and reload backup, you must first enable it on device-mode.
press reset button after run this code
/system device-mode update activation-timeout=60s mode=advanced install-any-version=yes partitions=yes routerboard=yes

---
### Author: Unknown
Date: Unknown

CRS112..
Where are all the vlan settings under switch gone?
That is a Winbox 4 bug. They are there when using Winbox 3.

---
### Author: Unknown
Date: Unknown

@evilsabc
For use netinstall to reinstall 7.15.3 and reload backup, you must first enable it on device-mode.
press reset button after run this code
/system device-mode update activation-timeout=60s mode=advanced install-any-version=yes partitions=yes routerboard=yes
I run the command and tried to get into netinstall mode but it never goes in netinstall mode it boot into the router os 7.17 instead
I followed the instruction i cut the power press the reset i hold the reset with power on until the led goes off and it still boot

---
### Author: Unknown
Date: Unknown

DO NOT POST serial-number!
Code:
Select all
/system ; package print detail ; device-mode print ; routerboard ; print ; settings print ; /partition print detail
results?

---
### Author: Unknown
Date: Unknown

DO NOT POST SERIAL NUMBER!
Code:
Select all
/system ; package print ; device-mode print ; routerboard ; print ; settings print
results?
[admin@MikroTik] /system> device-mode print
mode: advanced
flagged: no
flagging-enabled: yes
scheduler: yes
socks: yes
fetch: yes
pptp: yes
l2tp: yes
bandwidth-test: yes
traffic-gen: no
sniffer: yes
ipsec: yes
romon: yes
proxy: yes
hotspot: yes
smb: yes
email: yes
zerotier: yes
container: no
install-any-version: yes
partitions: yes
routerboard: yes
attempt-count: 0
[admin@MikroTik] /system> routerboard print
routerboard: yes
model: CCR2116-12G-4S+
serial-number: XXXXXXXXXXXXX
firmware-type: al64v3
factory-firmware: 7.0.9
current-firmware: 7.15.3
upgrade-firmware: 7.17
[admin@MikroTik] /system> settings print
bad command name settings (line 1 column 1)

---
### Author: Unknown
Date: Unknown

and
Code:
Select all
/system ; package print detail ; routerboard settings print ; /partition print detail
?
(if I write that line, you must copy and paste all line...)

---
### Author: Unknown
Date: Unknown

and
Code:
Select all
/system ; package print detail ; routerboard ; print ; settings print ; /partition print detail
?
(if I write that line, you must copy and paste all line...)
[admin@MikroTik] /system> /partition print
Flags: A - ACTIVE; R - RUNNING
Columns: NAME, FALLBACK-TO, VERSION, SIZE
#    NAME   FALLBACK-TO  VERSION                             SIZE
0 AR part0  next         RouterOS v7.17 2025-01-16 08:19:28  128MiB

---
### Author: Unknown
Date: Unknown

device-mode is Ok, RouterBOOT (firmware) is Ok, Partition is OK, still missing the rest.......................................
if you still do want do it manually one by one....
/system package print detail
/system routerboard settings print

---
### Author: Unknown
Date: Unknown

device-mode is Ok, RouterBOOT (firmware) is Ok, Partition is OK, still missing the rest.......................................
if you still do want do it manually one by one....
/system package print detail
/system routerboard settings print
I will do all you want to get my old configuration back online lol
[admin@MikroTik] /system> package print detail
Flags: X - disabled
0   name="routeros" version="7.17" build-time=2025-01-16 08:19:28 scheduled="" size=11.9MiB
1   name="wireless" version="7.17" build-time=2025-01-16 08:19:28 scheduled="" size=856.1KiB
[admin@MikroTik] /system> routerboard settings print
auto-upgrade: no
baud-rate: 115200
boot-delay: 2s
enter-setup-on: any-key
boot-device: nand-if-fail-then-ethernet
preboot-etherboot: disabled
preboot-etherboot-server: any
boot-protocol: bootp
enable-jumper-reset: yes
force-backup-booter: no
silent-boot: no
protected-routerboot: disabled
reformat-hold-button: 20s
reformat-hold-button-max: 10m

---
### Author: Unknown
Date: Unknown

Ok, also RouterBOOT setttings and packages are ok.
You have one backup of the configuration? Old config can not reappear just putting back 7.15.3....
Download those, drag and drop inside winbox, and after that go on system / packages and press downgrade
https://download.mikrotik.com/routeros/ ... -arm64.npk
https://download.mikrotik.com/routeros/ ... -arm64.npk
If all work as expected, when reboot the RouterBOARD have 7.15.3 as RouterOS and you can reload the backup you have done before upgrade.

---
### Author: Unknown
Date: Unknown

Ok, also RouterBOOT setttings and packages are ok.
You have one backup of the configuration? Old config can not reappear just putting back 7.15.3....
Download those, drag and drop inside winbox, and after that go on system / packages and press downgrade
https://download.mikrotik.com/routeros/ ... -arm64.npk
https://download.mikrotik.com/routeros/ ... -arm64.npk
If all work as expected, when reboot the RouterBOARD have 7.15.3 as RouterOS and you can reload the backup you have done before upgrade.
It works !!
For others with same problem you have to send the 2 packages i was using only the routeros package not the wireless one
Now my configuration is restored and working number 1 thanks a lot

---
### Author: Unknown
Date: Unknown

DO NOT PUT FILE ON FORUM
Well, do one "/export show-sensitive file=myexport" and save the export out of the Router,
to program the router once v17 is installed, and resetted to empty default first.
If you do not use old CAPsMAN at all, consider uninstall wireless, since CCR2116-12G-4S+ do not have any wireless interface...

---
### Author: Unknown
Date: Unknown

I dont understand why the v7.17 dont work with my 7.15.3 configuration i always use auto upgrade to upgrade the router and i never had any problems

---
### Author: Unknown
Date: Unknown

The problem is not the configuration, but probably the database files where is wroted the configuration are unreadable from 7.17 for some reason... create supout.rif and send it to mikrotik support with problem description.

---
### Author: Unknown
Date: Unknown

@rextended Thank you, and well done!

---
### Author: Unknown
Date: Unknown

Bug report: the serial console becomes unresponsive after several days, and needs to be cycled (disabled/enabled) via the web interface to work again. Observed on a CCR2216 (twice).

---
### Author: Unknown
Date: Unknown

@rextended Thank you, and well done!
Thanks... But for what??? 🤷‍♂️

---
### Author: Unknown
Date: Unknown

Thanks... But for what??? 🤷‍♂️
Helping @evilsabc, a generous and substantial commitment IMO.

---
### Author: Unknown
Date: Unknown

updated to v7.17 almost flawless all at v7.15.3 before
hAB-ac3
hEX-PoE
CRS328-24P-4S+
CRS 328-4C-20S-4S+
CCR1009-8G-1S-1S+
hEX-S
that is my topology
-router, CCR1009-8G-1S-1S+
-core switch, CRS328-4C-20S-4S+
-- PoE-powered smart devices,   CRS328-24P-4S+
-PoE Switch (powers APs), no clue what the right technical term for such device, hEX PoE
--AP1, cAP ax
--AP2, cAP ax
--AP3, cAP ax
First I updated the APs and than the hEX PoE.
I lost connection to the hEX PoE until I updated the core switch CRS328-4C-20S-4S+
(strange, isnt' it? But I'm happy that I don't have to do a netinstall)

---
### Author: Unknown
Date: Unknown

Thanks... But for what??? 🤷‍♂️
Helping @evilsabc, a generous and substantial commitment IMO.
Ah, I thought you had a similar problem, but I either didn't read it or inadvertently ignored it.

---
### Author: Unknown
Date: Unknown

For me so far, on CCR2004's, it added a new problem.
I have one at my office - one at my home.   I use EOIP (yes, I know I should subnet it, but for now I need it all on the same layer 2) with encryption to link the two locations together.
Version 7.16.2 the best on a 1gb symmetrical connection I could get was 400MB/sec between the two locations.
Version 7.17 made some huge improvements, I'm seeing 700-800MB/sec....
BUT connections are dropping.   Not packet loss - connections get closed.   You'll be winboxed in and poof - you're disconnected to the remote site.
Roll back to 7.16.2 - my speeds are back to what they were - and it's stable again.
Thoughts anyone?
Replace EOIP with VPLS. VPLS is more efficient for joining two sites in a single layer 2 domain using a layer 3 tunnel.
You can also use VXLAN which is an easier alternative to implement.

---
### Author: Unknown
Date: Unknown

It appears that DHCP Alert (Rogue DHCP Alerting) does not seem to work since 7.17 if DHCP Snooping is enabled on the bridge which the DHCP server is bound to - has anyone else experienced this? I'm yet to do extensive testing.

---
### Author: Unknown
Date: Unknown

OF COURSE that does not work when DHCP Snooping is enabled!
DHCP Snooping is an active technique to avoid the problem of Rogue DHCP servers.
You would not use both at the same time...

---
### Author: Unknown
Date: Unknown

@dag, I cannot reproduce same behavior. The ingress-filtering=no/yes works as expected.
My guess is that you are affected by some other switch/bridge change since v7.16, maybe this one?
*) bridge - added forward-reserved-addresses property which controls forwarding of MAC 01:80:C2:00:00:0x range (separated from "protocol-mode=none" functionality, disabled by default after upgrade);
Send supout.rif file to support, or create a separate topic.
Winner winner chicken dinner. Enabling forward-reserved-addresses does indeed work. Thank you very much.

---
### Author: Unknown
Date: Unknown

I have a similar issue like i4ko:
One device tries to connect to our server with a bunch of packets, because it want to establish a couple of tunnels. The 7.17 (and 7.16.2 too) version detects a TCP syn flood and shuts down any tcp syn ack traffic on that interface (Log message "possible SYN flooding on tcp port ..."). Even for other devices, that want to connect.
The only workaround I found is, to drop all packets from this "flooding" host and everything works fine - except for the blocked host. Tried a rate limit firewall rule, but it seems it is too slow or let too many packets through.
Why is MT detecting syn floods? and where can this "feature" be disabled?!? I never activated this feature and in the past everything was fine.
Any idea which old version is not affected by this?
Fun fact: The "flooding" device is a Mikrotik router *facepalm
Not stable!
had a bad upgrade experience. Upgrade to 7.17 - no name resolution for the router or lan clients, no helpful error message - receiving nxdomain, disable/enable, change dns servers for the internal service - nada. Downgrade to 7.16/7.15 - all works fine. Upgrade to 7.17 again - no workie. Again, no dns related messages in console except for tcp syn flood on port 53!.
Tried to disable all static entries - now clients get servfail instead of nxdomain. Disable and enable again - ok, now get resolution. Going on to enable static entries one-by-one - ah, a new error appears - a duplicate entry! What? That has never been the case, and second, why do you care - ignore it, if it is truly duplicate it does not cause any indeterminate state in the config (yes, they were truly duplicate). Why is that error not in console log when the system boots and service is brought up and chokes?
You can't drop the ball like that Mikrotik.  This is a simple situation your QAs should test. And not only that but if you roll service with such hairbrained changes it should be a parallel optional service that you ask the users to manually enable in place of the tried and true which should be the default - then the few that actually like to thinker with config will try it and provide feedback and give you the missing test cases that you did not cover, and only that you change what is the default. And at least put some error messages in the console. This is simply not how you produce quality!
Platform: arm32

---
### Author: Unknown
Date: Unknown

I have a similar issue like i4ko:
One device tries to connect to our server with a bunch of packets, because it want to establish a couple of tunnels. The 7.17 (and 7.16.2 too) version detects a TCP syn flood and shuts down any tcp syn ack traffic on that interface (Log message "possible SYN flooding on tcp port ..."). Even for other devices, that want to connect.
Is that what it does??  That is bad... I would have expected it to enable SYN COOKIES in that situation.

---
### Author: Unknown
Date: Unknown

Tried to enable SYN cookies, but the behavior is unchanged. Every time when I disable the drop rule for that "flooding" device the log message appears and every new TCP session on that interface is not answered until a reboot. It's good to see with the packet sniffer: SYN arrives, no response from the system, retransmit of the SYN, no response from the system, and so on.
I have a similar issue like i4ko:
One device tries to connect to our server with a bunch of packets, because it want to establish a couple of tunnels. The 7.17 (and 7.16.2 too) version detects a TCP syn flood and shuts down any tcp syn ack traffic on that interface (Log message "possible SYN flooding on tcp port ..."). Even for other devices, that want to connect.
Is that what it does??  That is bad... I would have expected it to enable SYN COOKIES in that situation.

---
### Author: Unknown
Date: Unknown

Well I am not running 7.17 but I am testing 7.18beta2 and it shows that "syn flood" error for port 53 (DNS) once after every reboot, however when I later try the port 53 answers as normal.
So there must be more than that going on.

---
### Author: Unknown
Date: Unknown

The problem im my case could be, that the "flooding" device won't stop sending the packets. Maybe your clients, that trigger the log message reduce the rate or increase the time between sending packets.
In either way, the device should not block all TCP SYN traffic.
Well I am not running 7.17 but I am testing 7.18beta2 and it shows that "syn flood" error for port 53 (DNS) once after every reboot, however when I later try the port 53 answers as normal.
So there must be more than that going on.

---
### Author: Unknown
Date: Unknown

OF COURSE that does not work when DHCP Snooping is enabled!
DHCP Snooping is an active technique to avoid the problem of Rogue DHCP servers.
You would not use both at the same time...
@pe1chl there are many valid reasons for doing both, and in older ROS versions this worked fine. Note that even if you're isolating rogue dhcp servers, one may still want to receive an alert when they feature on your network.

---
### Author: Unknown
Date: Unknown

In all devices in network I see this in log
system,info ovpn server added by  (/interface ovpn-server server set)
I look and see OpenVPN server add to list, not see any one logged in time of creation on device.
Anyone else ?

---
### Author: Unknown
Date: Unknown

In all devices in network I see this in log
system,info ovpn server added by  (/interface ovpn-server server set)
I look and see OpenVPN server add to list, not see any one logged in time of creation on device.
Anyone else ?
I've got that log entry as well on a CRS309 switch with a lean configuration consisting of a bridge only, and like you had found no evidence that a ovpn server exists or has ever existed (never used or configured any ovpn). Since I've reverted back to an older version again for other reasons, I can't reproduce this anymore or provide any data for analysis.

---
### Author: Unknown
Date: Unknown

viewtopic.php?p=1110235&hilit=ovpn#p1110235
It is added automatically. I removed that server (even though it is disabled) on my devices after upgrade to 7.17. It is just noise in config export otherwise.

---
### Author: Unknown
Date: Unknown

in my case I had no server configured since the CRS309 is used purely as a switch only without any other services enabled on it. No clue why in this case such a log entry appears when no server have ever been configured on that device. When the log entry appeared I went and checked the config out of curiosity, and there was simply nothing under ovpn.

---
