# Thread Information
Title: Thread-212607
Section: RouterOS
Thread ID: 212607

# Discussion

## Initial Question
I'm configuring capsman, I would like to ensure that when the user moves between the various cAPs the connection does not drop but roaming occurs. Does the configuration seem correct to you?
```
/interfacewifi channeladdband=2ghz-ax disabled=nofrequency=2412name=channel1 skip-dfs-channels=disabled width=20/40mhzaddband=2ghz-ax disabled=nofrequency=2437name=channel6 skip-dfs-channels=disabled width=20/40mhzaddband=2ghz-ax disabled=nofrequency=2462name=channel11 skip-dfs-channels=disabled width=20/40mhzaddband=5ghz-ax disabled=nofrequency=5260name=channel52 width=20/40/80mhzaddband=5ghz-ax disabled=nofrequency=5180name=channel36 width=20/40/80mhzaddband=5ghz-ax disabled=nofrequency=5500name=channel100 width=20/40/80mhzaddband=5ghz-ax disabled=nofrequency=5600name=channel116 width=20/40/80mhz/interfacewifi datapathaddbridge=bridge-main disabled=nointerface-list=LAN name=datapath-vlan1 vlan-id=1addbridge=bridge-main client-isolation=yes disabled=nointerface-list=GUEST name=datapath-vlan333 vlan-id=333/interfacewifi securityaddauthentication-types=wpa2-psk,wpa3-psk disabled=noencryption=""ft=yes ft-over-ds=yes name=security-privateadddisabled=noft=yes ft-over-ds=yes name=security-guest/interfacewifi configurationaddantenna-gain=0channel=channel1 datapath=datapath-vlan1 disabled=nomode=ap name=cfg1-2.4Ghz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel6 datapath=datapath-vlan1 disabled=nomode=ap name=cfg6-2.4Ghz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel52 datapath=datapath-vlan1 disabled=noname=cfg52-5GHz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel36 datapath=datapath-vlan1 disabled=noname=cfg36-5GHz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel100 datapath=datapath-vlan1 disabled=noname=cfg100-5GHz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel1 datapath=datapath-vlan333 disabled=nomode=ap name=cfg1-2.4Ghz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel6 datapath=datapath-vlan333 disabled=nomode=ap name=cfg6-2.4Ghz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel11 datapath=datapath-vlan333 disabled=nomode=ap name=cfg11-2.4Ghz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel36 datapath=datapath-vlan333 disabled=noname=cfg36-5GHz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel11 datapath=datapath-vlan1 disabled=nomode=ap name=cfg11-2.4Ghz-privatesecurity=security-privatessid="Al Convento Private"addantenna-gain=0channel=channel52 datapath=datapath-vlan333 disabled=noname=cfg52-5GHz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel100 datapath=datapath-vlan333 disabled=nomode=ap name=cfg100-5GHz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel116 datapath=datapath-vlan333 disabled=noname=cfg116-5GHz-GUEST security=security-guest ssid="B&B Al Convento Ospiti"addantenna-gain=0channel=channel116 datapath=datapath-vlan1 disabled=noname=cfg116-5GHz-privatesecurity=security-privatessid="Al Convento Private"/interfacewifi access-listaddaction=reject allow-signal-out-of-range=4sdisabled=nosignal-range=-120..-77/interfacewifi capsetdiscovery-interfaces=vlan1-LAN enabled=yes/interfacewifi capsmansetca-certificate=autoenabled=yes interfaces=vlan1-LANpackage-path=""require-peer-certificate=noupgrade-policy=none/interfacewifi provisioningaddaction=create-dynamic-enabled comment="AP1 2.4ghz"disabled=nomaster-configuration=cfg1-2.4Ghz-privatename-format=%I-2.4GHzradio-mac=D4:01:C3:F1:E6:B1 slave-configurations=cfg1-2.4Ghz-GUEST supported-bands=\2ghz-axaddaction=create-dynamic-enabled comment="AP3 2.4ghz"disabled=nomaster-configuration=cfg6-2.4Ghz-privatename-format=%I-2.4GHzradio-mac=D4:01:C3:F1:D3:81slave-configurations=cfg6-2.4Ghz-GUEST supported-bands=\2ghz-axaddaction=create-dynamic-enabled comment="AP1 - 5GHz"disabled=nomaster-configuration=cfg36-5GHz-privatename-format=%I-5GHzradio-mac=D4:01:C3:F1:E6:B0 slave-configurations=cfg36-5GHz-GUEST supported-bands=5ghz-axaddaction=create-dynamic-enabled comment="hAP ax2 - 2.4Ghz"disabled=nomaster-configuration=cfg6-2.4Ghz-privatename-format=%I radio-mac=D4:01:C3:E1:25:B1 slave-configurations=cfg6-2.4Ghz-GUEST supported-bands=\2ghz-axaddaction=create-dynamic-enabled comment="hAP ax2 - %5GHz"disabled=nomaster-configuration=cfg52-5GHz-privatename-format=%I radio-mac=D4:01:C3:E1:25:B0 slave-configurations=cfg52-5GHz-GUESTaddaction=create-dynamic-enabled disabled=nomaster-configuration=cfg100-5GHz-privatename-format=FABIO-5GHZradio-mac=78:9A:18:27:D2:A8 slave-configurations=cfg100-5GHz-GUEST supported-bands=5ghz-axaddaction=create-dynamic-enabled disabled=nomaster-configuration=cfg11-2.4Ghz-privatename-format=FABIO-2GHZradio-mac=78:9A:18:27:D2:A9 slave-configurations=cfg11-2.4Ghz-GUEST supported-bands=2ghz-axaddaction=create-dynamic-enabled comment=AP2-5GHzdisabled=nomaster-configuration=cfg100-5GHz-privatename-format=%I-5GHzradio-mac=D4:01:C3:F1:D2:ED slave-configurations=cfg100-5GHz-GUEST supported-bands=5ghz-axaddaction=create-dynamic-enabled comment=AP3-5GHzdisabled=nomaster-configuration=cfg52-5GHz-privatename-format=%I-5GHzradio-mac=D4:01:C3:F1:D3:80slave-configurations=cfg52-5GHz-GUEST supported-bands=5ghz-axaddaction=create-dynamic-enabled comment=AP2-2.4GHzdisabled=nomaster-configuration=cfg11-2.4Ghz-privatename-format=%I-2.4GHzradio-mac=D4:01:C3:F1:D2:EE slave-configurations=cfg11-2.4Ghz-GUEST supported-bands=\2ghz-ax

---
```

## Response 1
At first sight it looks ok.Have you tested it when moving around ?You should see roaming messages in log file. ---

## Response 2
As the complete bandwidth of 2.4GHz radio is 40MHz wide, I would advise to use bandwidth=20mhz. Roaming works better when you use non overlapping channels.Don't use vlan id=1, instead use something above 1.Don't set antenna-gain to 0, leave it default or set correctly.Missing country, which makes it think/assume it is in Latvia.As you probably added the VLAN's to the corresponding interface lists, it is probably not necessary to add the datapath to both the vlan and the interface list. ---

## Response 3
Thanks for the advice, I'll do some field testing next week ---

## Response 4
As the complete bandwidth of 2.4GHz radio is 40MHz wide....Not exactly true. WiFi 2.4GHz band extends from 2401MHz (lower boundary of channel 1) to 2473MHz (upper boundary of channel 11, relevant in NA) or 2483MHz (upper boundary of channel 13, relevant in EU and almost everywhere else than NA). Which gives 72MHz or 82MHz of bandwidth depending on country regulations.For OFDM modulation (used in 802.11G and newer), channels are 2MHz narrower (1MHz on each boundary, center frequencies remain the same), yielding either 70MHz of bandwidth (in NA, allowing for three 20MHz channels or single 40MHz channel) or 80MHz of bandwidth (everywhere else, alliwing for four 20MHz channels or two 40MHz channels).Sadly, given general US-centric internet (and social networks), internet is full of recipes to use channels 1-6-11 for WiFi which uses 70MHz sparsely and interferes with channel layout 1-5-9-13 which uses 80MHz effectively.N.B. recipe to use channels sparselly (1-6-11) did make slight sense for 802.11B (because channel width was 22MHz and using dense channels 1-5-9(-13) would cause slight channel overlap). ---

## Response 5
I've done some tests and it seems everything works perfectly. ---