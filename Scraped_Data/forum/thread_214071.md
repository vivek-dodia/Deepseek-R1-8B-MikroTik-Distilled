---
title: Thread-214071
url: https://forum.mikrotik.com/viewtopic.php?t=214071&sid=3b77a3334c914448dbbc02bfdff4c3aa
date: 2025-02-03T11:56:57.547013
---

### Author: Unknown
Date: Unknown

RouterOS version 7.18beta has been released on the "v7 testing" channel!
Before an upgrade:
1) Remember to make backup/export files before an upgrade and save them on another storage device;
2) Make sure the device will not lose power during upgrade process;
3) Device has enough free storage space for all RouterOS packages to be downloaded.
What's new in 7.18beta4 (2025-Jan-31 15:46):
*) bridge - fixed endless MAC update loop (introduced in v7.17);
*) chr/x86 - fixed error message on bootup;
*) cloud - added file-share feature (additional fixes);
*) console - added dsv.remap to :serialize command to unpack array of maps from print as-value (additional fixes);
*) defconf - added IPv6 FastTrack configuration;
*) dhcpv4-server - fixed framed-route removal;
*) dhcpv4-server - fixed lease assigning when server address is not bind to server interface (introduced in v7.17);
*) fetch - fixed IPv6 handling in URL (introduced in v7.18beta2);
*) file - improved handling of filesystems with many files (additional fixes);
*) hotspot - fixed an issue where extra "flash/" is added to html-directory for devices with flash folders (introduced in v7.17);
*) igmp-proxy - fixed multicast routing after upstream interface flaps (introduced in v7.17);
*) ipsec - fixed chacha20 poly1305 proposal;
*) ipv6 - added routing FastPath support (enabled by default) (additional fixes);
*) ipv6 - fixed configuration loss due to conflicting settings after upgrade (introduced in v7.17);
*) l3hw - added initial HW offloading for VXLAN on compatible switches (additional fixes);
*) log - added CEF format support for remote logging (additional fixes);
*) lte - added basic support for Quectel RG255C-GL modem in "at+qcfg="usbnet",0" USB composition;
*) lte - added initial eSIM management support (CLI only) (additional fixes);
*) lte - reduced SIM slot switchover time for modems with AT control channel;
*) net - added initial support for automatic multicast tunneling (AMT) interface (additional fixes);
*) ovpn - added requirement for server name when exporting configuration;
*) poe-out - fixed invalid poe-in status detection for RB5009 (introduced in v7.18beta2);
*) port - improved handling of USB device plug/unplug events;
*) ppc - fixed HW encryption (introduced in v7.17);
*) queue - improved system stability when many simple queues are added (introduced in v7.17);
*) resolver - fixed static FQDN resolving (introduced in v7.17);
*) routerboot - improved stability for IPQ8072 ("/system routerboard upgrade" required);
*) smb - fixed connection issues with clients using older SMB versions (introduced in v7.17);
*) supout - added IPv6 settings section;
*) switch - improvements to certain switch operations (port disable, shaper and switch initialization) (additional fixes);
*) vxlan - added IPv6 FastPath support;
*) vxlan - fixed unset for "group" and "interface" properties;
*) vxlan - replaced the "inherit" with "auto" option for dont-fragment property (new default);
*) wifi-qcom - fixed potentially lowered throughput for station interfaces if channel.width property is set (introduced in v7.18beta2);
*) winbox - fixed locked input fields when creating new certificate template;
*) winbox - show warning messages for static DNS entries;
*) x86 - fixed "unsupported speed" warning (additional fixes);
What's new in 7.18beta2 (2025-Jan-21 11:27):
*) 60ghz - improved system stability;
*) bgp - fixed certain affinity options not working properly;
*) bgp - improved system stability when printing BGP advertisements;
*) bgp - make NO_ADVERTISE, NO_EXPORT, NO_PEER communities work;
*) bond - added transmit hash policies for encapsulated traffic;
*) bridge - added MLAG heartbeat property;
*) bridge - avoid duplicate VLAN entries with dynamic wifi VLANs;
*) bridge - do not reset MLAG peer port on heartbeat timeout (log warning instead);
*) bridge - fixed missing S flag on interface configuration changes;
*) bridge - improvements to MLAG host table updates;
*) bridge - process more DHCP message types (decline, NAK, inform);
*) bridge - removed controller-bridge (CB) and port-extender (PE) support;
*) bridge - show VXLAN remote-ip in host table;
*) btest - allow limiting access to server by IP address;
*) certificate - fixed localized text conversion to UTF-8 on certificate creation;
*) chr - fixed limited upgrades for expired instances;
*) chr/x86 - added network driver for Huawei SP570/580 NIC;
*) chr/x86 - fixed GRE issues with ice network driver;
*) chr/x86 - Realtek r8169 updated driver;
*) cloud - added file-share feature;
*) cloud,bth - use in-interface matcher for masquerade rule;
*) console - added dsv.remap to :serialize command to unpack array of maps from print as-value;
*) console - added file-name parameter to :serialize;
*) console - allow ISO timezone format in :totime command;
*) console - allow tab as dsv delimiter;
*) console - allow to toggle script error logging with "/console settings log-script-errors";
*) console - do not autocomplete arguments when match is both exact and ambiguous;
*) console - do not show numbering in print follow;
*) console - fixed "get" and "proplist" for certain settings;
*) console - fixed issue where ping command displays two lines at the same time;
*) console - fixed issue with disappearing global variable;
*) console - implement scriptable safe-mode commands and safe-mode handler;
*) console - improved hints;
*) console - log errors within scripts to the system log;
*) console - make non-pseudo terminals work with imports;
*) console - put !empty sentence when API query returns nothing;
*) container - add default registry-url=https: //lscr.io;
*) container - allow HTTP redirects when accessing container registry;
*) container - allow specifying registry using remote-image property;
*) container - improved image arch choice;
*) container - use parent directory of container root-dir for unpack by default, so that container layer files are downloaded directly on target disk;
*) dhcpv4-client - allow selecting to which routing tables add default route;
*) dhcpv4-client - fixed default option export output;
*) dhcpv4-server - fixed "active-mac-address" update when client has changed MAC address;
*) dhcpv6-client - added "validate-server-duid" option;
*) dhcpv6-client - allow specifying custom DUID;
*) dhcpv6-client - do not run script on prefix renewal;
*) dhcpv6-relay - add routes for bindings passing through relay;
*) dhcpv6-server - respond to client in case of RADIUS reject;
*) discovery - advertise IPv6 capabilities based on "Disable IPv6" global setting;
*) discovery - improved stability during configuration changes;
*) discovery - report actual PSE power-pair with LLDP;
*) discovery - use power-via-mdi-short LLDP TLV only on pse-type1 802.3af;
*) disk - add disk trim command (/disk format-drive diskx file-system=trim);
*) disk - fix detecting disks on virtual machines;
*) ethernet - fixed issue with default-names for RB4011 and RB1100Dx4 devices;
*) ethernet - improved link speed reporting on 2.5G-baseT and 10Gbase-T ports;
*) fetch - added "http-max-redirect-count" parameter, allows to follow redirects;
*) fetch - do not require "content-length" or "transfer-encoding" for HTTP;
*) file - added "recursive" and "relative" parameters to "/file/print" for use in conjunction with "path" parameter;
*) file - allow printing specific directories via path parameter;
*) file - improved handling of filesystems with many files;
*) firewall - allow in-interface/in-bridge-port/in-bridge matching in postrouting chains;
*) firewall - fixed incorrectly inverted hotspot value configuration;
*) firewall - increased maximum connection tracking entry count based on device total RAM size;
*) iot - added new "iot-bt-extra" package for ARM, ARM64 which enables use of USB Bluetooth adapters (LE 4.0+);
*) iot - improvements to LoRa logging and stability;
*) iot - limited MQTT payload size to 32 KB;
*) ip - added support for /31 address;
*) ippool - added pool usage statistics;
*) ipsec - added hardware acceleration support for EN7562CT (hEX refresh);
*) ipsec - fixed installed SAs update process when SAs are removed;
*) ipv6 - added ability to disable dynamic IPv6 LL address generation on non-VPN interfaces;
*) ipv6 - added FastTrack support;
*) ipv6 - added routing FastPath support;
*) ipv6 - added support for neighbor removal and static entries;
*) l2tp - added IPv6 FastPath support;
*) l3hw - added initial HW offloading for VXLAN on compatible switches;
*) l3hw - added neigh-dump-retries property;
*) l3hw - fixed /32 (IPv6 /128) route offloading when using interface as gateway;
*) l3hw - fixed partial route offloading for 98DX224S, 98DX226S, 98DX3236 switches;
*) l3hw - respect interface specifier (%) when matching a gateway;
*) log - added CEF format support for remote logging:
*) log - added option to select TCP or UDP for remote logging;
*) lte - added initial eSIM management support (CLI only);
*) lte - fixed Huawei ME909s-120 support;
*) lte - fixed missing 5G info for "/interface lte print" command;
*) lte - fixed missing IPv6 prefix advertisement on renamed LTE interfaces;
*) lte - fixed prolonged reboots on Chateau 5G ax;
*) lte - fixed SIM slot initialization with multi-APN setups;
*) lte - lte monitor, show CQI when modem reports it as 0 - undetectable, no RX/down-link resource block assigned to modem by provider;
*) lte - R11eL-EC200A-EU fixed online firmware upgrade and added support for firmware update from local file;
*) lte - R11eL-EC200A-EU improved failed connection handling and recovery;
*) lte - removed nonexistent CQI reading for EC200A-EU modem;
*) net - added initial support for automatic multicast tunneling (AMT) interface;
*) netinstall - try to re-create socket if link status changes;
*) netinstall-cli - fixed DHCP magic cookie;
*) ospf - fixed DN bit not being set;
*) ospfv3 - fixed ignored metric for intra-area routes;
*) ovpn-client - added 1000 character limit for password;
*) pimsm - fixed incorrect neighbor entry when using lo interface;
*) poe-out - added "power-pair" info to poe-out monitor (CLI only);
*) poe-out - added console hints;
*) poe-out - added new modes "forced-on-a" and "forced-on-bt", where old "forced-on" mean "forced-on-bt" (CLI only);
*) poe-out - upgraded firmware for 802.3at/bt PSE controlled boards (the update will cause brief power interruption to PoE-out interfaces);
*) ppp - add support for configuration of upload/download queue types in profile;
*) ppp - added support for random UDP source ports;
*) ppp - fixed setting loss when adding new ppp-client interface for BG77 modem from CLI;
*) ppp - properly cleanup failed inactive sessions on pppoe-server;
*) ptp - do not send packets on STP blocked ports;
*) qos-hw - fixed global buffer limits for 98CX8410 switch;
*) queue - improved system stability;
*) queue - prevent CAKE bandwidth config from potentially causing lost connectivity to a device;
*) rip - fixed visibility of added key-chains in interface-template;
*) rose-storage - add btrfs filesystem add-device/remove-device/replace-device/replace-cancel commands to add/remove/replace disks to/from a live filesystem;
*) rose-storage - add btrfs filesystem balance-start/cancel commands;
*) rose-storage - add btrfs filesystem scrub-start, scrub-cancel commands (CLI only);
*) rose-storage - add btrfs transfers, supports send/receive into/from file for transferring subvolumes across btrfs filesystems;
*) rose-storage - add support to add/remove btrfs subvolumes/snapshots;
*) rose-storage - added support for advanced btrfs features: multi-disk support, subvolumes, snapshots, subvolume send/receive, data/metadata profiles, compression, etc;
*) rose-storage - allow to separately mount any btrfs subvolumes;
*) rose-storage - update rsync to 3.4.1;
*) rose-storage,ssh - support btrfs send/receive over ssh;
*) route - added /ip/route/check tool;
*) route - added subnet length validation on route add;
*) route - do not use disabled addresses when selecting routing id;
*) route - fixed busy loops (route lockups);
*) route - fixed incorrect H flag usage;
*) route - improved stability when polling static routes via SNMP;
*) route - properly resolve imported BGP VPN routes;
*) routing-filter - improved stability when using large address lists (>5000);
*) routing-filter - improved usage of quotes in filter rules;
*) sfp - fixed missing "1G-baseX" supported rate for NetMetal ac2 and hEX S devices;
*) sfp - improved linking with certain QSFP modules on CRS354 devices;
*) sfp - improved system stability with some GPON modules for CCR2004 and CCR2116 devices;
*) sfp,qsfp - improved initialization and linking;
*) smb - improved system stability;
*) snmp - added disk serial number through description field;
*) snmp - sort disk list and assign correct disk types;
*) supout - added per CPU load information;
*) switch - improved system stability for CRS304 switch;
*) switch - improvements to certain switch operations (port disable, shaper and switch initialization);
*) system - added option to list and install available packages (after using "check-for-updates");
*) system - do not allow to install multiple wireless driver packages at the same time;
*) system - do not cause unnecessary sector writes on check-for-updates;
*) system - enable "ipv6" package on RouterOS v6 downgrade if IPv6 is enabled;
*) system - force time to be at least at package build time minus 1d;
*) system - improved HTTPS speed;
*) system - improved stability on busy systems;
*) system,arm - automatically increase boot part size on upgrade or netinstall (fixed upgrade failed due to a lack of space on kernel disk/partition);
*) tile - improved system stability;
*) traceroute - added "too many hops" error when max-hops are reached;
*) traceroute - limit max-hops maximum value to 255;
*) user - improved authentication procedure when RADIUS is not used;
*) vxlan - added disable option for VTEPs;
*) vxlan - added option to dynamically bridge interface and port settings (hw, pvid);
*) vxlan - added TTL property;
*) vxlan - changed default port to 4789;
*) webfig - added confirmation when quitting in Safe Mode;
*) webfig - do not reload form when failed to create new object;
*) webfig - fixed "TCP Flags" property when inverted flags are set in console;
*) webfig - fixed datetime setting under certain menus;
*) webfig - fixed displaying passwords;
*) webfig - fixed Switch/Ports menu not showing correctly;
*) webfig - hide certificate information in IP Services menu when not applicable;
*) webfig - remember expand/fold state;
*) wifi - added max-clients parameter;
*) wifi - avoid excessive re-transmission of SA Query action frames;
*) wifi - fix issue which made it possible for multiple concurrent WPA3 authentications to interfere with each other;
*) wifi - implement steering parameters to delay probe responses to clients in the 2.4GHz band;
*) wifi - log a warning when a client requests power save mode during association as this may prevent successful connection establishment;
*) wifi - re-word the "can't find PMKSA" log message to "no cached PMK";
*) wifi - try to authenticate client as non-FT client if it provides incomplete set of FT parameters;
*) wifi-qcom - fix reporting of radio minimum antenna gain for hAP ax^2;
*) winbox - added "Copy to Provisioning" button under "WiFi/Radios" menu;
*) winbox - added "Last Logged In/Out" and "Times Matched" properties under "WiFi/Access List" menu;
*) winbox - added L3HW Advanced and Monitor;
*) winbox - added TCP settings under "Tools/Traffic Generator/Packet Templates" menu;
*) winbox - do not show 0 Tx/Rx rate under "WiFi/Registration" menu when values are not known;
*) x86 - fixed "unsupported speed" warning;
To upgrade, click "Check for updates" at /system package in your RouterOS configuration interface, or head to our download page:
http://www.mikrotik.com/download
If you experience version related issues, then please send supout file from your router to
support@mikrotik.com
. The file must be generated while a router is not working as suspected or after some problem has appeared on the device
Please keep this forum topic strictly related to this particular RouterOS release.

---
### Author: Unknown
Date: Unknown

Ouhhhhh thanks!

---
### Author: Unknown
Date: Unknown

*) ipv6 - added FastTrack support;
Finally! <3

---
### Author: Unknown
Date: Unknown

Amazing job, this really is impressive and the reason why I only use Mikrotik wherever possible. Keep up the solid work!

---
### Author: Unknown
Date: Unknown

*) console - allow to toggle script error logging with "/console settings log-script-errors";
*) console - implement scriptable safe-mode commands and safe-mode handler;
*) console - log errors within scripts to the system log;
*) console - make non-pseudo terminals work with imports;
What's this about? Could somebody provide some info?

---
### Author: Unknown
Date: Unknown

*) l3hw - added initial HW offloading for VXLAN on compatible switches;
very interesting !!!

---
### Author: Unknown
Date: Unknown

*) l3hw - added initial HW offloading for VXLAN on compatible switches;
very interesting !!!
I cannot wait for free time in the day to play with this! I was hoping to see radsec get fixed but this is a nice, distracting, consolation prize.

---
### Author: Unknown
Date: Unknown

*) ip - added support for /31 address;
*) route - added /ip/route/check tool;
finally! ..thank you!

---
### Author: Unknown
Date: Unknown

Some nice fixes, I like the look of this one *) wifi - try to authenticate client as non-FT client if it provides incomplete set of FT parameters;

---
### Author: Unknown
Date: Unknown

*) l2tp - added IPv6 FastPath support;
*) l3hw - added initial HW offloading for VXLAN on compatible switches;
*) l3hw - fixed partial route offloading for 98DX224S, 98DX226S, 98DX3236 switches;
*) qos-hw - fixed global buffer limits for 98CX8410 switch;
*) winbox - added L3HW Advanced and Monitor;
Hey, I'm inclined to get happy!
They decided to return to do some efforts in hardware offload things.
Still soon to say something, but it sounds good.

---
### Author: Unknown
Date: Unknown

This will surely be an exciting release, lot's of changes across the board most notable changes mlag fixes, ipv6 fasttrack and /31 support

---
### Author: Unknown
Date: Unknown

*) ipv6 - added ability to disable dynamic IPv6 LL address generation on non-VPN interfaces;
*) ipv6 - added FastTrack support;
*) ipv6 - added routing FastPath support;
*) ipv6 - added support for neighbor removal and static entries;
IPv6 getting some love! :D

---
### Author: Unknown
Date: Unknown

Hi,
hex constantly rebooting itself. Only has IPsec tunnel configured for lab.
Code:
Select all
MikroTik RouterOS 7.18beta2 (c) 1999-2025       https://www.mikrotik.com/


Press F1 for help

(7 messages not shown)
2025-01-21 16:29:20 system,error,critical router was rebooted without proper shutdown by watchdog timer
2025-01-21 16:31:00 system,clock,critical,info ntp change time Jan/21/2025 16:30:02 => Jan/21/2025 16:31:00
2025-01-21 16:31:02 system,error,critical router was rebooted without proper shutdown by watchdog timer
2025-01-21 16:44:33 system,clock,critical,info ntp change time Jan/21/2025 16:31:38 => Jan/21/2025 16:44:33
2025-01-21 16:44:35 system,error,critical router was rebooted without proper shutdown by watchdog timer
2025-01-21 16:46:23 system,error,critical router was rebooted without proper shutdown by watchdog timer
2025-01-21 16:48:03 system,clock,critical,info ntp change time Jan/21/2025 16:47:00 => Jan/21/2025 16:48:03
2025-01-21 16:48:04 system,error,critical router was rebooted without proper shutdown by watchdog timer
Config:
Code:
Select all
/interface bridge
add frame-types=admit-only-vlan-tagged name=BDI100 protocol-mode=none pvid=99 vlan-filtering=yes
/interface vlan
add interface=BDI100 name=vlan2 vlan-id=2
add interface=ether1 name=vlan30 vlan-id=30
/interface list
add name=WAN
add name=LAN
add name=DMZ
/ip ipsec policy group
add name=group_pelvet
add name=group_core
/ip ipsec profile
set [ find default=yes ] dpd-interval=2m dpd-maximum-failures=5
add dh-group=ecp384 enc-algorithm=aes-128 lifetime=2h name=pf_pha1_pelvet
add dh-group=ecp256 enc-algorithm=aes-128 hash-algorithm=sha384 name=pf_pha1_core prf-algorithm=sha384
/ip ipsec peer
add address=<> exchange-mode=ike2 name="peer=>Radiusa_pelvet" profile=pf_pha1_pelvet
add address=<> exchange-mode=ike2 name="peer=>PBXa_pelvet" profile=pf_pha1_pelvet
add address=<> exchange-mode=ike2 name="peer=>PBXb-Radiusb_pelvet" profile=pf_pha1_pelvet
add address=<> exchange-mode=ike2 name="peer=>core01" port=4501 profile=pf_pha1_core
/ip ipsec proposal
set [ find default=yes ] disabled=yes
add enc-algorithms=aes-128-cbc name=pp_pha2_pelvet pfs-group=ecp384
add enc-algorithms=aes-128-cbc lifetime=4h name=pp_pha2_core pfs-group=ecp384
/ip pool
add name=pool_vlan2 ranges=10.2.2.10-10.2.2.30
/routing ospf instance
add disabled=yes in-filter-chain=ospf100_in name=ospf100 out-filter-chain=ospf100_out redistribute=connected
/routing ospf area
add disabled=yes instance=ospf100 name=area0
/interface bridge port
add bridge=BDI100 interface=ether2 pvid=2
add bridge=BDI100 interface=ether3 pvid=2
add bridge=BDI100 interface=ether4 pvid=2
add bridge=BDI100 interface=ether5 pvid=2
/ip firewall connection tracking
set enabled=yes tcp-established-timeout=2h udp-stream-timeout=2m
/ip neighbor discovery-settings
set discover-interface-list=none protocol=""
/interface bridge vlan
add bridge=BDI100 tagged=all untagged=ether2,ether3,ether4,ether5 vlan-ids=2
/interface list member
add interface=lte1 list=WAN
add interface=vlan30 list=WAN
/interface ovpn-server server
add mac-address=FE:35:CD:54:08:7F name=ovpn-server1
/ip address
add address=100.64.2.1 interface=lo network=100.64.2.1
add address=10.2.2.1/27 interface=vlan2 network=10.2.2.0
/ip cloud
set ddns-enabled=yes ddns-update-interval=5m update-time=no
/ip dhcp-client
add add-default-route=no interface=vlan30 use-peer-dns=no use-peer-ntp=no
/ip dhcp-server
add add-arp=yes address-pool=pool_vlan2 interface=vlan2 lease-time=2h name=dhcp_vlan2
/ip dhcp-server config
set store-leases-disk=never
/ip dhcp-server network
add address=10.2.2.0/27 dns-server=10.2.2.1 gateway=10.2.2.1
/ip dns
set allow-remote-requests=yes servers=195.76.102.1
/ip firewall address-list
add address=10.0.2.0/27 list=ACL150
add address=10.0.3.0/28 list=ACL150
add address=10.0.4.0/27 list=ACL150
add address=10.0.5.0/24 list=ACL150
add address=195.76.102.0/24 list=ACL150
add address=cloud2.mikrotik.com list=ACL180
add address=upgrade.mikrotik.com list=ACL180
add address=cloud.mikrotik.com list=ACL180
add address=pool.ntp.org list=ACL180
add address=3.pool.ntp.org list=ACL180
/ip firewall filter
add action=accept chain=input comment=INPUT src-address-list=ACL150
add action=accept chain=input in-interface-list=WAN packet-size=0-256 protocol=icmp
add action=drop chain=input dst-port=7000,7001,22900 in-interface-list=WAN protocol=tcp src-address-list=ACL180
add action=accept chain=input in-interface-list=WAN src-address-list=ACL180
add action=drop chain=input in-interface-list=WAN
/ip firewall nat
add action=masquerade chain=srcnat comment=MGMT-LTE_modem dst-address=192.168.8.1 out-interface-list=WAN \
    src-address=0.0.0.0/0 to-addresses=192.168.8.100
/ip firewall service-port
set ftp disabled=yes
set tftp disabled=yes
set h323 disabled=yes
set sip disabled=yes
set pptp disabled=yes
/ip hotspot profile
set [ find default=yes ] html-directory=hotspot
/ip ipsec identity
add generate-policy=port-strict peer="peer=>PBXa_pelvet" policy-template-group=group_pelvet secret=\
    <laquesea>
add generate-policy=port-strict peer="peer=>PBXb-Radiusb_pelvet" policy-template-group=group_pelvet secret=\
    <laquesea>
add generate-policy=port-strict peer="peer=>Radiusa_pelvet" policy-template-group=group_pelvet secret=\
    <laquesea>
add auth-method=digital-signature certificate=IKEv2_MGMT_cl.crt generate-policy=port-strict peer="peer=>core01" \
    policy-template-group=group_core
/ip ipsec policy
set 0 disabled=yes
add comment=Policy_pelvet dst-address=10.142.0.7/32 level=unique peer="peer=>PBXa_pelvet" proposal=\
    pp_pha2_pelvet src-address=100.64.2.1/32 tunnel=yes
add dst-address=10.128.0.11/32 level=unique peer="peer=>Radiusa_pelvet" proposal=pp_pha2_pelvet src-address=\
    100.64.2.1/32 tunnel=yes
add dst-address=10.128.0.15/32 level=unique peer="peer=>PBXb-Radiusb_pelvet" proposal=pp_pha2_pelvet \
    src-address=100.64.2.1/32 tunnel=yes
add dst-address=10.142.0.7/32 level=unique peer="peer=>PBXa_pelvet" proposal=pp_pha2_pelvet src-address=\
    10.2.2.0/27 tunnel=yes
add dst-address=10.128.0.11/32 level=unique peer="peer=>Radiusa_pelvet" proposal=pp_pha2_pelvet src-address=\
    10.2.2.0/27 tunnel=yes
add dst-address=10.128.0.15/32 level=unique peer="peer=>PBXb-Radiusb_pelvet" proposal=pp_pha2_pelvet \
    src-address=10.2.2.0/27 tunnel=yes
add comment=Policy_Core01 dst-address=100.64.0.1/32 level=unique peer="peer=>core01" proposal=pp_pha2_core \
    src-address=100.64.2.1/32 tunnel=yes
add dst-address=10.0.3.0/28 level=unique peer="peer=>core01" proposal=pp_pha2_core src-address=10.2.2.0/27 \
    tunnel=yes
/ip route
add disabled=no distance=5 dst-address=10.0.2.0/27 gateway=195.76.102.1%vlan30 routing-table=main scope=20 \
    suppress-hw-offload=no target-scope=10
/ip service
set telnet disabled=yes
set ftp disabled=yes
set www disabled=yes
set ssh port=22910
set api disabled=yes
set winbox port=8000
set api-ssl disabled=yes
/routing filter rule
add chain=ospf100_out disabled=no rule="if (dst in 0.0.0.0/0 && dst-len>0) {reject}"
add chain=ospf100_in disabled=no rule="if (dst in 10.0.2.0/27) {accept}\
    \nif (dst in 10.0.3.0/28) {reject}\
    \nif (dst in 10.0.4.0/27) {accept}\
    \nif (dst in 10.0.5.0/24) {accept}\
    \nif (dst in 10.0.6.0/24) {accept}\
    \nif (dst in 100.64.0.2/32) {accept}\
    \nif (dst in 192.168.1.0/24) {accept}"
/routing ospf interface-template
add area=area0 disabled=yes interfaces=vlan30 networks=195.76.102.0/24
/system clock
set time-zone-autodetect=no time-zone-name=Europe/Madrid
/system identity
set name=hex01.lb
/system logging
add disabled=yes topics=ipsec,debug,!packet
/system note
set show-at-login=no
/system ntp client
set enabled=yes
/system ntp client servers
add address=pool.ntp.org
add address=3.pool.ntp.org
/system package update
set channel=testing
/system routerboard settings
set auto-upgrade=yes silent-boot=yes
/tool mac-server
set allowed-interface-list=none
/tool mac-server mac-winbox
set allowed-interface-list=none
/tool mac-server ping
set enabled=no

---
### Author: Unknown
Date: Unknown

/file/print
now shows the contents of
container store
🤯
Not sure this is a good idea. It gets too cluttered too easily.

---
### Author: Unknown
Date: Unknown

*) log - added CEF format support for remote logging:
*) log - added option to select TCP or UDP for remote logging;
After 10+ years of waiting, we may have hopefully a working modern logging for Mikrotik.
Will test it out as soon as I get home :)
PS I did make several post before this, so history of request is much older :)
viewtopic.php?t=124291
It may be to much to also support syslog using TLS (so we get encrypted logs)

---
### Author: Unknown
Date: Unknown

NICE WORK.
I'm undecided on what to report the most beautiful, besides the FastTrak, I should copy half the list...

---
### Author: Unknown
Date: Unknown

[...]
*) ipv6 - added FastTrack support;
[...]
Can't believe it's been only 9 years and 8 months since we are waiting for this, seems like yesterday.
Thank you, MikroTik!

---
### Author: Unknown
Date: Unknown

Yeah for ipv6 fasttrack \o/

---
### Author: Unknown
Date: Unknown

This release adds a lot of improvements. Mikrotik, very strong!

---
### Author: Unknown
Date: Unknown

It's 2025 and Mikrotik finally shows some love for IPv6. And starts working on l3hw and mlag again. Both of if which hopelessly broken since many releases.
And still wondering who is after all this rose file sharing stuff on a router.
But better late than never, so i'll stop complaining and look forward to take our CCR2116 from the shelf were they gather dust, waiting for a ROS release with working l3hw and IPv6 support. And we're also eager to play with the new HW VXLAN support.

---
### Author: Unknown
Date: Unknown

I would like to understand how to properly activate Fasstrack for IPv6.
Code:
Select all
/ipv6 settings set allow-fast-path=yes
Code:
Select all
/ipv6 firewall filter add action=fasttrack-connection chain=forward comment="Enable FastTracked v6 traffic" connection-state=established,related
/ipv6 firewall filter add action=accept chain=forward comment="accept established,related,untracked" connection-state=established,related,untracked
Is that option enough? I'm confused by the identical counter values for both rules.
Screenshot_v6.png

---
### Author: Unknown
Date: Unknown

While you are working on IPv6 stack, please
a) add/fix discovery by IPv6 addresses. Currently iOS apps are not useful in IPv6-only envs, because logging in using MAC and IPv4 are not usable
b) NAT64 functionality (for creating IPv6-only envs) runs really well with tayga in a container, but seeing it as built-in functionality would be even nicer.

---
### Author: Unknown
Date: Unknown

*) console - fixed issue where ping command displays two lines at the same time;
Wow, it was since first v7 release and finally fixed. I'm shocked. But thanks.

---
### Author: Unknown
Date: Unknown

I would like to understand how to properly activate Fasstrack for IPv6.
I have a similar config and see basically the same thing.  The counter for fastpath are working, but the actual fast path/ offloading is not working as my CPU is still affected like previous versions. (this is even with the second rule disabled)

---
### Author: Unknown
Date: Unknown

Maybe analogously to ipv4 fasttrack?

---
### Author: Unknown
Date: Unknown

...
*) console - log errors within scripts to the system log;
...
What's this about? Could somebody provide some info?
The log will show exact line in a script which has failed. Very nice feature, helps a lot while debugging scripts.

---
### Author: Unknown
Date: Unknown

Upgraded RB460GX4 from 7.17 basic package and the result is full set of disabled additional packages.
For RB433 only installed packages are still installed after upgrade and no additional list.
EDIT: for RB450Gx4 I see that it's only a list of available packages. Not installed according to "Installed" column.

---
### Author: Unknown
Date: Unknown

*) l3hw - added initial HW offloading for VXLAN on compatible switches;
very interesting !!!
Have we got a list of which Switches are supported? or is this just the software part been done so far?

---
### Author: Unknown
Date: Unknown

Upgraded RB460GX4 from 7.17 basic package and the result is full set of disabled additional packages.
For RB433 only installed packages are still installed after upgrade and no additional list.
EDIT: for RB450Gx4 I see that it's only a list of available packages. Not installed according to "Installed" column.
Everything will be back to normal after upgrading RB firmware to 7.18beta.

---
### Author: Unknown
Date: Unknown

Maybe analogously to ipv4 fasttrack?
I made all the settings for IPv6 in the same way as IPv4. I have shown the result above.

---
### Author: Unknown
Date: Unknown

NICE WORK.
I'm undecided on what to report the most beautiful, besides the FastTrak, I should copy half the list...
Indeed.
Upgraded a RB1100AHx4, KNOT, and CHR(s).  The RB1100 has some auto-start containers with ROSE RAID/bfrs & all just came up – which includes MQTT and LoRa server, and 7.18beta2 KNOT's LoRa test devices all worked too.  My
scheme tools
suggest +34 commands and +196 attributes from 7.17stable to 7.18beta2, which also means CHR 7.18beta2 works.
Still reading this list.  But lot to like in this one!

---
### Author: Unknown
Date: Unknown

*) l3hw - added initial HW offloading for VXLAN on compatible switches;
As I had assumed, VXLAN beat MPLS in the race to hardware offload :(

---
### Author: Unknown
Date: Unknown

This has some severe issues with file handling... I have scripts failing that can not remove an existing file.
Still investigating, can not tell exactly what conditions have to be met. 🤨

---
### Author: Unknown
Date: Unknown

Not installed for test, but this help comparing commands differencies on terminal:
viewtopic.php?p=1047229#p1047229

---
### Author: Unknown
Date: Unknown

*) system - added option to list and install available packages (after using "check-for-updates");
Oh that is great!  Have been asking for that / suggesting it for ages...
Now get on with it and split off some niche functions/applications into separate packages again!

---
### Author: Unknown
Date: Unknown

*) ipv6 - added FastTrack support;
love you guys <3

---
### Author: Unknown
Date: Unknown

This one could use a bit more explanation...
*) cloud - added file-share feature;
Now it did work to create a /ip/cloud/file-share ... but the URL with "routingthecloud.net" does not seem to work in browser (it gets a 404).  Is this for BTH use only?  i.e. I noticed the /ip/cloud/back-to-home-users seem to have some [unmentioned here] file options.  Anyway, I couldn't figure it out.
Also on this one...
*) fetch - added "http-max-redirect-count" parameter, allows to follow redirects;
While it works!  The logging around it could be improved, since there is no log that a redirect happened (other than see another request & previous 301 error logged)
*) lte - added initial eSIM management support (CLI only);
On this above, what modems/devices support these eSIM commands?
Since I complained about this ones – so thanks – but I can explain these items:
*) console - added dsv.remap to :serialize command to unpack array of maps from print as-value;
*) console - added file-name parameter to :serialize;
*) console - allow tab as dsv delimiter;
FWIW, this allow RouterOS "print" to be output as CSV
(or tab-separated)
file
(or console)
.  Here is an example of esoteric sounding "dsv.remap", which is likely more useful than it sounds:
Code:
Select all
# output /ip/firewall/connection using :serialize...
# using tab to console
:put [:serialize to=dsv delimiter="\t" options=dsv.remap  [/ip/firewall/connection/print as-value]]          
# CSV to file
:serialize to=dsv delimiter="," options=dsv.remap [/ip/firewall/connection/print as-value] file-name=connections.csv

---
### Author: Unknown
Date: Unknown

Maybe analogously to ipv4 fasttrack?
Yes, working good on my CCR1036.

---
### Author: Unknown
Date: Unknown

On this above, what modems/devices support these eSIM commands?
Most likely some device that still is in development...
We can still hope there will be more 5G client devices :-)

---
### Author: Unknown
Date: Unknown

Since 7.16 is added driver for RTL8156 but on x86 only. Would it be possible to add driver for arm64 too? Don't rush, 7.18beta3 is OK for me ;-)
Thanks...

---
### Author: Unknown
Date: Unknown

There is necessary to restart the device. At least in my case - hAP ac^2. IPv6 traffic is really fasttracked - CPU load went down under load. You can check it in IPv6 Firewall Mangle section - if dummy rules are with real figures IPv6 fasttrack is working, if there are the zeroes - it doesn't work.
I would like to understand how to properly activate Fasstrack for IPv6.
Code:
Select all
/ipv6 settings set allow-fast-path=yes
Code:
Select all
/ipv6 firewall filter add action=fasttrack-connection chain=forward comment="Enable FastTracked v6 traffic" connection-state=established,related
/ipv6 firewall filter add action=accept chain=forward comment="accept established,related,untracked" connection-state=established,related,untracked
Is that option enough? I'm confused by the identical counter values for both rules.
Screenshot_v6.png

---
### Author: Unknown
Date: Unknown

After manually adding IPv6 Fasttrack and enabiling IPv6 Fast Path in IPv6 settings, I can confirm that the new IPv6 FastTrack is working corectly:

---
### Author: Unknown
Date: Unknown

Upgraded RB460GX4 from 7.17 basic package and the result is full set of disabled additional packages.
For RB433 only installed packages are still installed after upgrade and no additional list.
EDIT: for RB450Gx4 I see that it's only a list of available packages. Not installed according to "Installed" column.
Everything will be back to normal after upgrading RB firmware to 7.18beta.
Not possible on CHR.
Simple reboot does the trick as well (just verified on wAP AC).

---
### Author: Unknown
Date: Unknown

I saw better throughput/CPU usage with a different set of hosts on the IPv6 fasttrack.  On a CCR2004-16G-IN I see 10gbit IPv6 speeds with ~50-60% cpu utlization.
What is odd is that an iperf in one direction has only ~40% cpu on the CCR but the other direction the "kernel" process spikes and adds an additional ~20% cpu to the load.  Both iperf outputs give ~9 Gbits/s.  This is just between 2 vlans with no additional firewall rules restricting access between vlans.

---
### Author: Unknown
Date: Unknown

This has some severe issues with file handling... I have scripts failing that can not remove an existing file.
Still investigating, can not tell exactly what conditions have to be met. 🤨
Let's try...
Code:
Select all
[eworm@mt] > /file/add name=test
[eworm@mt] > /file/remove test
[eworm@mt] > /file/add name=path/test
[eworm@mt] > /file/remove path/test
no such item
[eworm@mt] > /file/print
 # NAME           TYPE         SIZE LAST-MODIFIED       
 0 path           directory         2025-01-21 22:10:39 
 1 tmpfs          disk              2025-01-21 22:09:37 
 2 pub            directory         2022-03-04 07:46:16 
 3 skins          directory         2022-03-04 07:46:16 
 4 path/test      file            0 2025-01-21 22:10:39 
[eworm@mt] > /file/remove path/test
[eworm@mt] >
What the heck... Please fix this...

---
### Author: Unknown
Date: Unknown

How this works? Has someone tried already?
Code:
Select all
*)  cloud - added file-share feature;

---
### Author: Unknown
Date: Unknown

IPv6 Fasttrack works great. Tested with my old RB750Gr3, on speedtest.net with IPv6 server the hEX can now push 919 Mbps (equivalent to 932 Mbps with IPv4 due to 20-byte overhead), and that with a PPPoE WAN connection. Under 7.17 it could only achieve 266 Mbps with the same test server 😊.

---
### Author: Unknown
Date: Unknown

Tested with my old RB750Gr3, on speedtest.net with IPv6 server the hEX can now push 919 Mbps
Awesome news.  I wonder how the good old RB5009 will improve; it already does gigabit IPv6 without breaking a sweat!

---
### Author: Unknown
Date: Unknown

How this works? Has someone tried already?
Code:
Select all
*)  cloud - added file-share feature;
I enabled it, or at least I thought, but doesn't work.  It says running, and looked based on BTH's relay service to share files over internet.
Code:
Select all
/ip/cloud/file-share/settings/print
                enabled: yes                                                                         
               dns-name: <sn>.routingthecloud.net                                            
                 status: running                                                                     
             relay-rtts: EUR1 (ip4: 166.163ms, ip6: timeout)                                         
                         USA1 (ip4: 70.25ms, ip6: timeout)                                           
      relay-ipv4-status: connected (region: USA1 ip: <public ipv4> rtt: 70.25ms reachable: directly )
      relay-ipv6-status: testing rtt                                                                 
          relay-regions: EUR1                                                                        
                         USA1                                                                        
       relay-addressess: <public ipv4>                                                                
                         <public ipv4>.                                                               
  relay-addressess-ipv6: 2a02::<...>                                                          
                         2602::<...>                                                            
            certificate: <sn>.routingthecloud.net
Additionally it does a dynamic firewall rule to allow 443 from anywhere, and generates some HTTPS URLs in /ip/cloud/file-server – which I presume are how you use it — but those didn't work and returned a 404 from the router with a file-share enable:
Code:
Select all
/ip/cloud/file-share/print detail 
Flags: X - disabled; I - invalid 
 0    path=/ allow-uploads=yes expires=never key="UaN<keys>hs1" 
      url="https://9b<sn>.routingthecloud.net/s/UaN<keys>hs1" 
      direct-url="https://9b<sn>.routingthecloud.net/s/Ua<keys>hs1?dl" downloads=0
With "9b<sn>.routingthecloud.net" address resolves to my router's WAN IP address.
And, did find another
bug
when trying
/ip/cloud/export
- it fails to export config for the new /ip/cloud/file-share.  (Thus the "print" output above.)

---
### Author: Unknown
Date: Unknown

Upgraded one of 2 mlag members and experienced this:
Code:
Select all
2025-01-22 00:32:45 bridge,info "bridge" peer link up
 2025-01-22 00:32:45 bridge,info "bridge" peer connected
 2025-01-22 00:32:45 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:32:56 bridge,warning "bridge" peer disconnected
 2025-01-22 00:32:56 bridge,warning "bridge" peer link down
 2025-01-22 00:32:56 bridge,info "bridge" peer link up
 2025-01-22 00:32:56 bridge,info "bridge" peer connected
 2025-01-22 00:32:56 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:06 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:06 bridge,warning "bridge" peer link down
 2025-01-22 00:33:06 bridge,info "bridge" peer link up
 2025-01-22 00:33:06 bridge,info "bridge" peer connected
 2025-01-22 00:33:06 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:16 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:16 bridge,warning "bridge" peer link down
 2025-01-22 00:33:16 bridge,info "bridge" peer link up
 2025-01-22 00:33:16 bridge,info "bridge" peer connected
 2025-01-22 00:33:16 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:26 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:26 bridge,warning "bridge" peer link down
 2025-01-22 00:33:26 bridge,info "bridge" peer link up
 2025-01-22 00:33:27 bridge,info "bridge" peer connected
 2025-01-22 00:33:27 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:37 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:37 bridge,warning "bridge" peer link down
 2025-01-22 00:33:37 bridge,info "bridge" peer link up
 2025-01-22 00:33:37 bridge,info "bridge" peer connected
 2025-01-22 00:33:37 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:47 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:47 bridge,warning "bridge" peer link down
 2025-01-22 00:33:47 bridge,info "bridge" peer link up
 2025-01-22 00:33:47 bridge,info "bridge" peer connected
 2025-01-22 00:33:47 bridge,info "bridge" peer becomes primary AA:BB:C0:CA:C0:1A
 2025-01-22 00:33:57 bridge,warning "bridge" peer disconnected
 2025-01-22 00:33:57 bridge,warning "bridge" peer link down
 (add this 10 times)
Remote systems warned about "mismatching peer aggregator ID". So the layer2 network was broken.
Probably upgrading the second switch would have fixed the issue, but how to upgrade, if it breaks the MLAG?
After downgrading, the issue was gone.

---
### Author: Unknown
Date: Unknown

) x86 - fixed "unsupported speed" warning;
update 7.18 b2，also have unsupported speed
download/file.php?mode=view&id=71149
download/file.php?mode=view&id=71150
download/file.php?mode=view&id=71152
download/file.php?mode=view&id=71151

---
### Author: Unknown
Date: Unknown

Oh, nice list of features :)
Upgraded my Chateau 5G AX, no issues so far (simple setup). Upgraded my CRS317, something was off, could not get data through. Disconnected that thing from power for some minutes and rebooted, it is running fine now (??). I tried CEF syslog via TCP to graylog, logs seem to parse correctly :)

---
### Author: Unknown
Date: Unknown

Hi,
hex constantly rebooting itself. Only has IPsec tunnel configured for lab.
Confirmed, in v7.18beta2 the IPsec tunnels are established but no "traffic" passes through them and the router restarts by watchdog without creating a supout automatically.
Reverting to v7.17 resolves the problem immediately.

---
### Author: Unknown
Date: Unknown

At least in my case - hAP ac^2. IPv6 traffic is really fasttracked - CPU load went down under load.
After manually adding IPv6 Fasttrack and enabiling IPv6 Fast Path in IPv6 settings, I can confirm that the new IPv6 FastTrack is working corectly:
I wrote above that the meters are not working correctly. That is why it is not clear through which chain the packets go.

---
### Author: Unknown
Date: Unknown

Well yes OF COURSE "file share" function will open up 443  HTTPS from anywhere, it creates a public website with https on your router, which anyone can visit. This function is to create public download links for files, like this:
https://hcf087skgys.routingthecloud.net ... 3nJTFhJq3b
You can also enable uploads. Currently it works only for sharing Folders, there is a known bug that single file share does not work.

---
### Author: Unknown
Date: Unknown

7.18 "heavier" in weaker devices?
After trying (just for fun) 7.18beta2 in ARM and MIPSBE devices...
In an ARM (2 cpus) I saw no difference... What is good.
But on MIPSBE (my old RB951G-2HnD) I felt like it is making much more effort than with 7.16.2.
Yes, I know this is completely lay information.
It is not based on anything other than my perception of use.
Unfortunately, I do not have the graphs of these boxes to make any comparison, and even if I did, I would not be comparing identical conditions, which would invalidate any comparison.
But I decided to share this story... Maybe another colleague has the same feeling and can provide a more accurate comparison.
Before you ask me:
These boxes I tested are for my personal use, not from the ISPs I usually work with.
Their configuration is in vanilla mode for a home CPE.
The packages that are enabled on both are only RouterOS and Wireless. All other packages are installed but disabled.
My guess is that for these more modest devices, this large amount of extra functionality that is embedded in routeos.npk is weighing more than on the fatter devices.
And if that is the case, I reiterate my recurring suggestion to further fragment the resources of the base package into other packages.

---
### Author: Unknown
Date: Unknown

What is:
*) route - added /ip/route/check tool;

---
### Author: Unknown
Date: Unknown

The syntax between
routing
and
routes
(and probably in other places also) is still incongruent, as mentioned int 7.17rc:
By the way, it is worth mentioning that the syntax between routing and routes is still incongruent:
Code:
Select all
[administrator@fischerdouglas] > /routing/bgp/connection/print where address-families=
ip     ipv6     l2vpn     l2vpn-cisco     vpnv4     vpnv6
Code:
Select all
[administrator@fischerdouglas] > /routing/route/print where afi=  
bad     ip4     ip6     l2vpn     l2vpn-cisco     l2vpn-link     link     mip4     mip6     vpn4     vpn6
"address-families=" vs "afi="
"vpnv4" vs "vpn4"
"vpnv6" vs "vpn6"

---
### Author: Unknown
Date: Unknown

>  *) net - added initial support for automatic multicast tunneling (AMT) interface;
Is this the solution to route mDNS over WireGuard without using an EOIP tunnel?
If so, is there any usage information?
Thanks
dksoft

---
### Author: Unknown
Date: Unknown

Well yes OF COURSE "file share" function will open up 443  HTTPS from anywhere, it creates a public website with https on your router, which anyone can visit. This function is to create public download links for files, like this:
https://hcf087skgys.routingthecloud.net ... 3nJTFhJq3b
You can also enable uploads. Currently it works only for sharing Folders, there is a known bug that single file share does not work.
This file share feature is pretty neat. Hopefully it is hardened - from a security perspective - as much as possible. Would not be fun to have a remote code execution just because someone can use a custom crafted POST request or/and special crafted query params.

---
### Author: Unknown
Date: Unknown

CubePRO and CubeSA. Upgrade from 7.17 to 7.18beta2. Device will not boot, physical power disconnection required :-(

---
### Author: Unknown
Date: Unknown

Everything will be back to normal after upgrading RB firmware to 7.18beta.
Not possible on CHR.
Simple reboot does the trick as well (just verified on wAP AC).
There is no "issue", it is the new normal.  It says it shows the available packages after a "check for updates", and apparently until a reboot.
Nothing wrong.  Move along people!  It is actually a GOOD addition as now you can install packages without jumping through the hoops of downloading a zip file, extracting it, uploading a package to the router.  Just "enable" the package and reboot.

---
### Author: Unknown
Date: Unknown

yes, pe1chl is correct.
check for updates command will read the package list from the server. you can install packages directly from the server now. no need to download them and upload them by hand.
the list needs to be refreshed after reboot.

---
### Author: Unknown
Date: Unknown

> *) lte - added initial eSIM management support (CLI only);
This sounds interesting. Sounds as if eSIM support is coming. This is the main reason I didn't end up buying more Mikrotik LTE devices - it's very expensive to pay for multiple subscriptions, for each device to have its own SIM.

---
### Author: Unknown
Date: Unknown

I wrote above that the meters are not working correctly. That is why it is not clear through which chain the packets go.
Do the counters here show non-zero values?
ipv6-settings-ft.png
If not, you might need to turn off some feature on the bridge, according to MikroTik. Anything that might disable bridge fast-path
viewtopic.php?t=212754&start=300#p1118497
But normally the counter values for the two rules in the filter table are identical. That's why there is a dummy rule at the top of the table that shows you the real fasttrack'ed packets/bytes counters.

---
### Author: Unknown
Date: Unknown

yes, pe1chl is correct.
check for updates command will read the package list from the server. you can install packages directly from the server now. no need to download them and upload them by hand.
the list needs to be refreshed after reboot.
That's a great new feature! I would love to see such functionalities described/announced in detail in the changelog or linked to a dedicated Confluence (help.mikrotik.com/docs) release page. Otherwise, it feels a bit like an Easter egg hunt. Fun, perhaps, but we're not kids anymore. 😊

---
### Author: Unknown
Date: Unknown

it's still beta2, and the feature is in the changelog actually

---
### Author: Unknown
Date: Unknown

I understand it’s mentioned in the changelog, and yes, it’s still in beta. Similarly, the file share feature had its place in the changelog, but it wasn’t entirely clear what it was about until I saw a screenshot. Even stable channel releases often don’t provide much more detail than what’s written in the changelog.
I’m not suggesting creating something as elaborate as Apple’s release pages (e.g.,
https://www.apple.com/macos/macos-sequoia/
). I’m simply offering suggestions on how features could be better communicated or marketed to users.

---
### Author: Unknown
Date: Unknown

When the release is in Stable, we do often highlight interesting new features at the top of the changelog, but not while in beta

---
### Author: Unknown
Date: Unknown

Hi, what hardware( chips ) / CRSxxx / CCR2 will VXLAN hardware offload will be available on.
I note I get the HW tickbox on my CCR1036( probably should not see that )...

---
### Author: Unknown
Date: Unknown

Well yes OF COURSE "file share" function will open up 443  HTTPS from anywhere, it creates a public website with https on your router, which anyone can visit.
For me this feature is really useful, thank you!
I can finally stop using the container File Browser.
PS. beautiful cats! 😍

---
### Author: Unknown
Date: Unknown

... will open up 443  HTTPS from anywhere...
will it be safe? open port 443 on the router for everyone from where?

---
### Author: Unknown
Date: Unknown

Why this do not work since 7.17??? (on all 7.16.2 and less, included v6, work)
Code:
Select all
/sys log action set [find] disk-file-name="/log"
(work without the /)
Those, and other points where can be set a path, with "/" work correctly:
Code:
Select all
/ip hotspot profile set [find default=yes] html-directory="/hotspot"
/interface wifi capsman set package-path="/package"
/interface lte settings set firmware-path="/firmware"
/tool sniffer set file-name="/pcap/sniffer.pcap"
/ip proxy set cache-path="/web-proxy"
/ip smb shares set [ find default=yes ] directory="/pub"

---
### Author: Unknown
Date: Unknown

*) lte - removed nonexistent CQI reading for EC200A-EU modem;
This also can be applied to 621, I dont see any CQI values.

---
### Author: Unknown
Date: Unknown

... will open up 443  HTTPS from anywhere...
will it be safe? open port 443 on the router for everyone from where?
yes it is safe, as it only opens up the file share and has a valid HTTPS certificate. Webfig is not opened to the world, when you enable file share. It is a different service.
To be clear, if you already have yourself opened webfig to the world via https (not recommended though), fileshare will not be able to also run on TCP443, so it will only work through our relay service in this case.

---
### Author: Unknown
Date: Unknown

It would be nice to have REST API as a separate service too, that you can enable without allowing webfig...

---
### Author: Unknown
Date: Unknown

I love the new filesharing function, I tried to get it work on my Hap ax  lite LTE6 and invested an hour. I could not access it. Then I realized it will never work behind CGNAT, whatever I will try.... Except maybe over BTH VPN. Switching to a connection with no CGNAT and using the shown "File Direct URL" it works like a charm. Now I´d just need some small ARM box with an USB3 or SDCard, sthg like a HEX-S remake or even better a HAPax lite LTE with an SDCard slot or/and USB3.
Very nice release MT, thanks! IPv6 FastTrack and lots of WLAN stability improvements. A home user like me can´t miss much more.
Maybe Ipsec VTI in beta6. ? :)

---
### Author: Unknown
Date: Unknown

I love the new filesharing function, I tried to get it work on my Hap ax  lite LTE6 and invested an hour. I could not access it. Then I realized it will never work behind CGNAT, whatever I will try.... Except maybe over BTH VPN. Switching to a connection with no CGNAT and using the shown "File Direct URL" it works like a charm. Now I´d just need some small ARM box with an USB3 or SDCard, sthg like a HEX-S remake or even better a HAPax lite LTE with an SDCard slot or/and USB3.
Very nice release MT, thanks! IPv6 FastTrack and lots of WLAN stability improvements. A home user like me can´t miss much more.
Maybe Ipsec VTI in beta6. ?
it should work behind CGNAT. What error did you get when trying to access the URL? Can you switch back to CGNAT and post the URL?
NB! there is a known issue with sharing just one file. Share a folder instead.

---
### Author: Unknown
Date: Unknown

it should work behind CGNAT. What error did you get when trying to access the URL? Can you switch back to CGNAT and post the URL?
NB! there is a known issue with sharing just one file. Share a folder instead.
Can´t reproduce, sorry! It works now over the LTE & CGNAT. I probably messed up sthg myself.
I'm sharing a folder, but referencing the file directly works:
https://XXX.routingthecloud.net/s/YYY/testshare1.txt
and also
https://XXX.routingthecloud.net/s/YYY/testshare1.txt?dl
I´m missing a way to assign a new file share key.
There seems to be no way to export the config of the file share?
Code:
Select all
[admin@roamlte1] /ip/cloud/file-share> export
# 2025-01-22 13:56:28 by RouterOS 7.18beta2
# software id = AAA-BBBB
#
# model = L41G-2axD&FG621-EA
# serial number = CCCCCCCCCC
[admin@roamlte1] /ip/cloud/file-share>
For "settings":
Code:
Select all
[admin@roamlte1] /ip/cloud/file-share/settings> export
# 2025-01-22 13:59:35 by RouterOS 7.18beta2
# software id = AAA-BBBB
#
# model = L41G-2axD&FG621-EA
# serial number = CCCCCCCCC
[admin@roamlte1] /ip/cloud/file-share/settings>
That´s all no config shown.

---
### Author: Unknown
Date: Unknown

Hap ax3 with 18.rc2,
PPSK authentication has issues.
All clients have difficulties to connect. When some of them are able to connect there is no internet.
Some other clients just refuse to connect at all (ipad/macbooks).
Rolling back to 17, everything works again...

---
### Author: Unknown
Date: Unknown

>  *) net - added initial support for automatic multicast tunneling (AMT) interface;
Is this the solution to route mDNS over WireGuard without using an EOIP tunnel?
If so, is there any usage information?
Thanks
dksoft
wow! I'm curious about this feature too. Anyway, thanks to the Mikrotik team that gives me the impression that they listen to their users a little more!

---
### Author: Unknown
Date: Unknown

>  *) net - added initial support for automatic multicast tunneling (AMT) interface;
Is this the solution to route mDNS over WireGuard without using an EOIP tunnel?
AMT is a tunnel by itself ... not encrypted, only encapsulated into unicast UDP packets. My employer is using it to receive certain multicasts from source which is half a continent away without need for every transit network provider to reconfigure their routers. On linux machine AMT daemon creates tunnel which has to be attached to a TUN-type interface (the later can have IP address attached etc.). Multicast packets then drop out of that TUN interface. Probably setup on the other end (MC sender) is similar, with multicasts being
routed
through TUN interface.
Not sure how it's supposed to work on ROS ... And I doubt it would help with mDNS (but I might be very wrong here).
Since AMT itself doesn't offer any encryption, one could use wireguard (or any other encrypted tunneling solution) as outer "pipe". Then it boils down to proper routing settings to pass AMT unicast packets through encrypted tunnel.

---
### Author: Unknown
Date: Unknown

yes, pe1chl is correct.
check for updates command will read the package list from the server. you can install packages directly from the server now. no need to download them and upload them by hand.
the list needs to be refreshed after reboot.
That is great, thank you! It would be great if we could select the version to upgrade to, instead of just updating to "latest".
On RouterOS v7 in prod environment, I'm usually one-two minor version behind than latest.

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
Supported devices are ones that support
L3HW offloaded fasttrack/NAT
: CRS309-1G-8S+, CRS317-1G-16S+, CRS312-4C+8XG, CRS326-24S+2Q+, CRS326-4C+20G+2Q+, CRS354-48G/P-4S+2Q+, CRS504-4XQ, CRS510-8XS-2XQ, CRS518-16XS-2XQ, CRS520-4XS-16XQ, CCR2116-12G-4S+, CCR2216-1G-12XS-2XQ.
The main goal for v7.18 is to introduce basic VXLAN data-plane support. This allows you to set up static one-to-one mappings between VLANs and VXLANs in vlan-filtering bridge.
A configuration example (using static routing, but could be done through ospf,bgp):
sfp-sfpplus1 - upstream (underlay) interface
sfp-sfpplus3 - bridged port for untagged VLAN 10
sfp-sfpplus4 - bridged port for untagged VLAN 20
vxlan-1010 - overlay port for untagged VLAN 10
vxlan-1020 - overlay port for untagged VLAN 20
Code:
Select all
/interface bridge
add name=bridge1 vlan-filtering=yes
/interface vxlan
add bridge=bridge1 bridge-pvid=10 local-address=192.168.1.1 name=vxlan-1010 vni=1010
add bridge=bridge1 bridge-pvid=20 local-address=192.168.1.1 name=vxlan-1020 vni=1020
/interface bridge port
add bridge=bridge1 interface=sfp-sfpplus3 pvid=10
add bridge=bridge1 interface=sfp-sfpplus4 pvid=20
/interface vxlan vteps
add interface=vxlan-1010 remote-ip=192.168.1.2
add interface=vxlan-1020 remote-ip=192.168.1.2
/ip address
add address=192.168.1.1 interface=lo network=192.168.1.1
add address=192.168.10.10/24 interface=sfp-sfpplus1 network=192.168.10.0
/ip route
add dst-address=192.168.1.2 gateway=192.168.10.20
/interface ethernet switch
set 0 l3-hw-offloading=yes
At this point, some known features are not yet implemented.
Underlay (routing encapsulated VXLAN packets):
1. VTEPs are not supported over ECMP
2. VTEPs are not supported over bond, VLAN interface
3. VTEPs cannot operate within VRFs
4. VTEPs are not supported with IPv6
Overlay (forwarding between Ethernet and VXLAN):
1. VLAN tagging over VXLAN is not supported
2. Routing between different VXLAN VNIs is not supported
3. VTEPs are isolated, and there is no mechanism to control "horizon" between them
These things will be mentioned in our help documentation page shortly.
Let us know what VXLAN-related features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.

---
### Author: Unknown
Date: Unknown

But normally the counter values for the two rules in the filter table are identical. That's why there is a dummy rule at the top of the table that shows you the real fasttrack'ed packets/bytes counters.
Counter values for IPv4
Screenshot_IPv4_counter.png
Counter values for IPv6
Screenshot_IPv6_counter.png
Settings for IPv6
Screenshot_IPv6_settings.png
As you can see from the pictures - the values for IPv4 are different and the values for IPv6 are the same. So my question is - which of the rules in the picture handles IPv6 traffic?

---
### Author: Unknown
Date: Unknown

Let us know what features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
I'm using CCR2216 and i'm happy to do any testing thats needed and provide feedback.

---
### Author: Unknown
Date: Unknown

Counter values for IPv4
Screenshot_IPv4_counter.png
Counter values for IPv6
Screenshot_IPv6_counter.png
Settings for IPv6
Screenshot_IPv6_settings.png
As you can see from the pictures - the values for IPv4 are different and the values for IPv6 are the same. So my question is - which of the rules in the picture handles IPv6 traffic?
If fasttrack is working well, then most of the traffic will NOT be handled by those two rules, but will be counted by the dummy rule at the top of the filter table. That rule should show significantly higher counter values.
dummy-fasttrack6.png
In your case, it looks like fasttrack is working well for IPv6, because the two rows down below only have 20MiB and 84K packets, while the dummy rule at the top should show 4.4GiB and 4 million packets.
Fasttrack BYPASSES the firewall, which means what hit the two rules at the middle of the tables are normally only the 2nd packet of a connection, plus some more packets periodically (to keep connection tracking alive). Most packets of a fasttrack'ed connection will not be seen by the firewall, and will not hit those two rules. If you see huge values there, then fasttrack is not working well, or not working at all. If you see more traffic with the 2nd rule than the fasttrack rule, then that means you have a non-zero number of no-track packets (packets that bypass connection tracking). The untracked packets will not be fasttrack'ed, because fasttrack needs connection tracking.
In this case it looks like your IPv4 firewall has seen a lot of untracked packets (over 6GiB), that traffic is not using fasttrack.

---
### Author: Unknown
Date: Unknown

Awesome early beta release!
I see some nice fixes on the wifi and wifi-qcom packages. Any chance to get remote cap reboot and the ability to customize Wi-Fi rates?
Thank you!

---
### Author: Unknown
Date: Unknown

Let us know what features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
We're looking to implement this in our campus network, which makes use of 802.1x/RADIUS for VLAN assigment.
It'd be useful to have a VXLAN template, so that we could assign ranges for VNI/mcast group/RD/etc once, and have them only be realized when a VLAN is actually present on the bridge. When a VLAN is no longer present on the bridge; the control daemon can, after some grace period, prune the VXLAN config and leave the multicast groups.
I imagine it looking something like this:
Code:
Select all
# One range, computer does math
/interface/vxlan/template add bridge=bridge interface=uplink vlan-ids=10-19 base-vni=5000 base-group=239.0.1.10 ttl=10
# More explicit, prone to errors
/interface/vxlan/template add bridge=bridge interface=uplink vlan-ids=10-19 vnis=5000-5009 groups=239.0.1.10-239.0.1.19 ttl=10
The same pattern would apply when EVPN is implemented, otherwise the TCAM would fill up far too quickly.
Edit: And local loopback address as source interface, not having to specify a distinct uplink would be appreciated.

---
### Author: Unknown
Date: Unknown

In this case it looks like your IPv4 firewall has seen a lot of untracked packets (over 6GiB), that traffic is not using fasttrack.
Yeah, that's right. For IPv4, I exclude from processing traffic that goes through VPN tunnels to other networks (in different offices).
Thank you, that makes sense.

---
### Author: Unknown
Date: Unknown

Okay, I got the /ip/cloud/file-share feature almost working.  However @normis's comments do not quite match my experience:
it only opens up the file share and has a valid HTTPS certificate. Webfig is not opened to the world, when you enable file share. It is a different service.
I had HTTPS enabled in /ip/services before the upgrade.  It actually replaced an existing LE certificate on the HTTPS service with one generated by file-share with the routingthecloud.net domain.   So it's not quite a "different service" if it's messing with /ip/services' HTTPS one...  And it seems /ip/cloud/fire-share listens on everything EXCEPT what the standard HTTPS service listens on.  I already had an "Allowed IPs" set on HTTPS, with the LAN, so once I removed the LAN subnet...  I could see the /ip/cloud/file-share using the URLs.
To be clear, if you already have yourself opened webfig to the world via https (not recommended though), fileshare will not be able to also run on TCP443, so it will only work through our relay service in this case.
Since I kept getting 404 errors when using file-share URLs, I now get they were going the webfig/rest HTTPS.  But it did NOT use the proxy as @normis describes when the HTTPS port conflicts.  The <sn>.routingthecloud.net resolves to my WAN IP, and the /ip/cloud/file-share/setting/print shows it having a "direct" connection.
Anyway, the
interaction between /ip/cloud/file-share and the default /ip/service HTTPS should be looked at
...i.e.
there should be a separate entry from file-share shown under /ip/services — since that useful to audit the router's listen ports, and now this one can hide under /ip/cloud/....
ideally, you should be able to use BOTH file-share and webfig on LAN at same time — as noted above that did not work.  Right now, it seem file-share listens on everything except what /ip/service HTTPS listens on, so it's file-share OR webfig in my observations.
if /ip/service HTTPS is enabled with a cert, it should not just replace any existing certificate, or at least prompt (and if really separate it shouldn't muck with /ip/service HTTPS at all....)
not sure if the "proxy" failback works if the router has a public IP, as I was getting 404 not a proxied connection @normis suggests
some hash of serial number <sn> be better in <sn>.routingtheworld.net, as the <sn> be same as /ip/cloud one uses — I already don't like <sn> in the /ip/cloud DDNS since in might allow scanning on known serial number/ranges, so might be able to prevent that here
It would be nice to have REST API as a separate service too, that you can enable without allowing webfig...
Agree.  Or some fine-grain controls on the existing HTTPS one (i.e. allow-webfig=, allow-file-share=, allow-rest=, etc.)
It also be nice of the "automatic TLS certificate" that's used by /ip/cloud/file-share was made generic on the /certificate/enable-ssl-certificate one.  That part of the new /ip/cloud/file-share was pretty nifty — it actually got a certificate without needing open port 80, etc. & I presume it will automatically renew — this has been a sourly lacking feature of the LE/ACME support & now it's hidden inside a boutique feature like file-share.  IMO the certificate part of the /ip/cloud/file-share should be broken out into a GENERIC feature to get TLS cert, and then /ip/cloud/file-share using that feature to enable SSL cert it needs.

---
### Author: Unknown
Date: Unknown

It's the first public beta, there might be (for sure there are) bugs. Thank for the report, will investigate all the issues described.

---
### Author: Unknown
Date: Unknown

It's the first public beta, there might be (for sure there are) bugs. Thank for the report, will investigate all the issues described.
More info
> *) net - aggiunto supporto iniziale per l'interfaccia di tunneling multicast automatico (AMT);
:D

---
### Author: Unknown
Date: Unknown

It would be nice to have the ability to set a password for file sharing.

---
### Author: Unknown
Date: Unknown

A configuration example (using static routing, but could be done through ospf,bgp):
sfp-sfpplus1 - upstream (underlay) interface
sfp-sfpplus3 - bridged port for untagged VLAN 10
sfp-sfpplus4 - bridged port for untagged VLAN 20
vxlan-1010 - overlay port for untagged VLAN 10
vxlan-1020 - overlay port for untagged VLAN 20
&
At this point, some known features are not yet implemented.
Underlay (routing encapsulated VXLAN packets):
1. VTEPs are not supported over ECMP
2. VTEPs are not supported over bond, VLAN interface
3. VTEPs cannot operate within VRFs
4. VTEPs are not supported with IPv6
Overlay (forwarding between Ethernet and VXLAN):
1. VLAN tagging over VXLAN is not supported
2. Routing between different VXLAN VNIs is not supported
3. VTEPs are isolated, and there is no mechanism to control "horizon" between them
These things will be mentioned in our help documentation page shortly.
For the config examples, all of these are for untagged VLANs, but can tagged VLANs be bridged to vxlans?
For the 'not yets', are you mentioning these things specifically because they are on the roadmap and just not implemented?
I ask, because without VTEP over IPv6, this is useless to me.  Without being able to carry a VLAN on the VXLAN, it's useless to me.  as in, there's no work around to let me even partially use it.
As far as what we would like to see.
VXLAN over IPv6 VTEPS with the ability to be bridged to VLANs on interfaces, and the ability to carry VLANs.
For EVPN, basically what model are you building?  EVPN on MPLS or vxlan etc?  I would prefer IPv6 and VXLAN.  And hardware accelleration.

---
### Author: Unknown
Date: Unknown

A configuration example (using static routing, but could be done through ospf,bgp):
sfp-sfpplus1 - upstream (underlay) interface
sfp-sfpplus3 - bridged port for untagged VLAN 10
sfp-sfpplus4 - bridged port for untagged VLAN 20
vxlan-1010 - overlay port for untagged VLAN 10
vxlan-1020 - overlay port for untagged VLAN 20
Code:
Select all
/interface bridge
add name=bridge1 vlan-filtering=yes
/interface vxlan
add bridge=bridge1 bridge-pvid=10 local-address=192.168.1.1 name=vxlan-1010 vni=1010
add bridge=bridge1 bridge-pvid=20 local-address=192.168.1.1 name=vxlan-1020 vni=1020
/interface bridge port
add bridge=bridge1 interface=sfp-sfpplus3 pvid=10
add bridge=bridge1 interface=sfp-sfpplus4 pvid=20
/interface vxlan vteps
add interface=vxlan-1010 remote-ip=192.168.1.2
add interface=vxlan-1020 remote-ip=192.168.1.2
/ip address
add address=192.168.1.1 interface=lo network=192.168.1.1
add address=192.168.10.10/24 interface=sfp-sfpplus1 network=192.168.10.0
/ip route
add dst-address=192.168.1.2 gateway=192.168.10.20
/interface ethernet switch
set 0 l3-hw-offloading=yes
Yay. Testing it and it works well on two 309's with two RB5009's on either end.  I'm able to saturate the link with 9+Gbps.
Your example is missing an MTU adjustment that is necessary for full 1500-byte-sized packets to traverse the VXLAN.  While the routers could ping across the link, they couldn't do a bandwidth test until I bumped the L3 MTU on the SFP+ ports (set them to 9000) and the VXLAN MTU to a minimum of 1550.
Winbox 4 shows odd results in the bandwidth test.  All ports on all devices show 8-9Gbps of traffic, but the test window shows 5, 6, 7 Gbps randomly.

---
### Author: Unknown
Date: Unknown

>all of these are for untagged VLANs, but can tagged VLANs be bridged to vxlans?
Yes, VLAN can be tagged on the Ethernet side (in the example sfp-sfpplus3 or sfp-sfpplus4). But VXLAN cannot encapsulate VLANs, so it must be configured only for a one untagged VLAN.
>you mentioning these things specifically because they are on the roadmap and just not implemented?
Yes, these things are known limitations of the current implementation. They are on the roadmap, but wanted to understand what use cases are more common.
Thanks @sirbryan! MTU needs some work, will update the example later.

---
### Author: Unknown
Date: Unknown

Is wifi-qcom-ac dead as far as new features and bugfixes are concerned?

---
### Author: Unknown
Date: Unknown

Is wifi-qcom-ac dead as far as new features and bugfixes are concerned?
changes for "wifi" (not "wifi-qcom") should also apply to wifi-qcom-ac

---
### Author: Unknown
Date: Unknown

We occasionally notice bugfixes for wifi-qcom-ac in the changelog, which is highly appreciated. However, it would be quite interesting to know if dynamic VLAN assignment is planned for implementation - be it even in the distant future.

---
### Author: Unknown
Date: Unknown

>all of these are for untagged VLANs, but can tagged VLANs be bridged to vxlans?
Yes, VLAN can be tagged on the Ethernet side (in the example sfp-sfpplus3 or sfp-sfpplus4). But VXLAN cannot encapsulate VLANs, so it must be configured only for a one untagged VLAN.
not exactly what I was looking for.  Can a VXLAN be bridged to sftpplus4.vlan25 for example.
vxlan1 bridge to sfpplus4.vlan25
vxlan2 bridge to sfpplus4.vlan26
>you mentioning these things specifically because they are on the roadmap and just not implemented?
Yes, these things are known limitations of the current implementation. They are on the roadmap, but wanted to understand what use cases are more common.
Thanks.
For me it's IPv6 VTEPs (IPv6+OSPFv3 underlay network)
and VLANs.  For example, I might have radios on PVID1 on a port (sfp1) but be bridging the client port on the CPE to VLAN25, CPE untagged->VLAN25->sfp1.v25->bridged to vxlan25->core-router.

---
### Author: Unknown
Date: Unknown

We occasionally notice bugfixes for wifi-qcom-ac in the changelog, which is highly appreciated. However, it would be quite interesting to know if dynamic VLAN assignment is planned for implementation - be it even in the distant future.
Do you mean VLAN assignment via RADIUS or Access list?

---
### Author: Unknown
Date: Unknown

@EdPa
viewtopic.php?t=214110
I didn't want to jam this thread up too much, but that's my current use case.

---
### Author: Unknown
Date: Unknown

My Chateau LTE has been having some stability issues and seeing the improvements in this Beta release, i  thought I'd upgrade.  this went fine, then i noticed there was a modem firmware upgrade available, i did this also.  now i cant connect to 3/4G. I noticed just now that my routerboard fw is still at 7.17, with an Upgrade Firmware version of 7.18beta2.  should i upgrade this also?

---
### Author: Unknown
Date: Unknown

I gave upgrading my ccr2116 a shot. What worked: IPv6 routing and firewall, isis routing, multiple wireguard tunnels and containers on legacy-ip. What did not work: Containers were not reachable through ipv6 anymore. Didn't have time to do deeper investigations, I reverted to my backup partition (v7.17).

---
### Author: Unknown
Date: Unknown

Some nice fixes, I like the look of this one *) wifi - try to authenticate client as non-FT client if it provides incomplete set of FT parameters;
I thought this might fix my device not being able to connect to a SSID with FT enabled. Sadly not for me. Oh well!

---
### Author: Unknown
Date: Unknown

We occasionally notice bugfixes for wifi-qcom-ac in the changelog, which is highly appreciated. However, it would be quite interesting to know if dynamic VLAN assignment is planned for implementation - be it even in the distant future.
Do you mean VLAN assignment via RADIUS or Access list?
datapath in first place. but yes others as well.

---
### Author: Unknown
Date: Unknown

My Chateau LTE has been having some stability issues and seeing the improvements in this Beta release, i  thought I'd upgrade.  this went fine, then i noticed there was a modem firmware upgrade available, i did this also.  now i cant connect to 3/4G. I noticed just now that my routerboard fw is still at 7.17, with an Upgrade Firmware version of 7.18beta2.  should i upgrade this also?
yes, upgrade routerboard firmware too. Regarding the modem: maybe you need to powercycle your chateau to give the modem a cold boot.

---
### Author: Unknown
Date: Unknown

Since upgrading to v7.18beta2, I'm seeing
write-sect-since-reboot
increasing very fast (40k in 24h).
Code:
Select all
[cesar-ro@RB5009] > /system/resource/print 
                   uptime: 1d1h17m20s         
                  version: 7.18beta2 (testing)
               build-time: 2025-01-21 09:27:58
         factory-software: 7.0.5              
              free-memory: 451.9MiB           
             total-memory: 1024.0MiB          
                      cpu: ARM64              
                cpu-count: 4                  
            cpu-frequency: 350MHz             
                 cpu-load: 6%                 
           free-hdd-space: 980.7MiB           
          total-hdd-space: 1024.0MiB          
  write-sect-since-reboot: 42222              
         write-sect-total: 11915918           
               bad-blocks: 0%                 
        architecture-name: arm64              
               board-name: RB5009UG+S+        
                 platform: MikroTik
I'm not sure what is causing this. I can't run
/file/print
to check further because of the risk of crashing RouterOS due to the container stores I have.

---
### Author: Unknown
Date: Unknown

Let us know what features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
I'm using CCR2216 and i'm happy to do any testing thats needed and provide feedback.
i++; on VRF Hardware Offload!
L3VPN (over MPLS or over EVPN Routes Type 5) also with Hardware Offload+Fastpath+Multicore would be great!

---
### Author: Unknown
Date: Unknown

Since upgrading to v7.18beta2, I'm seeing
write-sect-since-reboot
increasing very fast (40k in 24h).
Code:
Select all
[cesar-ro@RB5009] > /system/resource/print 
                   uptime: 1d1h17m20s         
                  version: 7.18beta2 (testing)
               build-time: 2025-01-21 09:27:58
         factory-software: 7.0.5              
              free-memory: 451.9MiB           
             total-memory: 1024.0MiB          
                      cpu: ARM64              
                cpu-count: 4                  
            cpu-frequency: 350MHz             
                 cpu-load: 6%                 
           free-hdd-space: 980.7MiB           
          total-hdd-space: 1024.0MiB          
  write-sect-since-reboot: 42222              
         write-sect-total: 11915918           
               bad-blocks: 0%                 
        architecture-name: arm64              
               board-name: RB5009UG+S+        
                 platform: MikroTik
I'm not sure what is causing this. I can't run
/file/print
to check further because of the risk of crashing RouterOS due to the container stores I have.
Why is your CPU frequency 350Mhz ?

---
### Author: Unknown
Date: Unknown

RouterOS version 7.18beta has been released on the "v7 testing" channel!
*) console - allow to toggle script error logging with "/console settings log-script-errors";
GREAT! - thank you MikroTik team!

---
### Author: Unknown
Date: Unknown

Why is your CPU frequency 350Mhz ?
cpu-frequency: auto
in
/system/routerboard/settings
.

---
### Author: Unknown
Date: Unknown

Oh ok mine goes from 864 to 1800, just curious!

---
### Author: Unknown
Date: Unknown

>all of these are for untagged VLANs, but can tagged VLANs be bridged to vxlans?
Yes, VLAN can be tagged on the Ethernet side (in the example sfp-sfpplus3 or sfp-sfpplus4). But VXLAN cannot encapsulate VLANs, so it must be configured only for a one untagged VLAN.
Ed, the following isn't working.  Is it supposed to?
Code:
Select all
/interface bridge
add name=bridge vlan-filtering=yes
/interface bridge port
add bridge=bridge frame-types=admit-only-vlan-tagged interface=sfp-sfpplus1-rb5009-3 pvid=100
/interface bridge vlan
add bridge=bridge tagged=sfp-sfpplus1-rb5009-3 untagged=vxlan-10 vlan-ids=10
/interface vxlan
add bridge=bridge bridge-pvid=10 local-address=10.10.10.1 mtu=1600 name=vxlan-10 vni=10
/interface vxlan vteps
add interface=vxlan-10 remote-ip=10.10.10.2
(Traffic on the rb5009's ports is tagged into VLAN 10 then sent to the CRS309's SFP+1 port.)
Also not working: Creating a VLAN10 interface, tagged to VLAN 10 on the bridge.  The bridge can ping itself and the local router, but it can't ping across the VXLAN to the remote switch and router (I put an IP on VLAN10 all the way through just for testing).

---
### Author: Unknown
Date: Unknown

Let us know what features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
I support this request.

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
Supported devices are ones that support
L3HW offloaded fasttrack/NAT
: CRS309-1G-8S+, CRS317-1G-16S+, CRS312-4C+8XG, CRS326-24S+2Q+, CRS326-4C+20G+2Q+, CRS354-48G/P-4S+2Q+, CRS504-4XQ, CRS510-8XS-2XQ, CRS518-16XS-2XQ, CRS520-4XS-16XQ, CCR2116-12G-4S+, CCR2216-1G-12XS-2XQ.
The main goal for v7.18 is to introduce basic VXLAN data-plane support. This allows you to set up static one-to-one mappings between VLANs and VXLANs in vlan-filtering bridge.
A configuration example (using static routing, but could be done through ospf,bgp):
sfp-sfpplus1 - upstream (underlay) interface
sfp-sfpplus3 - bridged port for untagged VLAN 10
sfp-sfpplus4 - bridged port for untagged VLAN 20
vxlan-1010 - overlay port for untagged VLAN 10
vxlan-1020 - overlay port for untagged VLAN 20
Code:
Select all
/interface bridge
add name=bridge1 vlan-filtering=yes
/interface vxlan
add bridge=bridge1 bridge-pvid=10 local-address=192.168.1.1 name=vxlan-1010 vni=1010
add bridge=bridge1 bridge-pvid=20 local-address=192.168.1.1 name=vxlan-1020 vni=1020
/interface bridge port
add bridge=bridge1 interface=sfp-sfpplus3 pvid=10
add bridge=bridge1 interface=sfp-sfpplus4 pvid=20
/interface vxlan vteps
add interface=vxlan-1010 remote-ip=192.168.1.2
add interface=vxlan-1020 remote-ip=192.168.1.2
/ip address
add address=192.168.1.1 interface=lo network=192.168.1.1
add address=192.168.10.10/24 interface=sfp-sfpplus1 network=192.168.10.0
/ip route
add dst-address=192.168.1.2 gateway=192.168.10.20
/interface ethernet switch
set 0 l3-hw-offloading=yes
At this point, some known features are not yet implemented.
Underlay (routing encapsulated VXLAN packets):
1. VTEPs are not supported over ECMP
2. VTEPs are not supported over bond, VLAN interface
3. VTEPs cannot operate within VRFs
4. VTEPs are not supported with IPv6
Overlay (forwarding between Ethernet and VXLAN):
1. VLAN tagging over VXLAN is not supported
2. Routing between different VXLAN VNIs is not supported
3. VTEPs are isolated, and there is no mechanism to control "horizon" between them
These things will be mentioned in our help documentation page shortly.
Let us know what VXLAN-related features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
MT you are starting to do serious business to leverage your marvell chips product line.
very appreciated
pa:
GREAT work for a beta2 release.
looking forward for more awesome stuff.
next: MACsec with HW-offload ❤️

---
### Author: Unknown
Date: Unknown

Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
I'm using CCR2216 and i'm happy to do any testing thats needed and provide feedback.
i++; on VRF Hardware Offload!
L3VPN (over MPLS or over EVPN Routes Type 5) also with Hardware Offload+Fastpath+Multicore would be great!
+1 too.
could replace some serious cisco parts with this working!

---
### Author: Unknown
Date: Unknown

side note
love how engaged MT support is on 7.17 and 7.18bXX forum threads the last days.
feels like things really start to get moving again

---
### Author: Unknown
Date: Unknown

Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
I support this request.
+1

---
### Author: Unknown
Date: Unknown

Let us know what features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading or multicore processing
+1 for both !

---
### Author: Unknown
Date: Unknown

At this point, some known features are not yet implemented.
Underlay (routing encapsulated VXLAN packets):
1. VTEPs are not supported over ECMP
2. VTEPs are not supported over bond, VLAN interface
3. VTEPs cannot operate within VRFs
4. VTEPs are not supported with IPv6
Overlay (forwarding between Ethernet and VXLAN):
1. VLAN tagging over VXLAN is not supported
2. Routing between different VXLAN VNIs is not supported
3. VTEPs are isolated, and there is no mechanism to control "horizon" between them
These things will be mentioned in our help documentation page shortly.
Let us know what VXLAN-related features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
First off.
Thank you
to the Mikrotik team.   This has been a LONG time coming, it is great to have this functionality arrive.
Regarding VXLAN:
Of the Underlay features 1-4 are important to us, and in approximately that order of importance. Of the Overlay features 1 and 3 are also important to us immediately.
Regarding eVPN:
- eVPN+VXLAN
- eVPN+MPLS
- eVPN Type 2 routes (IP/MAC Distribution)
- eVPN Type 3 routes (ingress replication)
- eVPN Type 5 routes (IP prefix route)
Why these features ?
They allow:
- Datacentre Interconnect
- Multi-point replication of packets (MC-LAG equivalent)
- Multi-Homed IP Gateways

---
### Author: Unknown
Date: Unknown

Why in my log is THAT:
LAN: radius authentication failed for F4:02:28:75:7A:10: current license allows only 20 active sessions
and:
License maximum active session limit reached.
???

---
### Author: Unknown
Date: Unknown

Why in my log is THAT:
LAN: radius authentication failed for F4:02:28:75:7A:10: current license allows only 20 active sessions
and:
License maximum active session limit reached.
???
Your Router with LVL 4 has only 20 User manager Sesions
https://help.mikrotik.com/docs/spaces/R ... ekeylevels
PS Mega +1 on all work for HW VXLAN.

---
### Author: Unknown
Date: Unknown

Please stop setting MTU underlay as "just enough"!
I know that is a bit off topic... Sorry!
But what is written here, stays forever...
Please do not exemplify or even use 1550 or 1600 MTU on underlay interfaces...
Warning this because I already suffered a lot with this sloppy deployments, needing to rebuild entire scenarios with hundreds of equipments.
And that could be avoided just following a simple rule:
"It is an undelay point-to-point link on the backbone? Set the bigger MTU is supported by both equipments!"
This applies to vxlan, MPLS, SRv6, and all sorts of encapsulating protocols.
I even suggest that this recommendation to be inserted in some way into the RouterOS confluence.

---
### Author: Unknown
Date: Unknown

+1 on nz_monkey regarding VXLAN comments and eVPN.
Could I add in( no doubt a new switch chip for future products ), but hardware offloaded MACSEC as part of the underlay.
"And include jumbo frames ( aka 9000 byte + frame)"
My use case is commercial datacenter/carrier providers(via L2) to remote sites, as part of cyber security uplift.

---
### Author: Unknown
Date: Unknown

Why in my log is THAT:
LAN: radius authentication failed for F4:02:28:75:7A:10: current license allows only 20 active sessions
and:
License maximum active session limit reached.
???
Your Router with LVL 4 has only 20 User manager Sesions
https://help.mikrotik.com/docs/spaces/R ... ekeylevels
PS Mega +1 on all work for HW VXLAN.
Thank you. I know that. But, device is in basements, works only in special case, and uptime only 15 minutes. First log like this from 10 years. Strange.

---
### Author: Unknown
Date: Unknown

*) chr - fixed limited upgrades for expired instances;
No more updates for expired instances?

---
### Author: Unknown
Date: Unknown

+1 on nz_monkey regarding VXLAN comments and eVPN.
Could I add in( no doubt a new switch chip for future products ), but hardware offloaded MACSEC as part of the underlay.
"And include jumbo frames ( aka 9000 byte + frame)"
My use case is commercial datacenter/carrier providers(via L2) to remote sites, as part of cyber security uplift.
Agreed on this, but in-theory if the chipset supports it, the MACSEC will be transparent to the upper layer protocols e.g. IP, VXLAN, MPLS

---
### Author: Unknown
Date: Unknown

Let us know what VXLAN-related features you need, this could help us prioritize development.
@EdPa:
If I had to pick one, defintely VLAN support!  (VTEPs over VLAN interface but most importantly: ability for customers to carry tagged vlans in the VXLAN (overlay))

---
### Author: Unknown
Date: Unknown

I have all my ip>services in a separate VRF
After upgrading to 7.18b2 the winbox service was 'invalid'
Opened and applied the current settings with no changes and it became valid

---
### Author: Unknown
Date: Unknown

how does that work?
*) log - added option to select TCP or UDP for remote logging;

---
### Author: Unknown
Date: Unknown

Please stop setting MTU underlay as "just enough"!
I guess that L2MTU setting affect number of frame buffers available. E.g.: if switch chip has 1MB of memory, if L2MTU is set to 1516 bytes, then this means space for 691 frames buffered. Setting L2MTU to 2000 bytes reduces number of buffered frames to maximum of 524. Setting it to 9000 bytes maximum buffered frames reduces to 116. And this buffer reduction will affect overall throughput through switch/bridge.
So IMO setting L2MTU to something just large enough does improve performance of L2 operations. Even if every so slightly. And contrast this to small portion of users wanting to do something special on their equipment (no, running VXLAN is not the norm yet) ... they just have to think everything over down to L1.

---
### Author: Unknown
Date: Unknown

how does that work?
*) log - added option to select TCP or UDP for remote logging;
Before RouterOS only did send syslog over UDP, you can now select TCP as well.
For long log lines TCP is a must.  But from my experience, do use UDP of TCP is not needed.  Faster.
tcp log.png
Pro tip. (but other combination does work)
Use
514/UDP
1514/TCP
6514/TLS

---
### Author: Unknown
Date: Unknown

how does that work?
*) log - added option to select TCP or UDP for remote logging;
Like this:
/system/logging/action> add target=remote remote-protocol=udp
It depends on the software on the receiving end. This goes together with the new remote log format CEF, which works with SIEM such as Greylog and Elastic.

---
### Author: Unknown
Date: Unknown

It would be nice to have the ability to set a password for file sharing.
The random link itself is a security measure. Set "expires" and do not put the link anywhere public, then it's just as secure. You can even treat the last part of the URL as a password and give it separately.

---
### Author: Unknown
Date: Unknown

I guess that L2MTU setting affect number of frame buffers available. E.g.: if switch chip has 1MB of memory, if L2MTU is set to 1516 bytes, then this means space for 691 frames buffered. Setting L2MTU to 2000 bytes reduces number of buffered frames to maximum of 524.
Not only that, it will halve the number of buffers to 345, because the increase is in a whole-number-factor of the original buffer size. Even increasing the L2MTU by a few bytes will double the buffer usage, according to this MikroTik video at the 7:03 mark:
https://www.youtube.com/watch?v=7a_z1jAdIME&t=423s

---
### Author: Unknown
Date: Unknown

I guess that L2MTU setting affect number of frame buffers available. E.g.: if switch chip has 1MB of memory, if L2MTU is set to 1516 bytes, then this means space for 691 frames buffered. Setting L2MTU to 2000 bytes reduces number of buffered frames to maximum of 524.
Not only that, it will halve the number of buffers to 345, because the increase is in a whole-number-factor of the original buffer size.
Yep. I was calculating "best case scenario" where buffer memory is used to its max ... but with very likely performance hit due to how switch chip engine works with memory (some sort of boundary alignment is used very often and that introduces some buffer item size granularity into equation).

---
### Author: Unknown
Date: Unknown

Set "expires"
What is the format to use for expires?
I tried with 5d 00:00:00 but it is not accepted
Thanks

---
### Author: Unknown
Date: Unknown

set 0 expires=2025-01-25
(2025-01-25 00:00:00)

---
### Author: Unknown
Date: Unknown

set 0 expires=2025-01-25
So with WinBox it is like this
fshare.png
Thanks Normis!

---
### Author: Unknown
Date: Unknown

That's in old winbox, the new WinBox 4 also uses ISO8601 date format

---
### Author: Unknown
Date: Unknown

Double post

---
### Author: Unknown
Date: Unknown

Regarding new CEF logging format.
I do not see a filed that shows severity
As example I did send:
:log warning "warning"
:log error "error"
etc
Code:
Select all
2025-01-23T08:49:43.951+0100 RB951 CEF:0|MikroTik|RB951Ui-2HnD|7.18beta2 (testing)|9|script,debug|Low|msg=debug
2025-01-23T08:48:16.902+0100 RB951 CEF:0|MikroTik|RB951Ui-2HnD|7.18beta2 (testing)|9|script,error|High|msg=error
2025-01-23T08:48:05.161+0100 RB951 CEF:0|MikroTik|RB951Ui-2HnD|7.18beta2 (testing)|9|script,warning|Medium|msg=warning
2025-01-23T08:47:55.690+0100 RB951 CEF:0|MikroTik|RB951Ui-2HnD|7.18beta2 (testing)|9|script,info|Low|msg=info
I see that
debug
and
info
shows
Low
warning
show
Medium
Error
show
High
I do expect a field show a value from 0-7
From RouterOS manual:
syslog-severity (alert, auto, critical, debug, emergency, error, info, notice, warning; Default: auto)
I can see info as part of an other field, like
script,warning
, but should be a separated field with correct syslog severity.
What does the number after the OS version mean  (in example 9)
It stills show some messy info.
system,info
for config changes.
system,info,account
for users logging inn or out
etc
I did hope this part goes away and all be structured at same format.
But this is just the first beta, so lets hope :)
Edit:
Many system uses a message ID, maybe 9 is that?

---
### Author: Unknown
Date: Unknown

That's in old winbox, the new WinBox 4 also uses ISO8601 date format
Did found that the new CEF log format also support ISO8601 and will give milliseconds. That is fantastic :)

---
### Author: Unknown
Date: Unknown

I'm not familiar with that CEF format, but isn't there supposed to be a unique message identifier as well?  Or does CEF not specify that?

---
### Author: Unknown
Date: Unknown

More CEF features are in development for the next betas

---
### Author: Unknown
Date: Unknown

More CEF features are in development for the next betas
well..

---
### Author: Unknown
Date: Unknown

Make me happy. :) :)
Seems that just the main header is added and not much done to messages it self.

---
### Author: Unknown
Date: Unknown

*) system,arm - automatically increase boot part size on upgrade or netinstall (fixed upgrade failed due to a lack of space on kernel disk/partition);
Well I tried to beta-test as update to 7.17 was failing and it looks like this change does not help (for in-place update).
RB450Gx4 7.16.2 -> 7.18beta2 - "upgrade failed, free 17 kB of kernel disk space"
Is there any alternative to netinstall in this situation? Update to 7.18beta2 fails in same way as update to 7.17...

---
### Author: Unknown
Date: Unknown

Maybe the problem is worn out disk?  It works but the usable area is smaller than needed.

---
### Author: Unknown
Date: Unknown

That would need to be over 70% of all space "worn out" then. It does not look even remotely plausible. We already know that problem is elsewhere...

---
### Author: Unknown
Date: Unknown

if you have multiple partitions, remove them, then reboot twice and update to 7.17. This worked with 2 CCR2004.

---
### Author: Unknown
Date: Unknown

...It does not look even remotely plausible....
We are in the middle of a brainSTORM so even the stupidest idea could have positive effect.

---
### Author: Unknown
Date: Unknown

on [
successful
] upgrade or netinstall
Simply the "fix" is not installed until is not successfully installed the 7.18beta2.
The fix is for future versions, not to fix current.

---
### Author: Unknown
Date: Unknown

if you have multiple partitions, remove them, then reboot twice and update to 7.17. This worked with 2 CCR2004.
Device does not have multiple partitions

---
### Author: Unknown
Date: Unknown

on [
successful
] upgrade or netinstall
Simply the "fix" is not installed until is not successfully installed the 7.18beta2.
The fix is for future versions, not to fix current.
Then original question stands - are there any alternatives to netinstall...

---
### Author: Unknown
Date: Unknown

*) ipv6 - added FastTrack support;
Finally!!!
Can we expect fast track with policy routing support?

---
### Author: Unknown
Date: Unknown

Let us know what VXLAN-related features you need, this could help us prioritize development.
Works great here with the simple config supplied. Between a CRS518-16XS-2XQ and CRS326-24S+2Q+
We would like to see Tagged vlans being able to be passed over the VXLan Bridge as a feature.

---
### Author: Unknown
Date: Unknown

Then original question stands - are there any alternatives to netinstall...
They should make 7.16.3 (which would be the same size as the kernel that goes with it) with the space fix,
mandatory before moving to 7.17.x or 7.18.x
That way you would have the problem already solved.

---
### Author: Unknown
Date: Unknown

If Mikrotik was unable to even notice this problem since September (when first 7.17 beta came out) then it does not look likely that this will happen...

---
### Author: Unknown
Date: Unknown

If you think about it, it's the only logical solution for those stuck on 7.16.2, which obviously doesn't concern those who have already installed 7.17 or 7.18beta2.
What I wonder is why if I think about it in a few moments, that I AM NOT PAID TO DO IT,
why those who are paid by MikroTik to do things properly, don't do it???

---
### Author: Unknown
Date: Unknown

Well, no one reported it for the testing (beta and rc) releases...

---
### Author: Unknown
Date: Unknown

Mikrotik came up with a version-independent fixup package in the past... That could work here as well.

---
### Author: Unknown
Date: Unknown

I AM NOT an expert on the file system used,
but in the past updates left space occupied on the disk not assigned to any file.
A "fsck" solved it by releasing the space.
This happened in x86 and CHR (mounted separately the disk on ubuntu for launch "fsck"), but probably
given the space freed up by netinstall compared to an update from one version (just netinstalled) to another (autoupdate or drag-n-drop), it was the same...

---
### Author: Unknown
Date: Unknown

Well, no one reported it for the testing (beta and rc) releases...
Because this time with device-mode s–t no one want lock his devices, so less persons than before do tests...

---
### Author: Unknown
Date: Unknown

Well I skipped 7.17 because of that, but now I am testing this beta because it fixes a BGP problem (still have to test if it fixes all problems)...
Now I find that by default "partitions" mode is OFF but I still can switch between partitions and copy active to backup, so it is not so bad as feared.

---
### Author: Unknown
Date: Unknown

Yes, but the first implementations lock "everything", so this caused many testers to skip any testing...

---
### Author: Unknown
Date: Unknown

Tried a new local update feature.
If both host and client have RouterOS 7.17 installed, client shows available package correctly. But after updating the host to 7.18beta2, client shows empty name and 0.0 version.
.
LocalUpdateBug.png

---
### Author: Unknown
Date: Unknown

Well, no one reported it for the testing (beta and rc) releases...
Because this time with device-mode s–t no one want lock his devices, so less persons than before do tests...
Good to know i'm not the only one
(also, 7.17 apparently can brick certain hardware, such as rb450gx4, also reported on 7.18b2 )
all the more reason for moving 7.16.x to "longterm"

---
### Author: Unknown
Date: Unknown

Anyway, this release is shaping up much better.  7.17 was a mess, I lost the RAID in the first 7.17 beta myself and containers didn't start etc.  With 7.18beta2, I had no issues.
I'm guessing Mikrotik would rather see case to support@mikrotik – with a supout.rif – on the 7.16.2 upgrade with kernel disk space issue from @nmt1900.  It could be something dumb or hardware-specific etc., and not a wholesale failure of Mikrotik release process...  But without more detail than be appropriate in the release thread, we're not going to get the bottom of it.
*) dhcpv4-client - allow selecting to which routing tables add default route;
Now if the only added one more drop-down to /ip/dhcp-client to set check-gateway= so you don't need a DHCP script to do it for multiwan...  I'd be willing to issue a pardon for 7.17 to Mikrotik.

---
### Author: Unknown
Date: Unknown

I am happy to notice that the "regex" match in Logging Rules was added!  (actually in 7.17 but I skipped that release)
In the category "it is never good enough": could we get a "not" option for that (the familiar box in which a ! can be clicked)?

---
### Author: Unknown
Date: Unknown

Also in the "logging" category: could we get a log message when the state of a route with check-gateway option changes (up or down)?
I enabled all "route" messages but there does not appear to be a message for that, other than during initial establishment.

---
### Author: Unknown
Date: Unknown

Because this time with device-mode s–t no one want lock his devices, so less persons than before do tests...
Good to know i'm not the only one
(also, 7.17 apparently can brick certain hardware, such as rb450gx4, also reported on 7.18b2 )
all the more reason for moving 7.16.x to "longterm"
viewtopic.php?p=1121167#p1121155

---
### Author: Unknown
Date: Unknown

viewtopic.php?t=213301
fixed

---
### Author: Unknown
Date: Unknown

I'm not familiar with that CEF format, but isn't there supposed to be a unique message identifier as well?  Or does CEF not specify that?
Hello,
you may have a look at the following if you want to understand what CEF means :
https://www.microfocus.com/documentatio ... %20CEF.htm
https://www.microfocus.com/documentatio ... andard.pdf
Best Regards,
Daniel

---
### Author: Unknown
Date: Unknown

Thanks!  What I mean is the deviceEventClassId field that I have seen in some examples, but apparently does not yet exist in RouterOS.
It probably requires "changes all over the software" to add that, and it would be nice if it would appear in non-CEF messages as well.
(in the text or as a topic)

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
Supported devices are ones that support
L3HW offloaded fasttrack/NAT
: CRS309-1G-8S+, CRS317-1G-16S+, CRS312-4C+8XG, CRS326-24S+2Q+, CRS326-4C+20G+2Q+, CRS354-48G/P-4S+2Q+, CRS504-4XQ, CRS510-8XS-2XQ, CRS518-16XS-2XQ, CRS520-4XS-16XQ, CCR2116-12G-4S+, CCR2216-1G-12XS-2XQ.
About the supported devices, besides the ones you cited, are there plans to grant VXLAN HW to CRS3XX that doesn't have fasttrack/NAT offloading?

---
### Author: Unknown
Date: Unknown

Feature which will help me considerably are L3HW offloading full vrf support not only the main table
As well as Full MPLS Offloading
AND
multicore processing
+1 for both !
+1 for both !

---
### Author: Unknown
Date: Unknown

When upgrading a RB951G-2HnD and logging in to the commandline I got this story:
Code:
Select all
2025-01-23 20:11:32 system,info,critical Optimal nand stability requires a backup-routerboot upgrade.\r
2025-01-23 20:11:32 system,info,critical Universal package can be found here:\r
2025-01-23 20:11:32 system,info,critical https://help.mikrotik.com/docs/display/ROS/RouterBOARD#RouterBOARD-Settings
I remember I have seen that before.  So I went to that page and downloaded a file "bb-upgrade-7.6.dpk" which is supposed to be a "universal package to fix it" but on the boot log it says:
Code:
Select all
installed bb-upgrade-7.6
FAILED to upgrade backup booter: wrong running booter version
What's up with that?  Did I wait too long to apply this fix?

---
### Author: Unknown
Date: Unknown

What is your backup firmware??
You must install and use 7.6 RouterBOOT and RouterOS
do not work with other version of
current
RouerBOOT (you already know that RouterBOOT is not RouterOS, I write that for the others...)
when trying to enable the feature, do the following:
a) upgrade or downgrade the device specifically to the 7.6 release
b) upgrade your current RouterBOOT version with "/system routerboard upgrade" then reboot the device, so that the RouterBOOT version (current-firmware version when checking "/system routerboard print") is the same as the firmware version ("/system resource print") installed, which should be 7.6.
and the correct link is this:
https://help.mikrotik.com/docs/spaces/R ... bootloader

---
### Author: Unknown
Date: Unknown

That is of course completely impractical.  One cannot install an arbitrary RouterBOOT version, and the maintainers decided to change the RouterBOOT version for each and every RouterOS version, for whatever stupid reason...
This package has to be updated to current RouterBOOT version (= the current RouterOS version).
The factory firmware is 3.24 back from the days they only changed the version when something actually changed...

---
### Author: Unknown
Date: Unknown

Only on 5 occasions MikroTik provide packages for change "any" backup version
on 6.29.1 for 3.24 backup,
on 6.40.7 for 3.41 backup,
on 6.43.7 for 6.43.7 backup,
on 6.49.7 for 6.43.7 backup,
and on 7.6 for 7.6 backup.
My 2017 post already explain how...
viewtopic.php?t=94303#p580430

---
### Author: Unknown
Date: Unknown

Maybe the statement "Optimal nand stability requires a backup-routerboot upgrade" has to be explained.
Given the fact that a backup-routerboot upgrade is impossible, what is the risk?
Is there a risk when running, when booting, when using the backup booter, or all of these?
I am not going to use Protected RouterBOOT.

---
### Author: Unknown
Date: Unknown

I think it's actually a data alignment problem in the NAND, since the backup "bios" itself is started only by holding down the reset button before turning on the device, or by selecting "force backup booter" item in system/routerboard/settings.
Also old 3.x and 6.x do not longer reboot if is installed v7 because is not recognized...
I have some CPE with 6.48.7 without bios aligned that sometime go on perpetual reboot after 1st beep.
I notice that devices have different RouterBOOT older than 6.43.7.
Never happen on 6.43.7+ devices (till now)

---
### Author: Unknown
Date: Unknown

A simple backup to mail script has stopped working on v7.18beta2.
The script is:
Code:
Select all
:local date [/system clock get date];
:local time [/system clock get time];
:local timezone [/system clock get time-zone-name];
:local hostname [/system identity get name];

/system backup save name=email password=xxxxx;

/tool e-mail send to="xxxxxxxx" subject="$date $time $timezone -- $hostname" file=email.backup;
:log info "Backup e-mail sent.";
When run via scheduler, it fails with:
2025-01-22 00:00:00 script,error executing script from scheduler (e-mail-backup) failed, please check it manually
2025-01-22 00:00:00 script,error,debug (scheduler:e-mail-backup) syntax error (line 9 column 94)
The thing is, that line 9 is the last line, and it doesn't have 94 columns.
If run manually via winbox it fails the same.
2025-01-23 01:23:22 script,error executing script e-mail-backup from winbox failed, please check it manually
2025-01-23 01:23:22 script,error,debug syntax error (line 9 column 94)
If run manually command by command through terminal (within curly braces), there are no errors.
2025-01-23 22:01:03 script,info Backup e-mail sent.
2025-01-23 22:01:03 e-mail,info sent <2025-01-23 22:01:03 xxxxxx - xxxxxx> to: xxxxxxx
On v7.17 the same exact script runs without issues.

---
### Author: Unknown
Date: Unknown

Export also the scheduler, how can check if you put all necessary policies?
Code:
Select all
/system clock
:local d [get date]
:local t [get time]
:local z [get time-zone-name]
/system identity
:local n [get name]

/system backup
save name=email dont-encrypt=no encryption=aes-sha256 password=pippo
:delay 2s
/tool e-mail send to="xxx@example.com" subject=("$d $t $z -- $n") file="email.backup"
:log info "Backup e-mail sent."

---
### Author: Unknown
Date: Unknown

All policies are checked both on the script and on the scheduler.
Also my
BGP monitoring script
(which is way more complex than this) works without issues.

---
### Author: Unknown
Date: Unknown

viewtopic.php?t=213301
fixed
Hummm, Finaly some progress on Hardware Offload.
I got happy seeing that!
I just don't understand why it seems so painful that they recognized at that moment that the problem was actually related to Hardware Offload.
And if it wasn't that... What was it? Where are the details?

---
### Author: Unknown
Date: Unknown

I love the new filesharing function,
filehsaring on network devices?
Could you tell me where to find the documentation?

---
### Author: Unknown
Date: Unknown

any plan to make some /ip/route or /routing/route option faster (specially when we run the command on full route router)
example:
/ip route print where blackhole
/routing/route print where blackhole

---
### Author: Unknown
Date: Unknown

My Chateau LTE has been having some stability issues and seeing the improvements in this Beta release, i  thought I'd upgrade.  this went fine, then i noticed there was a modem firmware upgrade available, i did this also.  now i cant connect to 3/4G. I noticed just now that my routerboard fw is still at 7.17, with an Upgrade Firmware version of 7.18beta2.  should i upgrade this also?
yes, upgrade routerboard firmware too. Regarding the modem: maybe you need to powercycle your chateau to give the modem a cold boot.
router board upgraded, still no LTE connectivity.
would a factory reset be required?

---
### Author: Unknown
Date: Unknown

We dont even know what is wrong. Whats the output of
Code:
Select all
/interface/lte/monitor lte1 once
Consider downgrading to ROS 7.17 before doing factory reset. This is BETA.

---
### Author: Unknown
Date: Unknown

It is nice to see useful new features!
Maybe I'm wrong but it would be nice if existing features would not be neglected. It is one thing to implement new eyecandy features, and another is to found and fix bug in them. I miss balance between introducing new features and fixing bugs in existing features. For example it is not practical to implement a feature which is breaks another, or if a feature is works only in a very corner/special case.
Kind Regards!

---
### Author: Unknown
Date: Unknown

We dont even know what is wrong. Whats the output of
Code:
Select all
/interface/lte/monitor lte1 once
Consider downgrading to ROS 7.17 before doing factory reset. This is BETA.
the problem started not when i upgraded to the beta version, but just after when i upgraded the modem to 16121.1034.00.01.01.08  and i was wondering if that's the problem.
[GLOVERC7@Boat] > /interface/lte/monitor lte1 once
status: connected
model: FG621-EA
revision: 16121.1034.00.01.01.08
current-operator: EE
current-cellid: 7001604
enb-id: 27350
sector-id: 4
phy-cellid: 274
data-class: LTE
session-uptime: 12m47s
imei: 863359043719802
imsi: 234304307454535
uicc: 8944303633230353117
primary-band: B3@20Mhz earfcn: 1815 phy-cellid: 274
rssi: -77dBm
rsrp: -105dBm
rsrq: -11dB
sinr: 3dB

---
### Author: Unknown
Date: Unknown

The BGP situation appears to be improved, but I am still hunting a gremlin.
What happened: my home router has 2 templates for 2 different networks (different AS, different routing table, different bgp-networks), one in default and one added template.  The routers at work just have the default template.
I updated the router at home and everything continued to work fine. Then I updated the router at work and the BGP sessions came up but routes were not stored in the table, although they are received according to the packet sniffer.  More or less what I also observed in 7.16.
I decided to bring the "default" template back to default settings and add a new template with the settings, and use that.  Then it worked.  And the routes between the work routers are complete now, unlike in 7.16.
Still puzzled...

---
### Author: Unknown
Date: Unknown

We dont even know what is wrong. Whats the output of
Code:
Select all
/interface/lte/monitor lte1 once
Consider downgrading to ROS 7.17 before doing factory reset. This is BETA.
the problem started not when i upgraded to the beta version, but just after when i upgraded the modem to 16121.1034.00.01.01.08  and i was wondering if that's the problem.
Only way to know for sure: file support ticket.
They are (in my experience) pretty responsive for LTE issues.

---
### Author: Unknown
Date: Unknown

Thanks, i have a ticket raised, 177320 in case they see this post first.

---
### Author: Unknown
Date: Unknown

Retrieving route table via SNMP (snmpnetstat -v2c -c public -Cn -Cr router-IP) no longer returns the complete routing table.
Also, when there are multiple routing tables, it still ends up in a loop (existing problem).

---
### Author: Unknown
Date: Unknown

On one of our RB5009UPr+S+ I get the following irregular log messages:
Code:
Select all
2025-01-24T11:22:27+01:00 MikroTik ether1 detected poe-out status: voltage_on_poe-in
2025-01-24T11:22:28+01:00 MikroTik ether1 detected poe-out status: disabled
2025-01-24T11:28:29+01:00 MikroTik ether2 detected poe-out status: voltage_on_poe-in
2025-01-24T11:28:29+01:00 MikroTik ether2 detected poe-out status: disabled
2025-01-24T11:40:50+01:00 MikroTik ether4 detected poe-out status: voltage_on_poe-in
2025-01-24T11:40:50+01:00 MikroTik ether4 detected poe-out status: wait_for_load
2025-01-24T11:55:39+01:00 MikroTik ether4 detected poe-out status: voltage_on_poe-in
2025-01-24T11:55:39+01:00 MikroTik ether4 detected poe-out status: wait_for_load
ether1 and ether2 are configured with PoE disabled and are connected to a normal switch (non-PoE).  ether4 is configured with auto on, and is open.
It does not occur on our 4 other routers of the same type.  I will try a firmware update and an extra reboot tonight.
EDIT: reboot does not fix it, and @liviu2004 reported the same thing below, so it apparently is an issue (although not critical).

---
### Author: Unknown
Date: Unknown

Retrieving route table via SNMP (snmpnetstat -v2c -c public -Cn -Cr router-IP) no longer returns the complete routing table.
Also, when there are multiple routing tables, it still ends up in a loop (existing problem).
Did you tried fetch it over REST API? I moved from SNMP to REST successfully, it is slow and not optimal for this.

---
### Author: Unknown
Date: Unknown

No, all our monitoring is done using SNMP.  I also do not like that each and every poll results in a log line.

---
### Author: Unknown
Date: Unknown

*) 60ghz - improved system stability;
More details on this please - does it affect all devices, or just the newer 802.11ay ones (the older 802.11ad have been quite stable in my experience, still running 6.49.x on them)?
*) bridge - removed controller-bridge (CB) and port-extender (PE) support;
Gone for good (in which case the feature should be documented as deprecated), or just removed temporarily due to some issues that are being worked on and then it will be back (and hopefully improved)?

---
### Author: Unknown
Date: Unknown

Code:
Select all
memory poe-out, warning ether1 detected poe-out status: voltage_on_poe-in
memory poe-out, warning ether5 detected poe-out status: voltage_on_poe-in
RB5009UPr+S+
ether1 is WAN connected to a dumb VDSL modem which has not clue about what PoE is on any ports.
ether5 is not connected to anything.
Both ether1 and ether5 PoE Out settings are off.
Capture.JPG

---
### Author: Unknown
Date: Unknown

We dont even know what is wrong. Whats the output of
Code:
Select all
/interface/lte/monitor lte1 once
Consider downgrading to ROS 7.17 before doing factory reset. This is BETA.
the problem started not when i upgraded to the beta version, but just after when i upgraded the modem to 16121.1034.00.01.01.08  and i was wondering if that's the problem.
[GLOVERC7@Boat] > /interface/lte/monitor lte1 once
status: connected
model: FG621-EA
revision: 16121.1034.00.01.01.08
current-operator: EE
current-cellid: 7001604
enb-id: 27350
sector-id: 4
phy-cellid: 274
data-class: LTE
session-uptime: 12m47s
imei: 863359043719802
imsi: 234304307454535
uicc: 8944303633230353117
primary-band: B3@20Mhz earfcn: 1815 phy-cellid: 274
rssi: -77dBm
rsrp: -105dBm
rsrq: -11dB
sinr: 3dB
Brilliant support received today from Mikrotik.  Problem resolved.

---
### Author: Unknown
Date: Unknown

Brilliant support received today from Mikrotik.  Problem resolved.
Useless to post that here when you do not include how it was resolved...

---
### Author: Unknown
Date: Unknown

+1 on nz_monkey regarding VXLAN comments and eVPN.
Could I add in( no doubt a new switch chip for future products ), but hardware offloaded MACSEC as part of the underlay.
"And include jumbo frames ( aka 9000 byte + frame)"
My use case is commercial datacenter/carrier providers(via L2) to remote sites, as part of cyber security uplift.
hardware offloaded MACSEC at all would be a great leap forward. (if only just to get rid of some catalyst boxes with FRU modules in it which are half a decade old...)

---
### Author: Unknown
Date: Unknown

*) 60ghz - improved system stability;
More details on this please - does it affect all devices, or just the newer 802.11ay ones (the older 802.11ad have been quite stable in my experience, still running 6.49.x on them)?
would also love to see more information on that. got about 6 setups with 60GHz and 60+5GHz but only two of them in v7 land ... and i am not eager to update to 7.16+ when this means i have to climb a roof or antenna mast

---
### Author: Unknown
Date: Unknown

*)  cloud - added file-share feature;
It's the first public beta, there might be (for sure there are) bugs. Thank for the report, will investigate all the issues described.
Did some testing of "file-share", so have a few more nits ;).  This actually might be useful for SMS/text/etc notifications in scripting.  So did some quick tests, trying to "share" a CSV of firewall connections...
One thing, you said:
Currently it works only for sharing Folders, there is a known bug that single file share does not work.
It seems that adding the filename and "?dl" at end does actually work to get allow a single file.  While the bug I saw was that other files in same path are also exposed if you use a file name but the path= is set to single file in /ip/cloud/file-share.
Anyway, can we add this my previous list about how /ip/cloud/file-share in the CLI/scripting...
1. Adding a file-share is asynchronous, so my first attempt did NOT work... While "add" does return the .id as expected, but it's not actually done adding it when it does - this makes things more complex in scripting... So this do NOT work – but ideally would work:
Code:
Select all
:serialize file-name=raid1/connections.csv to=dsv delimiter="," options=dsv.remap [/ip/firewall/connection print detail as-value]
:put "Link to CSV: $[ /ip/cloud/file-share get [/ip/cloud/file-share/add expires=1d path=raid1] url ]/connections.csv?dl"
IMO "/ip/cloud/file-share add" should either succeed or fail (including timeout) - and block!  Like /container/start|stop... it is
not so easy to either know how long a :delay should, and/or you need a complex loop checking state.  Neither are friendly.
2. "expires=" does not accept a :typeof "time", so you cannot just say expires=30d.  The double-whammy is there no operation to get an future date in ISO format - i.e. [:tostr ([:timestamp]+2d)] using the "week" format but even that is not accepted by expires. Code below does same as "one-liner" above – and does WORK – but note the complexity...
Code:
Select all
{
:serialize file-name=raid1/connections.csv to=dsv delimiter="," options=dsv.remap [/ip/firewall/connection print detail as-value]
:local isoexpire [:toarray [:serialize to=json ([:timestamp] + 1d) ] ] 
:local fsid [/ip/cloud/file-share/add expires=$isoexpire path=raid1]
:delay 15s
:put "CSV file with connections: $[ /ip/cloud/file-share get $fsid url ]/connections.csv?dl"
}
and be MORE complex to better deal with "waiting" by checking that status in a loop, than some unknown :delay.  And the ":toarray [:serialize]" for expires= is the only thing that works - even thou expire= should not be an array type....
3. /ip/cloud/file-share does NOT work with a /container root or _work volumes, while something like scp does.

---
### Author: Unknown
Date: Unknown

Outside of /ip/cloud/file-share...
Also, I notice /ip/smb causes a crash on RB1100AHx4 with RAID1+bfrs when accessing from MacOS.  Now, I do have 30K+ files (if you include ones inside /container), but also has 60GB disk and not caused a crash in previous version.  But it seems very repo-able since anytime I try SMB it crashes.  Another Mac cases same crash.  I haven't tried windows or anything else, but I do know /ip/smb has worked before with roughly same disk.
Also, related to @fischerdouglas comments about sluggishness... Using Files in winbox4 in 7.18beta make EVERYTHIN extremely slow now, but closing Files window improved the "slowness" for me.

---
### Author: Unknown
Date: Unknown

I'm not sure if the fasttrack feature for IPv6 works properly. I tried some speedtests for IPv6 and the CPU is loaded almost to the maximum...
Code:
Select all
/ipv6 firewall filter
add action=fasttrack-connection chain=forward connection-state=established,related
add action=accept chain=forward connection-state=established,related,untracked
//edit: it works! IPv6 Fast Path isn't enabled by default - just enable it in the IPv6 settings :-)

---
### Author: Unknown
Date: Unknown

Now that IPv6 seems to be getting some traction, could you please fix this?
https://help.mikrotik.com/servicedesk/s ... SUP-142299
. The issues was reported on 30 Jan 2024 (almost a year ago) and you closed it without resolving it. You even have a document with screenshots about what's wrong.
OSPFv3 is completely broken for IPv6 addresses when announcing GUA's. If you announce a ::/64, only the equivalente /128 is injected in other routers, instead of the /64 subnet. If the address published is ::1/64 it is correctly injected (both, /64 for the subnet and single /128 for this particular one), but your local routing table is polluted with a DUoHI weird route local to you with distance 110.
Thanks a lot in advance.

---
### Author: Unknown
Date: Unknown

No, all our monitoring is done using SNMP.
LibreNMS?
I also do not like that each and every poll results in a log line.
It logging 4 lines (two login and two logout) per 10 minutes, I think the login timeout is 10mins.
Code:
Select all
2025-01-25 09:20:02 system,info,account user restapi logged in from 192.168.5.113 via rest-api
 2025-01-25 09:20:02 system,info,account user restapi logged in via api
 2025-01-25 09:30:02 system,info,account user restapi logged out from 192.168.5.113 via rest-api
 2025-01-25 09:30:02 system,info,account user restapi logged out via api
 2025-01-25 09:31:01 system,info,account user restapi logged in from 192.168.5.113 via rest-api
 2025-01-25 09:31:01 system,info,account user restapi logged in via api
 2025-01-25 09:41:01 system,info,account user restapi logged out via api
 2025-01-25 09:41:01 system,info,account user restapi logged out from 192.168.5.113 via rest-api
 2025-01-25 09:41:01 system,info,account user restapi logged in from 192.168.5.113 via rest-api
 2025-01-25 09:41:01 system,info,account user restapi logged in via api
 2025-01-25 09:51:01 system,info,account user restapi logged out from 192.168.5.113 via rest-api
 2025-01-25 09:51:01 system,info,account user restapi logged out via api
BTW you are right, there are some logs which is unneccessary in information level, those should be on warning level.
I started testing REST API and in some cases its more reliable, in other case it is the only way to monitor some values.
It is really handy, thanks MTik!

---
### Author: Unknown
Date: Unknown

I am just reporting that route table retrieval via SNMP is broken, not looking for alternative solutions.

---
### Author: Unknown
Date: Unknown

A simple backup to mail script has stopped working on v7.18beta2.
The script is:
Code:
Select all
:local date [/system clock get date];
:local time [/system clock get time];
:local timezone [/system clock get time-zone-name];
:local hostname [/system identity get name];

/system backup save name=email password=xxxxx;

/tool e-mail send to="xxxxxxxx" subject="$date $time $timezone -- $hostname" file=email.backup;
:log info "Backup e-mail sent.";
When run via scheduler, it fails with:
2025-01-22 00:00:00 script,error executing script from scheduler (e-mail-backup) failed, please check it manually
2025-01-22 00:00:00 script,error,debug (scheduler:e-mail-backup) syntax error (line 9 column 94)
The thing is, that line 9 is the last line, and it doesn't have 94 columns.
If run manually via winbox it fails the same.
2025-01-23 01:23:22 script,error executing script e-mail-backup from winbox failed, please check it manually
2025-01-23 01:23:22 script,error,debug syntax error (line 9 column 94)
If run manually command by command through terminal (within curly braces), there are no errors.
2025-01-23 22:01:03 script,info Backup e-mail sent.
2025-01-23 22:01:03 e-mail,info sent <2025-01-23 22:01:03 xxxxxx - xxxxxx> to: xxxxxxx
On v7.17 the same exact script runs without issues.
Anyone else having this issue?

---
### Author: Unknown
Date: Unknown

You test this?
viewtopic.php?t=214071#p1121253

---
### Author: Unknown
Date: Unknown

https://help.mikrotik.com/docs/spaces/R ... infirewall
Is this true for IPv6 also?

---
### Author: Unknown
Date: Unknown

You test this?
viewtopic.php?t=214071#p1121253
Yes it works. Instead of re-writing my script for no reason and me trying to find the differences between the two, you could have just pointed to the issue, which is that /tool email file parameter needs the filename in quotes in v7.18. Up until v7.17, this works without quotes.
So much for "all changes are included in the changelog"... Thanks MikroTik.

---
### Author: Unknown
Date: Unknown

Bugs are not documented 😉

---
### Author: Unknown
Date: Unknown

You test this?
viewtopic.php?t=214071#p1121253
Yes it works. Instead of re-writing my script for no reason and me trying to find the differences between the two, you could have just pointed to the issue, which is that /tool email file parameter needs the filename in quotes in v7.18. Up until v7.17, this works without quotes.
So much for "all changes are included in the changelog"... Thanks MikroTik.
IMO, it's a good practice to
always
put all string values in quotes, especially if there are symbols.

---
### Author: Unknown
Date: Unknown

Router model: CCR2004-16G-2S+
Winbox v4
I removed v7.18 because it caused lag, Windows not closing, and changes not being saved when the "Save" or "OK" button was clicked. It was a horrible experience.
After factory firmware, many switch features were removed, which is unacceptable. Even though this router has two Marvel switches, you can only perform mirroring, ingress, and egress; the rest of the useful features have vanished. Even these don't work at full speed at 10 Gbps, barely reaching 2 Gbps. Switch rules aren't working, but they work on other routers, for example, the hAP ac2. You've made it like a cheap router with no features for the price. In speed tests, even if the CPU usage is at 30% with an 800 Mbps speed test, this doesn't mean it "can handle a lot," as you mention in videos. Programs and games constantly show internet problems. The CPU runs incredibly hot if I disable CPU flow control; with normal browsing, it already reaches 59 degrees.

---
### Author: Unknown
Date: Unknown

Router model: CCR2004-16G-2S+
Winbox v4
I removed v7.18 because it caused lag, Windows not closing, and changes not being saved when the "Save" or "OK" button was clicked. It was a horrible experience.
After factory firmware, many switch features were removed, which is unacceptable. Even though this router has two Marvel switches, you can only perform mirroring, ingress, and egress; the rest of the useful features have vanished. Even these don't work at full speed at 10 Gbps, barely reaching 2 Gbps. Switch rules aren't working, but they work on other routers, for example, the hAP ac2. You've made it like a cheap router with no features for the price. In speed tests, even if the CPU usage is at 30% with an 800 Mbps speed test, this doesn't mean it "can handle a lot," as you mention in videos. Programs and games constantly show internet problems. The CPU runs incredibly hot if I disable CPU flow control; with normal browsing, it already reaches 59 degrees.
It sounds like you use some configuration which punt traffic to the CPU instead of offloading.

---
### Author: Unknown
Date: Unknown

Router model: CCR2004-16G-2S+
Winbox v4
I removed v7.18 because it caused lag, Windows not closing, and changes not being saved when the "Save" or "OK" button was clicked. It was a horrible experience.
You do know that WinBox is still is in beta, only at 4.0beta16... don't you (and by the way this was the first public beta of the 7.18 branch)?
After factory firmware, many switch features were removed, which is unacceptable. Even though this router has two Marvel switches, you can only perform mirroring, ingress, and egress; the rest of the useful features have vanished. Even these don't work at full speed at 10 Gbps, barely reaching 2 Gbps. Switch rules aren't working, but they work on other routers, for example, the hAP ac2. You've made it like a cheap router with no features for the price. In speed tests, even if the CPU usage is at 30% with an 800 Mbps speed test, this doesn't mean it "can handle a lot," as you mention in videos. Programs and games constantly show internet problems. The CPU runs incredibly hot if I disable CPU flow control; with normal browsing, it already reaches 59 degrees.
Which RouterBOARD version you mean as factory firmware? You do know that it is - usually advisable to keep the RouterOS (upgraded at /system/packages/update) and the RouterBoard (upgraded at /system/routerboard) at the same version, don't you? By the way the risk averse practice is (after exporting the configuration with
Code:
Select all
export verbose show-sensitive file=AnyNameYouLike
)
Netinstall-ing
a version with so many changes than restore the configuration based on the (human readable) export.
What you have described as sluggish performance is most likely due to
Layer2 misconfiguration
since the CCR2004-16G-2S+ has
two switch chips and two SFP+ ports attached directly to the AL32400
one should configure at least two bridges (one with ether1 to ether8 ports and another with ether9 to ether16 ports) and not just one as in the case with hAP AC2.
For example if your uplink to the Internet is on ether1 port than the optimal configuration would be likely that ether1 is off the bridge1, bridge1 has the ports ether2 to ether8, bridge2 has the ports ether9 to ether16, bridge3 has sfp-sfpplus1 and sfp-sfpplus2.
Edit (addition)
:
The Marvell 88E6191X switch chip does not have L3HW functionality, it does not even have rule table as per
Switch Chip Features
part of the documentation.

---
### Author: Unknown
Date: Unknown

The AL32400 could bridging frames at ~27Gbps with average frames size in fastpath and there are two 10Gbps lanes between the CPU and switches. So I think, if the configuration is right, there is no reason to tear down this device to 2Gbps in layer2 forwarding.

---
### Author: Unknown
Date: Unknown

Instead of re-writing my script for no reason
No reason? I show you how must be coded corectly to avoid use scripting style that casually works...
The missing "" are not only the problem, expect broken it again on future versions....
Code:
Select all
:local date [/system clock get date]; # on this line: useless ; / WARNING: date var have same name as date value
# if are more than one get, go to section /system clock and write only "get x"
:local time [/system clock get time]; # on this line: useless ; / WARNING: time var have same name as time value
:local timezone [/system clock get time-zone-name]; # on this line: useless ;
:local hostname [/system identity get name]; # on this line: useless ;

# NOTICE: for prevent only "some" problems with expected missing parameters, better specify also dont-encrypt and encryption
/system backup save name=email password=xxxxx; # on this line: useless ;

# WARNING: missing a delay, sometime is not possible read instantly the file...
/tool e-mail send to="xxxxxxxx" subject="$date $time $timezone -- $hostname" file=email.backup; # on this line: useless ;
# ERROR: missing "" on email.backup AND WARNING: when used $xxx inside a string is better use ( ).
# Sometime not using ( ) cause some unexpected behavior. This is a mistake I often make too.

:log info "Backup e-mail sent."; # on this line: useless ;
IMO, it's a good practice to
always
put all string values in quotes, especially if there are symbols.
Exactly...
email.backup is one string, must be quoted regardless RouterOS version.
file=email.backup
is equal to write
join "email" with "backup"
or
file=("email"."backup")
so, at the end is equivalent to
file="emailbackup"
file="email.backup"
is like...
file="email.backup"
....

---
### Author: Unknown
Date: Unknown

Hope Zerotier supports custom PLANET.

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
[...]
Thank you moving this forward!
Priority list for us would be, in order:
VTEPs are not supported over VLAN interface -
(unable to use atm without this one)
VTEPs are not supported over ECMP
VTEPs are not supported over bond interface
VTEPs are not supported with IPv6
VLAN tagging over VXLAN is not supported
EVPN support

---
### Author: Unknown
Date: Unknown

Really great to see some progress in VXLAN/HW-acceleration!
Would love to get some basic BGP EVPN. We use VXLAN today in a static fashion and the VTEP-list gets quite long after a bunch of VLANs.

---
### Author: Unknown
Date: Unknown

No reason? I show you how must be coded corectly to avoid use scripting style that casually works...
The missing "" are not only the problem, expect broken it again on future versions....
Actually I think putting a ; at the end of each line is not "useless" but is a style that prevents problems in the future.
Taking an end-of-line as an implicit statement separator is what is insane.  Adding the explicit ; is not useless, it is defensive.

---
### Author: Unknown
Date: Unknown

Do you mean VLAN assignment via RADIUS or Access list?
datapath in first place. but yes others as well.
I'm also interested in the vlan assignment via datapath (qcom-ac driver).
It's a pity to have this management overhead to configure all bridges with vlan filtering for all my cAPs.
It kinda makes the CAPsMAN for wifi useless in my setup.
For the technical point of view: Why is it possible to implement vlan assignments via datapath/CAPsMAN for wifi-qcom but not for wifi-qcom-ac ?

---
### Author: Unknown
Date: Unknown

I think the difference is: wifi-qcom has driver support for VLANs built-in - and wifi-qcom-ac not. Thus the need to do it on the CAP bridge instead.

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
Supported devices are ones that support
L3HW offloaded fasttrack/NAT
: CRS309-1G-8S+, CRS317-1G-16S+, CRS312-4C+8XG, CRS326-24S+2Q+, CRS326-4C+20G+2Q+, CRS354-48G/P-4S+2Q+, CRS504-4XQ, CRS510-8XS-2XQ, CRS518-16XS-2XQ, CRS520-4XS-16XQ, CCR2116-12G-4S+, CCR2216-1G-12XS-2XQ.
The main goal for v7.18 is to introduce basic VXLAN data-plane support. This allows you to set up static one-to-one mappings between VLANs and VXLANs in vlan-filtering bridge.
A configuration example (using static routing, but could be done through ospf,bgp):
sfp-sfpplus1 - upstream (underlay) interface
sfp-sfpplus3 - bridged port for untagged VLAN 10
sfp-sfpplus4 - bridged port for untagged VLAN 20
vxlan-1010 - overlay port for untagged VLAN 10
vxlan-1020 - overlay port for untagged VLAN 20
Code:
Select all
/interface bridge
add name=bridge1 vlan-filtering=yes
/interface vxlan
add bridge=bridge1 bridge-pvid=10 local-address=192.168.1.1 name=vxlan-1010 vni=1010
add bridge=bridge1 bridge-pvid=20 local-address=192.168.1.1 name=vxlan-1020 vni=1020
/interface bridge port
add bridge=bridge1 interface=sfp-sfpplus3 pvid=10
add bridge=bridge1 interface=sfp-sfpplus4 pvid=20
/interface vxlan vteps
add interface=vxlan-1010 remote-ip=192.168.1.2
add interface=vxlan-1020 remote-ip=192.168.1.2
/ip address
add address=192.168.1.1 interface=lo network=192.168.1.1
add address=192.168.10.10/24 interface=sfp-sfpplus1 network=192.168.10.0
/ip route
add dst-address=192.168.1.2 gateway=192.168.10.20
/interface ethernet switch
set 0 l3-hw-offloading=yes
At this point, some known features are not yet implemented.
Underlay (routing encapsulated VXLAN packets):
1. VTEPs are not supported over ECMP
2. VTEPs are not supported over bond, VLAN interface
3. VTEPs cannot operate within VRFs
4. VTEPs are not supported with IPv6
Overlay (forwarding between Ethernet and VXLAN):
1. VLAN tagging over VXLAN is not supported
2. Routing between different VXLAN VNIs is not supported
3. VTEPs are isolated, and there is no mechanism to control "horizon" between them
These things will be mentioned in our help documentation page shortly.
Let us know what VXLAN-related features you need, this could help us prioritize development. Also, work on EVPN has started, but would like to hear from you about the most important capabilities and how you imagined they would look like in RouterOS.
They are already in the RFCs (
https://www.ietf.org/
) - just implement it properly as other network vendor.
The "Half-baked" solution breaks interoperability in multi-vendor environment.

---
### Author: Unknown
Date: Unknown

There is a little bug in BGP export  (both 7.17 && 7.18b2), maybe it's an old and already reported one but I'm starting to use BGP on v7 only now - and I wonder if it's time now
I'll show a little example:
# starting from default..
Code:
Select all
[bajodel@ros7-lab]  /routing/bgp> export verbose 
/routing bgp template
set default as=65530 name=default
# then let's change something in the default template..
Code:
Select all
[bajodel@ros7-lab]  /routing/bgp/template/set default address-families=ip as=65000 multihop=yes name=toRRs router-id=10.8.0.10
# let's export again..
Code:
Select all
[bajodel@ros7-lab]  /routing/bgp> export 
/routing bgp template
set toRRs address-families=ip as=65000 multihop=yes name=toRRs router-id=10.8.0.10
The last export line
should be instead
:
set
default
address-families=ip as=65000 multihop=yes name=toRRs router-id=10.8.0.10
P.S. Probably is better to get rid of the default template altogether before starting, I thought it was one of those annoying undeletable item ;-)

---
### Author: Unknown
Date: Unknown

The whole concept of templates is riddled with bugs.  Another one is that winbox will not keep inheritance of parameters from templates, it will just copy them (e.g. into the connection).
It is best to rely as little as possible on them.

---
### Author: Unknown
Date: Unknown

The whole concept of templates is riddled with bugs.  Another one is that winbox will not keep inheritance of parameters from templates, it will just copy them (e.g. into the connection).
The problem is similar with templates/profiles under /interface/wifi and is not exclusive for winbox ... in CLI executing
print
displays properties from profiles as if they were defined directly on interfaces ... only
export
correctly shows that they're inherited from profiles.
IMO templates/profiles can be very useful, but handling should be improved / made more obvious.

---
### Author: Unknown
Date: Unknown

It is not the only problem... I upgraded from 7.16 to 7.18beta and I had the default and an additional template for BGP, but there are issues with the default that I could solve by creating an additional template (same settings as the modified default) and using that.
I changed the default back to original and disabled it.  Apparently default template is something different than user-defined.
Templates/profiles looked like a good idea but apparently development stopped a bit too early and now we are left with what we have.

---
### Author: Unknown
Date: Unknown

Good to know, thanks guys. BGP needs definitely some love from the MT guys.
I still see that they insist in not propagating (RR) the default received by an ibgp session without the 'default-originate=if.."; but -damn- the default is not originated here! I read somewhere that their escuse is "you should rely on some IGP", what ?? If there is something I really don't want to see going around in the core via IGP is a bunch of default routes :-)  In addition to that, you definitely don't have the same amout of control with ospf/is-is.

---
### Author: Unknown
Date: Unknown

Ah, and talking about is-is, in my lab I originally thought about going with is-is as igp, but then I realized it might be super early.
What kind of maturity level do you think it is ? is it worth labbing at least ?

---
### Author: Unknown
Date: Unknown

Yes, there also is a strange problem where on multiple links between the same two routers (e.g. multiple tunnels over different networks) the prefixes received are not stored in the table for all of the links.  So it is difficult to achieve redundancy.
Sometimes it works, but later when one of the sessions re-connects it again fails to work.
This worked OK until 7.15.3

---
### Author: Unknown
Date: Unknown

PPPoE IPv6 prefix-delegation over radius still not work in v7.18beta2.
Server
Code:
Select all
Jan/27/2025 12:00:49 dhcp,debug processing client:005056bf3ea9 iapd:0x2, no existing binding found, won't create
Jan/27/2025 12:00:49 dhcp,debug,packet send <pppoe-user3> -> fe80::10e6:78c6:0:2%23
Jan/27/2025 12:00:49 dhcp,debug,packet type: reply
Jan/27/2025 12:00:49 dhcp,debug,packet transaction-id: 0effc1
Jan/27/2025 12:00:49 dhcp,debug,packet  -> clientid:   00030001 005056bf 3ea9
Jan/27/2025 12:00:49 dhcp,debug,packet  -> serverid:   00030001 005056bf 358d
Jan/27/2025 12:00:49 dhcp,debug,packet  -> rapid_commit: [empty]
Jan/27/2025 12:00:49 dhcp,debug,packet  -> dns_servers: 
Jan/27/2025 12:00:49 dhcp,debug,packet     XXXX:XXXX:0:10::10
Jan/27/2025 12:00:49 dhcp,debug,packet     XXXX:XXXX:0:10::11
Jan/27/2025 12:00:49 dhcp,debug,packet  -> ia_pd: 
Jan/27/2025 12:00:49 dhcp,debug,packet    t1: 43200
Jan/27/2025 12:00:49 dhcp,debug,packet    t2: 69120
Jan/27/2025 12:00:49 dhcp,debug,packet    id: 0x2
Jan/27/2025 12:00:49 dhcp,debug,packet   -> status: 6 - no prefix
Jan/27/2025 12:01:30 dhcp,debug,packet recv server: <pppoe-user3> fe80::10e6:78c6:0:2 -> ff02::1:2
Jan/27/2025 12:01:30 dhcp,debug,packet type: solicit
Jan/27/2025 12:01:30 dhcp,debug,packet transaction-id: a639a7
Jan/27/2025 12:01:30 dhcp,debug,packet  -> clientid:   00030001 005056bf 3ea9
Jan/27/2025 12:01:30 dhcp,debug,packet  -> oro: 23 
Jan/27/2025 12:01:30 dhcp,debug,packet  -> elapsed_time: 0
Jan/27/2025 12:01:30 dhcp,debug,packet  -> rapid_commit: [empty]
Jan/27/2025 12:01:30 dhcp,debug,packet  -> ia_pd: 
Jan/27/2025 12:01:30 dhcp,debug,packet    t1: 0
Jan/27/2025 12:01:30 dhcp,debug,packet    t2: 0
Jan/27/2025 12:01:30 dhcp,debug,packet    id: 0x2
Jan/27/2025 12:01:30 dhcp,debug processing client:005056bf3ea9 iapd:0x2, no existing binding found, won't create
Client
Code:
Select all
Jan/27/2025 11:57:01 dhcp,debug resending..
Jan/27/2025 11:57:01 dhcp,debug,packet send pppoe-out1 -> ff02::1:2%6
Jan/27/2025 11:57:01 dhcp,debug,packet type: solicit
Jan/27/2025 11:57:01 dhcp,debug,packet transaction-id: 0effc1
Jan/27/2025 11:57:01 dhcp,debug,packet  -> clientid:   00030001 005056bf 3ea9
Jan/27/2025 11:57:01 dhcp,debug,packet  -> oro: 23 
Jan/27/2025 11:57:01 dhcp,debug,packet  -> elapsed_time: 224
Jan/27/2025 11:57:01 dhcp,debug,packet  -> rapid_commit: [empty]
Jan/27/2025 11:57:01 dhcp,debug,packet  -> ia_pd: 
Jan/27/2025 11:57:01 dhcp,debug,packet    t1: 0
Jan/27/2025 11:57:01 dhcp,debug,packet    t2: 0
Jan/27/2025 11:57:01 dhcp,debug,packet    id: 0x2
Jan/27/2025 11:57:01 dhcp,debug,packet recv client: pppoe-out1 fe80::f4f7:8778:f0:4 -> fe80::10e6:78c6:0:2
Jan/27/2025 11:57:01 dhcp,debug,packet type: reply
Jan/27/2025 11:57:01 dhcp,debug,packet transaction-id: 0effc1
Jan/27/2025 11:57:01 dhcp,debug,packet  -> clientid:   00030001 005056bf 3ea9
Jan/27/2025 11:57:01 dhcp,debug,packet  -> serverid:   00030001 005056bf 358d
Jan/27/2025 11:57:01 dhcp,debug,packet  -> rapid_commit: [empty]
Jan/27/2025 11:57:01 dhcp,debug,packet  -> dns_servers: 
Jan/27/2025 11:57:01 dhcp,debug,packet     XXXX:XXXX:0:10::10
Jan/27/2025 11:57:01 dhcp,debug,packet     XXXX:XXXX:0:10::11
Jan/27/2025 11:57:01 dhcp,debug,packet  -> ia_pd: 
Jan/27/2025 11:57:01 dhcp,debug,packet    t1: 43200
Jan/27/2025 11:57:01 dhcp,debug,packet    t2: 69120
Jan/27/2025 11:57:01 dhcp,debug,packet    id: 0x2
Jan/27/2025 11:57:01 dhcp,debug,packet   -> status: 6 - no prefix
Jan/27/2025 11:57:01 dhcp,debug ia_pd: bad status in advertise: no prefix (6)
Jan/27/2025 12:00:48 dhcp,debug resending..

---
### Author: Unknown
Date: Unknown

PPSK authentication has issues.
If you have not already, please write to
support@mikrotik.com
and attach a supout.

---
### Author: Unknown
Date: Unknown

About HW VXLAN.
They are already in the RFCs (
https://www.ietf.org/
) - just implement it properly as other network vendor.
The "Half-baked" solution breaks interoperability in multi-vendor environment.
Note: There is a very high chance that this post will be deleted.
But the reason MikroTik stays in this world of "Half-baked" features is (in my opinion) because they are in a world of "Half-baked" standards adoption.
RouterOS does not use NFTables yet, and they are probably stuck with IPTables because there must be a lot of framework bypasses in that scope.
In addition, although the concepts of Fast-Path and Fast-Track exist in Route-OS, I believe that their implementation is very far from XDP and eBPF.
"And what does this have to do with these so-called "Half-baked", Douglas?"
The SDKs and APIs of chip manufacturers (e.g.: Marvell, Broadcom.) and perhaps even OCP's SAI, take into account open standards as mentioned above...
(e.g.: There is a VPP work in OCP-SAI that cannot be used by RouteOS. At least not before RouterOS version 8.😂)
So, very Probably, for the MikroTik team to be able to implement functionality such as hardware offload that we ask for so much, instead of using mechanisms that are already more than halfway there, such as just using Marvell APIs/SDKs, they have to rewrite practically everything without being able to reuse anything.
And this makes the whole process slow, even if the Chips chosen by them for MikroTik equipment already have all the features.

---
### Author: Unknown
Date: Unknown

FToms, could you, please, add any extensive and more detailed autosuppot.rif logging into next version wifi-qcom-ac.npk ? I am stil facing memory leakage (after roughly 6 days) of usage on hAP ac^2 (256 MiB RAM version) from 140 MiB to 86 MiB today. I have provided at least 4-5 autosupout.rif(-s) after kernel panic - "out of memory conditions has been detected", but your support allways said, nothing unusual.
I have tried switch off fast handovers - leaked, normal handover - leaked, completely different SSID - leaked. Leakage is not big (and it takes time to investigate it), but memory steadily going down to kernel panic after couple of days. It seems there is dependency on amount of traffic or amount of connected devices (mostly Apple).
I am stable with wireless.npk with exactly same configuration, it means, problem is definitely related to wifi-qcom-ac.npk. Thank you in advance.
PPSK authentication has issues.
If you have not already, please write to
support@mikrotik.com
and attach a supout.

---
### Author: Unknown
Date: Unknown

I have tried switch off fast handovers - leaked, normal handover - leaked, completely different SSID - leaked. Leakage is not big (and it takes time to investigate it), but memory steadily going down to kernel panic after couple of days. It seems there is dependency on amount of traffic or amount of connected devices (mostly Apple).
While not a solution to your problem, I have applied as workaround a daily reset around midnight on 1 cap AC experiencing exactly the same behavior since 7.16.1 (it used to take between 2 or 3 days before it ran out of memory, I should try with latest 7.18 beta release to see what it does now...).
I don't care counters are reset as long as users are able to work when needed.
OTOH a hAP AC2 with the same SW version (and same platform), doesn't exhibit this problem.
Minimal config, AP only and everything bridged.
2025-01-27_15-18-55.jpg

---
### Author: Unknown
Date: Unknown

Thanks, I had exactly the same idea - automatic reset. But actually, I'd really like to know what the problem is. And why does it only appear on some devices? My configuration is very simple - just a bridged network with a couple of Eth connected devices, one TP switch, WiFi with one SSID and a WAN connection to the DSLAM via PPPoE (with one VLAN). Fortunately, the kernel panic reboots, meaning that even without an automatic reset, the device still resets.
I have tried switch off fast handovers - leaked, normal handover - leaked, completely different SSID - leaked. Leakage is not big (and it takes time to investigate it), but memory steadily going down to kernel panic after couple of days. It seems there is dependency on amount of traffic or amount of connected devices (mostly Apple).
While not a solution to your problem, I have applied as workaround a daily reset around midnight on 1 cap AC experiencing exactly the same behavior since 7.16.1 (it used to take between 2 or 3 days before it ran out of memory, I should try with latest 7.18 beta release to see what it does now...).
I don't care counters are reset as long as users are able to work when needed.
OTOH a hAP AC2 with the same SW version (and same platform), doesn't exhibit this problem.
Minimal config, AP only and everything bridged.
2025-01-27_15-18-55.jpg

---
### Author: Unknown
Date: Unknown

Does this version now fully support IPv6 Route Advertisements, and sending those on route-change? As of now 7.15 seems to struggle to send RA when one of the prefix-pools goes down. Clients will therefore stick to their old prefix.

---
### Author: Unknown
Date: Unknown

You will probably have to do your own tests, as it worked for me in 7.15 already... also make sure your client isn't broken, like WinPE is!
(an issue in that version is that it advertises deprecated prefixes as deprecated forever, did not test that with 7.18beta yet)

---
### Author: Unknown
Date: Unknown

Finally?
*) dhcpv6-relay - add routes for bindings passing through relay;
I tried, but I couldn't get it to work.
Test configuration (all 7.18beta2 virtual CHR OVA):
Client - Relay - DHCPv6 server
There is a row added in the routing table on Relay, but ping is not working.
Binding.png
Client
Bound.png
Can someone provide a working sample configuration?
Client:
Code:
Select all
/interface bridge add name=bridge1
/ipv6 address add address=::1 from-pool=LAN6 interface=bridge1
/ipv6 dhcp-client add add-default-route=yes interface=ether3 pool-name=LAN6 rapid-commit=no request=prefix
Relay:
Code:
Select all
/ipv6 address add address=2a07:9280::2 advertise=no interface=ether2
/ipv6 dhcp-relay add dhcp-server=2a07:9280::1 interface=ether3 name=relay1
/ipv6 nd set [ find default=yes ] managed-address-configuration=yes other-configuration=yes
DHCPv6 server
Code:
Select all
/ipv6 dhcp-server add address-pool=pool1 interface=ether2 lease-time=10s name=server1 prefix-pool=pool1
/ipv6 pool add name=pool1 prefix=2a06:9280::/56 prefix-length=60
/ipv6 address add address=2a07:9280::1 advertise=no interface=ether2
/ipv6 nd set [ find default=yes ] managed-address-configuration=yes other-configuration=yes
ping from relay to 2a06:9280::1 doesn't work.

---
### Author: Unknown
Date: Unknown

RouterOS does not use NFTables yet, and they are probably stuck with IPTables because there must be a lot of framework bypasses in that scope.
With major releases come major changes.
I fully expect that Mikrotik will change to bpfilter rather than NFTables, but I wouldn't expect to see it until RouterOS v8 alpha/beta cycle.

---
### Author: Unknown
Date: Unknown

RouterOS does not use NFTables yet, and they are probably stuck with IPTables because there must be a lot of framework bypasses in that scope.
With major releases come major changes.
I fully expect that Mikrotik will change to bpfilter rather than NFTables, but I wouldn't expect to see it until RouterOS v8 alpha/beta cycle.
Hmm although off topic and at risk of being deleted (which is fair)
The release dates of major RouterOS versions as per Wikipedia are as per below
Version 7: December 2021
Version 6: November 2012
Version 5: March 2010
Version 4: October 2009
Version 3: January 2008
Apart from 6 -> 7 there was 1 to 2 year between major versions and between 6 -> 7 was around 9 years. So far its been around 2 years from ROS 7 but based on current development its unlikely to see ROS 8 in at least 2-3 years

---
### Author: Unknown
Date: Unknown

Hmm although off topic and at risk of being deleted (which is fair)
The release dates of major RouterOS versions as per Wikipedia are as per below
Version 7: December 2021
Version 6: November 2012
Version 5: March 2010
Version 4: October 2009
Version 3: January 2008
Apart from 6 -> 7 there was 1 to 2 year between major versions and between 6 -> 7 was around 9 years. So far its been around 2 years from ROS 7 but based on current development its unlikely to see ROS 8 in at least 2-3 years
Semi-off-topic...
Mikrotik have a significantly larger team of developers working on RouterOS core functionality now than they did in the RouterOS v6 to v7 transition phase, and these developers are now "up to speed" on the code base.   I suspect RouterOS v8 may appear more quickly than a lot of people expect.

---
### Author: Unknown
Date: Unknown

RoS8 is might be based on what direction would be MTik focused on the most.
RoS6 or Ros7 covers the most of the scenarios in home environment except power users whom for example build DC in their home :)
EdPa brings up VXLAN question which is popular in DC with EVPN (BGP-ISIS), however it is good for static L2PWs in this form
ISP specific features (L3VPN, SR), which is the most close to our company ;)
wireless for mobile and wisp and home users
etc
In MTik devices HW offload capable chips leaking in, but as previously someone wrote the current networking stack in RoS is not optimized for these. This is not a "home environment" and not a wireless category.

---
### Author: Unknown
Date: Unknown

Mikrotik have a significantly larger team of developers working on RouterOS core functionality now than they did in the RouterOS v6 to v7 transition phase
Where do you have that info from?  Has there been some announcement that I missed?
I still get the perception that the number of developers limits the number of projects they can run concurrently, and the attention often shifts to projects that probably make more money in the short term...
E.g. the bugs introduced in BGP in 7.16 were completely neglected in 7.17, and in 7.18 there were some fixes but still problems that were not there in 7.15.
But we do get all kinds of changes for home usage and a method to protect routers installed incorrectly.

---
### Author: Unknown
Date: Unknown

E.g. the bugs introduced in BGP in 7.16 were completely neglected in 7.17, and in 7.18 there were some fixes but still problems that were not there in 7.15.
But we do get all kinds of changes for home usage and a method to protect routers installed incorrectly.
Unfortunately yes and yes :(

---
### Author: Unknown
Date: Unknown

Where do you have that info from?  Has there been some announcement that I missed?
I still get the perception that the number of developers limits the number of projects they can run concurrently, and the attention often shifts to projects that probably make more money in the short term...
E.g. the bugs introduced in BGP in 7.16 were completely neglected in 7.17, and in 7.18 there were some fixes but still problems that were not there in 7.15.
But we do get all kinds of changes for home usage and a method to protect routers installed incorrectly.
No announcement, but look at the sheer size of recent changelogs and the breadth of features that are being worked on, it seems clear that more developers must be working on RouterOS.

---
### Author: Unknown
Date: Unknown

No announcement, but look at the sheer size of recent changelogs and the breadth of features that are being worked on, it seems clear that more developers must be working on RouterOS.
Thats true though but unfortunately some important features seems to be fading into the background like BGP related things. I opened tickets about L3VPN and one of them is hanging unanswered since october.

---
### Author: Unknown
Date: Unknown

Apart from 6 -> 7 there was 1 to 2 year between major versions and between 6 -> 7 was around 9 years. So far its been around 2 years from ROS 7 but based on current development its unlikely to see ROS 8 in at least 2-3 years
I can't speak for RoS 5 and before.
But I remember that RoS 6 was filled to the brim with Mikrotik code - drivers that they wrote themselves. With RoS 7 Mikrotik is using far more code given by the hardware manufacturer - at least this is my impression.
This matter, because one of the big reason for these 9 years was the volume of work, to port inhouse code and drivers into a new kernel. And, to be honest, I don't think they are done yet. RoS 7 already saw a kernel update (from early 7.x), so we know that it's far easier now than was then.
I think (I THINK, I don't know, no one told me) that we have about more 2 or 3 years of RoS 7. This is how long they will take to finally get ridden of any RoS 6 legacy.
If I'm right, and if they are using more official device drivers and standard kernel, it will be far easier to do this jump than it was from 6 to 7.

---
### Author: Unknown
Date: Unknown

That may be true, but before they used a standard BGP implementation and Linux routing, and in v7 it was replaced by in-house written code and frankly for me it has only caused trouble.
I can understand how they were motivated by things like having a 72-core flagship router utilizing only a single core for BGP, and lots of customers complaining about slow convergence when running multiple internet feeds, but for me (using BGP for automatic routing in a small network) that has never been an issue, and the issues with the current version are real problems.
At first when upgrading to 7.18 it seemed that some problems had been fixed, but after running it for a couple of days it became clear that the same issues still exist, most important:
- sessions closing because another session closes
- number of received prefixes sticking at 0 (and routes not in table)
As this is completely an in-house development one would wish that it was a little more bugfree, 3 years after introduction of v7 with the promised holy grail of routing engine...

---
### Author: Unknown
Date: Unknown

Just got Samsung s25 ultra and it doesnt want to roam(Older s23 roamed just fine), i get this in log.
Code:
Select all
@Glavni_5GHz association rejected, FTE indicated that STA uses RSNXE, but RSNXE was not included.
Is this related to 7.18 or something else i never saw such message?

---
### Author: Unknown
Date: Unknown

Just got Samsung s25 ultra and it doesnt want to roam(Older s23 roamed just fine), i get this in log.
Code:
Select all
@Glavni_5GHz association rejected, FTE indicated that STA uses RSNXE, but RSNXE was not included.
Is this related to 7.18 or something else i never saw such message?
*) wifi - try to authenticate client as non-FT client if it provides incomplete set of FT parameters;

---
### Author: Unknown
Date: Unknown

That may be true, but before they used a standard BGP implementation and Linux routing, and in v7 it was replaced by in-house written code and frankly for me it has only caused trouble.
I don't know about the BGP itself (although I got the impression that both v6 and v7 used proprietary code for this) , but the system routing was the other way around, wasn't it? RoS 6 used something made by Mikrotik, and RoS is using the default one?

---
### Author: Unknown
Date: Unknown

They made a big step with Ros6 -> RoS7, with a lot of work and now they has a lot of knowledge and experience in linux kernel programming. They using linux kernel fastpath feature and some proprietary vendor code for ASICs and here is where industry standards changing fast nowadays. First IPv4 then IPv6 L3HW offload and maybe soon MPLS comes next. But this is not BGP. I think that made by another group of developers as it need another type of knowledge. Maybe this cause one group of feature developed faster and another slower or stops.

---
### Author: Unknown
Date: Unknown

*) cloud - added file-share feature;
So that I don't end up being the annoying person who only talks about bad things, a compliment for a change...
Among the many features that I've seen as a fad lately, this
cloud file-share feature
was one that I thought was a fad at first glance...
But 40-50 seconds later I remembered topics like the unicorn controller that Mikrotik has been talking about for some time, and I also remembered
https://github.com/eworm-de/routeros-scripts
Repository Based Automation
.
I may be expecting too much, but to me it seems quite reasonable to put one thing together and imagine that they are creating an infrastructure for "desired state automation".

---
### Author: Unknown
Date: Unknown

*) cloud - added file-share feature;
I may be expecting too much, but to me it seems quite reasonable to put one thing together and imagine that they are creating an infrastructure for "desired state automation".
I agree, lots of use cases.  Like SMS/"Telegram"/etc notifications too.  Or, stuff like being able to "share" a peer's WG keys using file-shares's "expires-after".

---
### Author: Unknown
Date: Unknown

That may be true, but before they used a standard BGP implementation and Linux routing, and in v7 it was replaced by in-house written code and frankly for me it has only caused trouble.
I don't know about the BGP itself (although I got the impression that both v6 and v7 used proprietary code for this)
Yes, that is correct. Ever since v4, RouterOS uses their own proprietary BGP implementation.
During the v2 era they used Quagga. If I recall correctly, their own implementation (routing-test package at the time) appeared in the last versions of 2.9.x. and lasted as a test package until the end of v3.
(Don't quote me on the versions above - it's been 15-20 years so my memory may be a little fuzzy on the numbers).
During v2-v3 there was a community way ("MikroLinux") to install quagga, bypassing the then buggy version of quagga used.
We were also able to install OLSR, BIND, PHP, Perl, and other custom packages.
Then on v3.23 (if I recall correctly) they changed the packages format to signed ones, ending this custom packages era.
Then I think on v5.26 there was another hack that added apt to x86 installations allowing to install almost any package you wanted. I used this mainly to run HAproxy. Pretty useful!
I wish they still used Quagga (or FRR nowadays) with the awesome UI and filtering of v6. We would have way more features, more stability and a great way to manage BGP and especially filters with a UI and not by manually writing every filter.

---
### Author: Unknown
Date: Unknown

Ok I have been using RouterOS only from version ~6.29 and I was impressed with how BGP/BFD worked back then.
With v7 there initially was the problem of "no BFD" and "buggy filters", but that seems to have been resolved by now.
Unfortunately it now longer does its basic function: change of routing when links go down.
I have a simple head-office/subsidiary network with a partial mesh of tunnels of different types between them (GRE, GRE6, L2TP)/IPsec,
and regularly it refuses to load routes from some session, and when the other goes down we have dead routing.
That never happened in v6 and also not in older v7.  I think it can be only the BGP code, not the HW accel.
What I see is received message count going up in a session, prefixes received OK when doing a packet trace, but prefixes not in table.
Basic functionality I would say.
Also I think the BGP config and filter config broke traditions in RouterOS, and not for the better.

---
### Author: Unknown
Date: Unknown

with the awesome UI and filtering of v6 [...] and especially filters with a UI and not by manually writing every filter.
I'm still pissed I lost the "dynamic-in" rules – still no equivalent in V7...
Code:
Select all
/routing filter
add chain=dynamic-in distance=1 set-check-gateway=ping set-distance=1
which @mrz reported, in 2021:
v7 does not have equivalent to dynamic-in and connected-in chains.

---
### Author: Unknown
Date: Unknown

I feel MikroTik has not fully adapted its SW development processes to use cases where newer flagships like CCR2x16 make sense and also are marketed for.
While I can live with some hiccups on RB5009 devices (especially regarding its unbeatable price point for what you get), having BGP and other routing issues on a CCR2x16 class device is a deal breaker.
And having boiler plate and easy to test BGP functionality like adding received routes to tables broken with 7.16 and not fixed since is disappointing.

---
### Author: Unknown
Date: Unknown

I agree, but I also want to stress that loading 4 full tables on an internet border gateway is not the only use-case for BGP.

---
### Author: Unknown
Date: Unknown

THANK YOU mikrotik engineers for another fine beta with interesting features to test.
This is great work and we hope this agile approach continues to even better outcome.

---
### Author: Unknown
Date: Unknown

I agree, but I also want to stress that loading 4 full tables on an internet border gateway is not the only use-case for BGP.
Somewhat OT:  I’m not trying to diminish the problems you’re dealing with (and I really hope MT puts some effort into fixing it), but BGP was basically designed for routing between autonomous systems (i.e, external routing). For non-ISP networking, I personally prefer OSPF in most cases because of its simplicity and fast convergence.

---
### Author: Unknown
Date: Unknown

I agree, but I also want to stress that loading 4 full tables on an internet border gateway is not the only use-case for BGP.
Absolutely. Similar to what you described, we are using BGP inside our network to manage routing btw. different sites and locations.
Our 2 main border routers are owned and operated by our uplink provider.
They are made by Big-C and work without issues. But to be fair their price is more than 10 times higher than a CCR2116, and that does not include service contracts. Not to speak of noise and power consumption.

---
### Author: Unknown
Date: Unknown

Because this time with device-mode s–t no one want lock his devices, so less persons than before do tests...
I almost don't want to report this...  But noticed "cloud" or "file-share" are not selectable in device-mode.  If the whole of idea was minimizing the attack surface, we're already off to some inconsistency ;).
Code:
Select all
/system/device-mode/print
                 mode: advanced     
     allowed-versions: 7.13+,6.49.8+
              flagged: no           
     flagging-enabled: yes          
            scheduler: yes          
                socks: yes          
                fetch: yes          
                 pptp: yes          
                 l2tp: yes          
       bandwidth-test: yes          
          traffic-gen: no           
              sniffer: yes          
                ipsec: yes          
                romon: yes          
                proxy: yes          
              hotspot: yes          
                  smb: yes          
                email: yes          
             zerotier: yes          
            container: yes          
  install-any-version: no           
           partitions: no           
          routerboard: no           
        attempt-count: 0

---
### Author: Unknown
Date: Unknown

I am just reporting that route table retrieval via SNMP is broken, not looking for alternative solutions.
Maybe
(or not) it's related to the issue I reported on the 7.16 release
thread
.
I too have issues after 7.16 with BGP/routing.
Not the ones you describe, but since v7.16 there were multiple instances on multiple routers that the routing process would take up 100% CPU (single core) and the logs would get repeated errors about SNMP timeouts. Only reboot would resolve that.
It happened again on v7.18b1.
Code:
Select all
> /log/print where message ~ "SNMP"
 2025-01-28 23:26:08 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-28 23:41:08 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-28 23:56:08 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-29 00:11:09 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-29 00:26:09 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-29 00:38:53 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-29 00:51:07 snmp,warning SNMP did not get OID data within expected time, ignoring OID
 2025-01-29 01:06:07 snmp,warning SNMP did not get OID data within expected time, ignoring OID
Code:
Select all
> /system/resource/cpu/print 
Columns: CPU, LOAD, IRQ, DISK
#  CPU   LOAD  IRQ  DISK
0  cpu0  3%    1%   0%  
1  cpu1  0%    0%   0%  
2  cpu2  1%    0%   0%  
3  cpu3  100%  0%   0%
Code:
Select all
> /tool/profile cpu=3 duration=10
Columns: NAME, CPU, USAGE
NAME           CPU  USAGE
networking       3  0%   
management       3  0%   
ethernet         3  0%   
routing          3  95.5%
firewall         3  0.5% 
chacha_neon      3  0%   
poly1305_neon    3  0%   
udp_tunnel       3  0%   
cpu3                96%
/ip route print gets stuck and eventually times out.
Code:
Select all
> /ip route/print 

action timed out - try again, if error continues contact MikroTik support and send a supout file (13)
And on winbox the routes window comes up empty.
Also snmpwalk fails with:
Code:
Select all
Error: OID not increasing: iso.3.6.1.2.1.9999.1.1.6.4.1.4.10.26.37.2
 >= iso.3.6.1.2.1.9999.1.1.6.4.1.4.10.26.35.3
I believe the snmp error about OID not increasing was occurring a few releases back when snmp routes support was first introduced.
Rerunning snmpwalk got stuck and eventually timed out, and rerunning it again it returned the same error.
This router and others that have had this behavior are being monitored by LibreNMS via SNMP so I guess there's something in the SNMP/routing that causes this issue.
Other routers that are not being monitored via SNMP haven't exhibited this bug.

---
### Author: Unknown
Date: Unknown

I don't know about the BGP itself (although I got the impression that both v6 and v7 used proprietary code for this)
Yes, that is correct. Ever since v4, RouterOS uses their own proprietary BGP implementation.
During the v2 era they used Quagga. If I recall correctly, their own implementation (routing-test package at the time) appeared in the last versions of 2.9.x. and lasted as a test package until the end of v3.
(Don't quote me on the versions above - it's been 15-20 years so my memory may be a little fuzzy on the numbers).
During v2-v3 there was a community way ("MikroLinux") to install quagga, bypassing the then buggy version of quagga used.
We were also able to install OLSR, BIND, PHP, Perl, and other custom packages.
Then on v3.23 (if I recall correctly) they changed the packages format to signed ones, ending this custom packages era.
Then I think on v5.26 there was another hack that added apt to x86 installations allowing to install almost any package you wanted. I used this mainly to run HAproxy. Pretty useful!
I wish they still used Quagga (or FRR nowadays) with the awesome UI and filtering of v6. We would have way more features, more stability and a great way to manage BGP and especially filters with a UI and not by manually writing every filter.
I know XORP passed through those several choices.
I Didn't deal with that, I was in other market that time.
But from that old time, what I feel like a very bigg lost is LUA.
No limits on what you can do...
Including using Lua on hooks of events of every parts os the system.
I we had lua, and hook, we could use lua to deal with bgp addresses famílies that are not even addressed for today. For example BGP-QoS-Propagation, or Flowspec.

---
### Author: Unknown
Date: Unknown

Just wanted to pop in here and say a big thank you to the MikroTik team implementing Fast Track for IPv6

---
### Author: Unknown
Date: Unknown

I agree, but I also want to stress that loading 4 full tables on an internet border gateway is not the only use-case for BGP.
Indeed, router must be properly build and maintain a valid BGP table from them in every single AFI/SAFI, and moving selected routes to the proper RIB/FIB. Unless this, CCR2x16 is only a shiny expensive home gateway, or I don't know what market did they targeted with that. Maybe it hasn't been decided yet?

---
### Author: Unknown
Date: Unknown

Just wanted to pop in here and say a big thank you to the MikroTik team implementing Fast Track for IPv6
+1
Thanks for the hard work !

---
### Author: Unknown
Date: Unknown

Because this time with device-mode s–t no one want lock his devices, so less persons than before do tests...
I almost don't want to report this...  But noticed "cloud" or "file-share" are not selectable in device-mode.
I agree with complaint about "cloud" not being selectable in device mode ... and it should be disabled by default just like many other (more usable) options ;-)
File share might fall under "smb" option ... if it does, then option name should ideally be renamed to "rose". Otherwise I don't see why smb would be option but not other (potentially even less secure) file sharing modes, such as NFS or iSCSI.

---
### Author: Unknown
Date: Unknown

Just got Samsung s25 ultra and it doesnt want to roam(Older s23 roamed just fine), i get this in log.
Code:
Select all
@Glavni_5GHz association rejected, FTE indicated that STA uses RSNXE, but RSNXE was not included.
Is this related to 7.18 or something else i never saw such message?
*) wifi - try to authenticate client as non-FT client if it provides incomplete set of FT parameters;
Just checked at work with other wifi vendor and phone roams fine, so its again problem mikrotik side it seams..

---
### Author: Unknown
Date: Unknown

…a valid BGP table from them in every single AFI/SAFI…
All SAFIs? Well, then you’re in for a long wait! 😉

---
### Author: Unknown
Date: Unknown

Please add fasttrack ipv6 in defconf

---
### Author: Unknown
Date: Unknown

Just got Samsung s25 ultra and it doesnt want to roam(Older s23 roamed just fine), i get this in log.
Code:
Select all
@Glavni_5GHz association rejected, FTE indicated that STA uses RSNXE, but RSNXE was not included.
Is this related to 7.18 or something else i never saw such message?
This message already existed before. Even before the wifi driver update so many people have trouble with (7.15+).
see
viewtopic.php?t=194778#p993475

---
### Author: Unknown
Date: Unknown

…a valid BGP table from them in every single AFI/SAFI…
All SAFIs? Well, then you’re in for a long wait! 😉
Well if I configured them :)

---
### Author: Unknown
Date: Unknown

Please add fasttrack ipv6 in defconf
Not saying it's not already ... but defconf is only applied when device is reset to factory defaults (where "factory" part is a bit misleading because it's not config applied in factory when manufacturing device, it's config set as default in any particular ROS version).
But that particular firewall filter rule, which enables fasttrack, will never be applied to device with running config after upgrade. You'll have to do it manually.

---
### Author: Unknown
Date: Unknown

Please add fasttrack ipv6 in defconf
Where do you hurry? A fresh feature is not mature enough to be enabled by default.

---
### Author: Unknown
Date: Unknown

…a valid BGP table from them in every single AFI/SAFI…
All SAFIs? Well, then you’re in for a long wait! 😉
Not All AFI/SAFI, just the basic that is expected in a ISP/Telco environment recognizing that Underlay and Overlay exists and needs to be on different scopes.
IPv4, IPv6, L2VPN (Kompella), that MT Already does.
L3VPN (IPv4 and IPv6), that MT does in a broken way because learned the intrinsic VRF concept justa a few releases ago.
EVPN, that MT do not do, and I hope that it does not come missing things (my spider sense is telling that will come just with type 1 and 2...🥴)
BGP-LU

---
### Author: Unknown
Date: Unknown

I believe the snmp error about OID not increasing was occurring a few releases back when snmp routes support was first introduced.
Rerunning snmpwalk got stuck and eventually timed out, and rerunning it again it returned the same error.
This router and others that have had this behavior are being monitored by LibreNMS via SNMP so I guess there's something in the SNMP/routing that causes this issue.
Other routers that are not being monitored via SNMP haven't exhibited this bug.
I think your 100% CPU problem can well be caused by that.  In my network it is reproducible that an SNMP walk of the route table results in an endless loop, when you use standard tools like "snmpnetstat -v2c -c public -Cn -Cr x.x.x.x" they will just keep spitting out the same route entry forever, probably tying up the process.
When using snmpwalk the non-increasing OID is noticed and the process stops.
I can understand that when using a standard NMS that does not expect that, things will go haywire.
I am using a custom script and it is just for debugging purposes, and started a couple of times a day using a cron job to keep data.
So I had to kludge a "timeout 1" in front of the snmpnetstat to keep it at bay.
But starting from this version (7.18beta2) it not only loops, it also does not provide the correct result anymore!
E.g. a connected route to an LTE interface (obtained from DHCP) does not appear in the results, although it does appear in the usual /ip/route/print output.

---
### Author: Unknown
Date: Unknown

Please add fasttrack ipv6 in defconf
Not saying it's not already ... but defconf is only applied when device is reset to factory defaults (where "factory" part is a bit misleading because it's not config applied in factory when manufacturing device, it's config set as default in any particular ROS version).
I am still hoping for a solution where defconf for the firewall can be applied to an existing router...  some command that removes the firewall config and reloads it from defconf, if only as a commandline script.
Users manage to foul up their firewall config or are still using an ancient default, and it is brutal to require them to reset their entire config just to obtain the default rules.
(of course there is the risk of locking oneself out when the default firewall is not compatible with the otherwise modified config)
And yes, the fasttrack-connection line is already in defconf, so the requester probably did not understand that upgrading will not add defconf...

---
### Author: Unknown
Date: Unknown

@fischerdouglas: yeah, plus L3VPN/MPLS-TE, MPLS-MGMT and BGP/MPLS L3 VPN (128)...

---
### Author: Unknown
Date: Unknown

...a valid BGP table from them in every single AFI/SAFI...
All SAFIs?
Seizing the AFI/SAFI theme, I remembered the
lack of support due to BGP Flow Spec in RouterOS
, I decided to bring back to the table the
suggestion of
hook-events
.
Based on the
vague information on the confluence
, RouterOS v7 supposedly already have support to BGP Flow Spec.
I never understood what they mean with
"Flow spec attributes are forwarded"
.
My guess here is that the BGP part of the job (AFI/SAFI) is already done. But they are holding the things about Flow Spec because they still don't have how to transfer ACL-Rules from Control-Plane (BGP) to Data-Plane (Firewall Filter and/or Firewall RAW).
Considering that this limitation of transferring ACL-Rules from the BGP Flow Spec to the Firewall is indeed a reality, I will bring back the sugestion of better exposing Hooks to user with scripting.
BGP Flowspec
An example of how an advanced hook action to a Script would be useful is to allow users to implement their own BGP Flowspec rules themselves.
As far as I can imagine, if today there were a { [actions] } in /routing/filter/rule that allowed a call to a script where the debug.fwp-ptr attribute was passed as one of the call arguments of the script, it would be possible to create a set of scripts in which you could create dynamic entries in /ip/firewall/filter/ and /ip/firewall/raw/ to then have very similar results to the BGP Flow Spec protocol.
If RouterOS would exposed a bit more what happens in the backyard trought Hooks for almos any event, user could solve their own problems with scripting without depending so much of development of MikroTik.
For those who are not understanding what I'm talking about when I mention hook-events, the best way to explain it is by giving examples of things that already exist within RouterOS itself.
In functions such as
DHCP-Leases
,
VRRP
,
PPP-Profile
, this possibility of exposing these events as triggers is already done, where RouterOS itself handles the calls to the Scripts.
But it is done in an extremely limited way, as if they were putting wheels on a motorcycle to prevent the riders from falling.
There are Script fields for events such as "on-up" and "on-down", pre-determined variables, and the user can use them well or badly...
From the little I know, this method of exposing events is very proprietary from a development point of view. It generates a lot of work for programmers.
And in the background, it ends up forcing the system to create and handle interruptions for these events, which in 99% of cases are not actually used.
The suggestion I am making may seem very disruptive, but it is actually a development trend and not an innovation.
Basically, the idea is that all RouteOS features expose the possibility of sending the events of these features to a hook manager.
And from this hook manager, scripts can be invoked so that the user can do what he needs to do.
No! This is not something for users with basic knowledge.
And taking advantage of the new concept that came with Device-Mode, it should be a feature that should be blocked by default and require a specific liberation.
But, if something like this existed, features such as BGP Flow Spec, QoS policy propagation using BGP (QPPB), and many others that are only really used by more advanced users could be implemented with relative ease for the type of user who needs such a feature.
P.S.: Today, Mikrotik itself recommends using functions similar to this... And it does so in a very inadequate way.
There are examples of scripts provided by MikroTik that are based on pooling and parsing the log system and then invoking scripts.
A methodology that is limited, crude, and computationally heavy.
Honestly, this method used/suggested today smells as bad as Java's Log4J.

---
### Author: Unknown
Date: Unknown

I would be happy if MTik fixing BGP bugs in existing AFI/SAFI first, instead of implement new ones, otherwise RoS staying playground for users whom like to test half-baked features. As I see there are two type of MTik users. Ones likes playing with new features and the others would likes to serve customers with existing features in a stable environment. Not so easy to make happy both types of users.

---
### Author: Unknown
Date: Unknown

... As I see there are two type of MTik users. Ones likes playing with new features and the others would likes to serve customers with existing features in a stable environment. Not so easy to make happy both types of users.
IMO volume sales are with users needing easy to manage reliable network performance value.

---
### Author: Unknown
Date: Unknown

But noticed "cloud" or "file-share" are not selectable in device-mode.  If the whole of idea was minimizing the attack surface, we're already off to some inconsistency ;).
I think device-mode was a knee-jerk reaction to some bad publicity about MikroTik routers being compromised and then used to generate insane amounts of traffic.
It is not really about protecting the router itself or the user data accessible via the router, more about the possibility to use the router in DDoS botnets and causing bad reputation to MikroTik.
So you find things like socks, bandwidth-test, traffic-gen, container (which could do anything).
And apparently MikroTik knows something about "old versions" that it does not usually communicate (or in fact denies), as there were additional measures to prevent downgrading.
In fact that caused most of the stir-up. Admins of remote routers do not want to have their downgrading possibilities removed.
In the end it was not so bad as initially announced, e.g. it seems that when you have created 2 partitions on a router at 7.16 or before, you still can use them in the usual way without the partitions flag enabled.  I.e. you can copy partitions, save config, and toggle active.
No idea what it would bring an attacker who already has access to create another partition, but apparently they fear it.
When it is "attack a router then create a partition with current version copied into it so later you can activate it in case the router was upgraded" well then the current status does not change a thing.
I think the whole device-mode thing is more theater than actual improvement, because the users that would typically remove their firewall, choose an easy or even empty password, and thus make their router candidate for incorporation into a botnet aren't typically those that would closely follow RouterOS upgrades and may forever be on some old version.  So they never get this new function.
New devices may profit, but it will take a long time before new devices have the majority of the installed base.
And in bad publicity, MikroTik can show that they did what was possible to prevent the abuse of traffic generator.

---
### Author: Unknown
Date: Unknown

I think the whole device-mode thing is more theater than actual improvement
It's actually a downprovement
some recent developments (such as remote netinstall) got completelly negated by this (as one can no longer change boot-mode to "try ethernet once" then reboot remotelly
also, since "device mode" cannot be set by netinstall/flashfig, it makes bench flashing in bulk a lot more involved , requiring manual intervention every time.
(think flashing 100 CAP's for a client with a default config)
unless one is comfortable deploying a fleet of devices with locked-down partitions/routerboot/routerboard

---
### Author: Unknown
Date: Unknown

We actually don't know what kind of "abuse by vendor" can come out of this device-mode can of worms. They can even force the override of user-defined settings of device-mode on every subsequent upgrade - if they want to get rid of more customers...

---
### Author: Unknown
Date: Unknown

Not saying it's not already ... but defconf is only applied when device is reset to factory defaults (where "factory" part is a bit misleading because it's not config applied in factory when manufacturing device, it's config set as default in any particular ROS version).
I am still hoping for a solution where defconf for the firewall can be applied to an existing router...  some command that removes the firewall config and reloads it from defconf, if only as a commandline script.
So far none of changes in firewall defconf was ever applied when upgrading ROS. So I don't see this one coming either. Messing with FW rules has huge potential to screw things up behind user's back. E.g. if somebody has some mangle rules ... which would fail completely after some ROS upgrade would enable fasttrack. And, mind you, most users (even many of members of this forum) don't read list of changes, let alone some discussions or articles on the web.

---
