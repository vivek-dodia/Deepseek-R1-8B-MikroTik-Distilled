---
title: Thread-214362
url: https://forum.mikrotik.com/viewtopic.php?t=214362&sid=3b77a3334c914448dbbc02bfdff4c3aa
thread_id: 214362
section: RouterOS
post_count: 5
date_crawled: 2025-02-03T12:12:14.633963
---

### Post 1
Author: Unknown
Date: Unknown

Hi,We have a network with close to 512 devices. We are using Fortigate 80f( for VPN and network) and Windows DHCP Server on the domain controller.Recently we experienced a failure of the Domain Controller. We have a second domain controller for high availability but the DHCP is only on the first one, however we lost both of our Domain Controllers for 1 day.We are trying to improve our infrastructure as:1) moving the DHCP server from the domain controller - the goal is to have internet even if the domain controller is downa) our desk phone system is over internet and we would like to be able to communicate even if domain controller is downb) for our ERP we have a server onsite - we would like to be able to not interrupt production even if the domain controller is down2) better control and overview of the IP leases - both Windows and Fortinet have limited features for this part and I do not like their DHCP solutions a lotIt seems like Fortigate 80f has a limitation of 512 reserved MAC/IP addresses, and I am concerned this may impact us in future.Trying to figure out if we can have a Mikrotik device only to take care of the DHCP and reservation part of the network.Also is there any way to have 2 Mikrotik devices configured as DHCP servers for high availability? If one is down the other one to take over?

---
### Post 2
Author: Unknown
Date: Unknown

I have a network on a customer site which used to be completely on-prem with VM farms for all the infrastructure part and ERP.Due to aging HW and move to complete cloud based ERP, that farm setup was decommissioned ( not 100% done yet).No local AD anymore - moved to cloud.No local ERP anymore - moved to cloud.Still some small local servers, lots of printers and wifi AP etc.DHCP moved to RB5009 for /23 network.Exporting static DHCP leases from Windows server to file, some Excel stuff, import again in RB5009 as new static leases and done.I could have used ISP router as well for DHCP but I don't have direct access to it,  hence the MT alternative.It also runs as capsman controller since all wifi was  changed at the same time ( from over decade old Symbol APs to all MT AX).Hot standby is possible but haven't touched it yet myself. You should find quite some pointers in Help pages, I think.

---
### Post 3
Author: Unknown
Date: Unknown

Geez Holvoe everytime I just think your just a pretty face, you blow me away with some hidden acumen, I also thought like you were retired LOL.

---
### Post 4
Author: Unknown
Date: Unknown

DHCP as such has been designed with and embedded active-active redundancy - the client broadcasts a discover message when it has no address yet, but once it receives an offer, it unicasts the request for assignment of the offered address and subsequent renewal requests to the server that has sent the offer. If that server doesn't respond to the renewal request, the client reverts to broadcasting but keeps indicating the currently assigned address as the preferred one. And the servers typically ping an address they are about to offer before actually offering it to prevent collisions.Regarding administration, you basically have to provision all the servers with the same set of reservations using an external tool. Mikrotik does not provide any embedded tools for configuration synchronization, but it offers an API for integration with provisioning systems and scripting. I do use active-active DHCP server setups where each of two routers is equipped with a different internet uplink so even if one router dies completely, the other one keeps providing everything necessary to maintain internet access for the devices on the site, but there are just a few statically reserved addresses so it is manageable manually. For 500+ reserved addresses you definitely need an external provisioning system, either one that will update the configration of both DHCP servers or a (redundant again) RADIUS server that would serve as a backend for the DHCP servers. Forcing an active-standby mode for DHCP is possible but it won't remove the need to maintain the configurations in sync.

---
### Post 5
Author: Unknown
Date: Unknown

Thanks for your replies.Are there limitations on Mikrotik devices as I've seen on Fortigate? For example no more than 512 reservations?Also is there a specific device you would recommend for this project? I will prefer a rack mountable.Maybe if I buy 2 devices, and keep one on the shelf, configured ready and plug it, only if first one fails.

---
